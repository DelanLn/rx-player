!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RxPlayer=t():e.RxPlayer=t()}(window,function(){return(r={},i.m=n=[function(e,t,n){"use strict";var r=n(32),i=new(function(){function e(){this.error=r.a,this.warn=r.a,this.info=r.a,this.debug=r.a,this.LEVELS={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},this.currentLevel="NONE"}var t=e.prototype;return t.setLevel=function(e){var t,n=this.LEVELS[e];"number"==typeof n?(t=n,this.currentLevel=e):(t=0,this.currentLevel="NONE"),this.error=t>=this.LEVELS.ERROR?console.error.bind(console):r.a,this.warn=t>=this.LEVELS.WARNING?console.warn.bind(console):r.a,this.info=t>=this.LEVELS.INFO?console.info.bind(console):r.a,this.debug=t>=this.LEVELS.DEBUG?console.log.bind(console):r.a},t.getLevel=function(){return this.currentLevel},e}());t.a=i},function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"r",function(){return h}),n.d(t,"g",function(){return r}),n.d(t,"h",function(){return i}),n.d(t,"k",function(){return a}),n.d(t,"f",function(){return v}),n.d(t,"i",function(){return o}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"p",function(){return m}),n.d(t,"q",function(){return g}),n.d(t,"m",function(){return f}),n.d(t,"n",function(){return d}),n.d(t,"o",function(){return b}),n.d(t,"j",function(){return y}),n.d(t,"l",function(){return _});var p=n(35);function h(e){for(var t=e.length,n=new Uint8Array(t),r=0;r<t;r++)n[r]=255&e.charCodeAt(r);return n}function r(e){return String.fromCharCode.apply(null,e)}function i(e){for(var t="",n=e.length,r=0;r<n;r+=2)t+=String.fromCharCode(e[r]);return t}function a(e){for(var t=e.length,n=new Uint8Array(t/2),r=0,i=0;r<t;r+=2,i++)n[i]=255&parseInt(e.substring(r,r+2),16);return n}function v(e,t){void 0===t&&(t="");for(var n="",r=0;r<e.byteLength;r++)n+=(e[r]>>>4).toString(16),n+=(15&e[r]).toString(16),0<t.length&&r<e.byteLength-1&&(n+=t);return n}function o(){for(var e,t=arguments.length,n=-1,r=0;++n<t;)r+="number"==typeof(e=n<0||arguments.length<=n?void 0:arguments[n])?e:e.length;var i=new Uint8Array(r),a=0;for(n=-1;++n<t;)"number"==typeof(e=n<0||arguments.length<=n?void 0:arguments[n])?a+=e:0<e.length&&(i.set(e,a),a+=e.length);return i}function u(e,t){return(e[t+0]<<8)+(e[t+1]<<0)}function s(e,t){return 65536*e[t+0]+256*e[t+1]+e[t+2]}function c(e,t){return 16777216*e[t+0]+65536*e[t+1]+256*e[t+2]+e[t+3]}function l(e,t){return 4294967296*(16777216*e[t+0]+65536*e[t+1]+256*e[t+2]+e[t+3])+16777216*e[t+4]+65536*e[t+5]+256*e[t+6]+e[t+7]}function f(e){return new Uint8Array([e>>>8&255,255&e])}function d(e){return new Uint8Array([e>>>24&255,e>>>16&255,e>>>8&255,255&e])}function b(e){var t=e%4294967296,n=(e-t)/4294967296;return new Uint8Array([n>>>24&255,n>>>16&255,n>>>8&255,255&n,t>>>24&255,t>>>16&255,t>>>8&255,255&t])}function m(e,t){return(e[t+0]<<0)+(e[t+1]<<8)}function g(e,t){return e[t+0]+256*e[t+1]+65536*e[t+2]+16777216*e[t+3]}function y(e){Object(p.b)(16===e.length,"UUID length should be 16");var t=h(e),n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],c=t[7],l=t.subarray(8,10),f=t.subarray(10,16),d=new Uint8Array(16);return d[0]=a,d[1]=i,d[2]=r,d[3]=n,d[4]=u,d[5]=o,d[6]=c,d[7]=s,d.set(l,8),d.set(f,10),v(d)}function _(e,t){var n=new DataView(e),r=n.byteLength;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(n.getUint8(i)!==t[i])return!1;return!0}function O(e,t){if(e.length!==t.length)return!1;for(var n=e.length-1;0<=n;n--)if(e[n]!==t[n])return!1;return!0}},function(e,t,n){"use strict";function r(e){return"string"==typeof e&&0<e.length}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";t.a={DEFAULT_UNMUTED_VOLUME:.1,DEFAULT_REQUEST_TIMEOUT:3e4,DEFAULT_TEXT_TRACK_MODE:"native",DEFAULT_MANUAL_BITRATE_SWITCHING_MODE:"seamless",DEFAULT_AUTO_PLAY:!1,DEFAULT_SHOW_NATIVE_SUBTITLE:!0,DEFAULT_STOP_AT_END:!0,DEFAULT_WANTED_BUFFER_AHEAD:30,DEFAULT_MAX_BUFFER_AHEAD:1/0,DEFAULT_MAX_BUFFER_BEHIND:1/0,MAXIMUM_MAX_BUFFER_AHEAD:{text:18e3},MAXIMUM_MAX_BUFFER_BEHIND:{text:18e3},DEFAULT_INITIAL_BITRATES:{audio:0,video:0,other:0},DEFAULT_MAX_BITRATES:{audio:1/0,video:1/0,other:1/0},INACTIVITY_DELAY:6e4,DEFAULT_THROTTLE_WHEN_HIDDEN:!1,DEFAULT_THROTTLE_VIDEO_BITRATE_WHEN_HIDDEN:!1,DEFAULT_LIMIT_VIDEO_WIDTH:!1,DEFAULT_LIVE_GAP:{DEFAULT:10,LOW_LATENCY:3},BUFFER_DISCONTINUITY_THRESHOLD:1,BITRATE_REBUFFERING_RATIO:1.5,BUFFER_GC_GAPS:{CALM:240,BEEFY:30},DEFAULT_MAX_MANIFEST_REQUEST_RETRY:4,DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR:4,DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE:1/0,INITIAL_BACKOFF_DELAY_BASE:{REGULAR:200,LOW_LATENCY:50},MAX_BACKOFF_DELAY_BASE:{REGULAR:3e3,LOW_LATENCY:1e3},SAMPLING_INTERVAL_MEDIASOURCE:1e3,SAMPLING_INTERVAL_LOW_LATENCY:250,SAMPLING_INTERVAL_NO_MEDIASOURCE:500,ABR_MINIMUM_TOTAL_BYTES:15e4,ABR_MINIMUM_CHUNK_SIZE:16e3,ABR_STARVATION_FACTOR:{DEFAULT:.72,LOW_LATENCY:.64},ABR_REGULAR_FACTOR:{DEFAULT:.9,LOW_LATENCY:.9},ABR_STARVATION_GAP:{DEFAULT:5,LOW_LATENCY:5},OUT_OF_STARVATION_GAP:{DEFAULT:7,LOW_LATENCY:7},ABR_STARVATION_DURATION_DELTA:.1,ABR_FAST_EMA:2,ABR_SLOW_EMA:10,RESUME_GAP_AFTER_SEEKING:{DEFAULT:1.5,LOW_LATENCY:.5},RESUME_GAP_AFTER_NOT_ENOUGH_DATA:{DEFAULT:.5,LOW_LATENCY:.5},RESUME_GAP_AFTER_BUFFERING:{DEFAULT:5,LOW_LATENCY:.5},STALL_GAP:{DEFAULT:.5,LOW_LATENCY:.2},MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT:.15,MAX_MANIFEST_BUFFERED_START_END_DIFFERENCE:.4,MAX_MANIFEST_BUFFERED_DURATION_DIFFERENCE:.3,MINIMUM_SEGMENT_SIZE:.005,APPEND_WINDOW_SECURITIES:{START:.2,END:.1},MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL:50,TEXT_TRACK_SIZE_CHECKS_INTERVAL:250,BUFFER_PADDING:{audio:1,video:3,other:1},SEGMENT_PRIORITIES_STEPS:[6,14],EME_DEFAULT_WIDEVINE_ROBUSTNESSES:["HW_SECURE_ALL","HW_SECURE_DECODE","HW_SECURE_CRYPTO","SW_SECURE_DECODE","SW_SECURE_CRYPTO"],EME_KEY_SYSTEMS:{clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.microsoft.playready","com.chromecast.playready","com.youtube.playready"]},OUT_OF_SYNC_MANIFEST_REFRESH_DELAY:3e3,EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS:50,FORCED_ENDED_THRESHOLD:.001,ADAPTATION_SWITCH_BUFFER_PADDINGS:{video:{before:.5,after:1},audio:{before:.5,after:2},text:{before:0,after:0},image:{before:0,after:0}},SOURCE_BUFFER_FLUSHING_INTERVAL:2e3}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},,,function(e,t,n){"use strict";var r=n(49),i=n(69),a=n.n(i),o=n(30);n.d(t,"a",function(){return r}),function(){if(window.WebKitSourceBuffer&&!window.WebKitSourceBuffer.prototype.addEventListener){var e=window.WebKitSourceBuffer.prototype;for(var t in o.a.prototype)o.a.prototype.hasOwnProperty(t)&&(e[t]=o.a.prototype[t]);e._listeners=[],e.__emitUpdate=function(e,t){var n=this;a()(function(){n.trigger(e,t),n.updating=!1,n.trigger("updateend")})},e.appendBuffer=function(e){if(this.updating)throw new Error("updating");this.trigger("updatestart"),this.updating=!0;try{this.append(e)}catch(e){return void this.__emitUpdate("error",e)}this.__emitUpdate("update")}}}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(4),s=n(59),c=n(82),i=n(20),o=n(70),a=n(42),l=n(62),u=function(i){function a(e,t,n){var r=i.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=c.a;break;case 1:if(!e){r.destination=c.a;break}if("object"==typeof e){e instanceof a?(r.syncErrorThrowable=e.syncErrorThrowable,(r.destination=e).add(r)):(r.syncErrorThrowable=!0,r.destination=new f(r,e));break}default:r.syncErrorThrowable=!0,r.destination=new f(r,e,t,n)}return r}return r.a(a,i),a.prototype[o.a]=function(){return this},a.create=function(e,t,n){var r=new a(e,t,n);return r.syncErrorThrowable=!1,r},a.prototype.next=function(e){this.isStopped||this._next(e)},a.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},a.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},a.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},a.prototype._next=function(e){this.destination.next(e)},a.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},a.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},a.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},a}(i.a),f=function(u){function e(e,t,n,r){var i,a=u.call(this)||this;a._parentSubscriber=e;var o=a;return Object(s.a)(t)?i=t:t&&(i=t.next,n=t.error,r=t.complete,t!==c.a&&(o=Object.create(t),Object(s.a)(o.unsubscribe)&&a.add(o.unsubscribe.bind(o)),o.unsubscribe=a.unsubscribe.bind(a))),a._context=o,a._next=i,a._error=n,a._complete=r,a}return r.a(e,u),e.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},e.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=a.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(l.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(l.a)(e)}}},e.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n),this.unsubscribe()}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw e;Object(l.a)(e)}},e.prototype.__tryOrSetError=function(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0):(Object(l.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},e}(u)},function(e,t,n){"use strict";var a=n(8);var o=n(70),u=n(82);var r=n(51),i=n(46);function s(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)}:i.a}var c=n(42);n.d(t,"a",function(){return l});var l=function(){function n(e){this._isScalar=!1,e&&(this._subscribe=e)}return n.prototype.lift=function(e){var t=new n;return t.source=this,t.operator=e,t},n.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof a.a)return e;if(e[o.a])return e[o.a]()}return e||t||n?new a.a(e,t,n):new a.a(u.a)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||c.a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),c.a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},n.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(e){for(;e;){var t=e.closed,n=e.destination,r=e.isStopped;if(t||r)return!1;e=n&&n instanceof a.a?n:null}return!0}(t)?console.warn(e):t.error(e)}},n.prototype.forEach=function(r,e){var i=this;return new(e=f(e))(function(e,t){var n;n=i.subscribe(function(e){try{r(e)}catch(e){t(e),n&&n.unsubscribe()}},t,e)})},n.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},n.prototype[r.a]=function(){return this},n.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s(e)(this)},n.prototype.toPromise=function(e){var r=this;return new(e=f(e))(function(e,t){var n;r.subscribe(function(e){return n=e},function(e){return t(e)},function(){return e(n)})})},n.create=function(e){return new n(e)},n}();function f(e){if(!(e=e||(c.a.Promise||Promise)))throw new Error("no Promise impl found");return e}},function(e,t,n){"use strict";t.a={transports:{},imageBuffer:null,imageParser:null,nativeTextTracksBuffer:null,nativeTextTracksParsers:{},htmlTextTracksBuffer:null,htmlTextTracksParsers:{},emeManager:null,directfile:null}},function(e,t,n){"use strict";function r(e,t,n){if("function"==typeof Array.prototype.find)return e.find(t,n);for(var r=e.length>>>0,i=0;i<r;i++){var a=e[i];if(t.call(n,a,i,e))return a}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var s=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var o in n=Object(arguments[a]))c.call(n,o)&&(i[o]=n[o]);if(s){r=s(n);for(var u=0;u<r.length;u++)l.call(n,r[u])&&(i[r[u]]=n[r[u]])}}return i}},function(e,t,n){"use strict";function r(e,t,n){if("function"==typeof Array.prototype.includes)return e.includes(t,n);var r=e.length>>>0;if(0==r)return!1;for(var i,a,o=0|n,u=0<=o?Math.min(o,r-1):Math.max(r+o,0);u<r;){if((i=e[u])===(a=t)||"number"==typeof i&&"number"==typeof a&&isNaN(i)&&isNaN(a))return!0;u++}return!1}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return null==e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(14);function r(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=n.length;e<i;){var a=n[e];if(!Object(o.a)(a))return a;e++}}},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return f}),n.d(t,"c",function(){return l}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return i}),n.d(t,"f",function(){return r}),n.d(t,"g",function(){return a}),n.d(t,"h",function(){return o}),n.d(t,"i",function(){return s}),n.d(t,"j",function(){return u});var r=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,i=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,a=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,o=/^(\d*\.?\d*)f$/,u=/^(\d*\.?\d*)t$/,s=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,c=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,l=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/,f=/^#([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})([0-9A-f]{2})$/,d=/^#([0-9A-f])([0-9A-f])([0-9A-f])([0-9A-f])$/},function(e,t,n){"use strict";function a(e,t,n){var r,i=e.repeatCount;return 0<=i?i:(r=null!=t?t.start:null!=n?n:Number.MAX_VALUE,Math.ceil((r-e.start)/e.duration)-1)}function r(e,t,n){var r=e.start,i=e.duration;return i<=0?r:r+(a(e,t,n)+1)*i}function i(e,t){return e*t.timescale+t.indexTimeOffset}function o(e,t){return(e-t.indexTimeOffset)/t.timescale}function u(e,t,n){return[e*n,(e+t)*n]}n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return u})},,function(e,t,n){"use strict";n.d(t,"a",function(){return f}),n.d(t,"b",function(){return O}),n.d(t,"c",function(){return h}),n.d(t,"d",function(){return m}),n.d(t,"e",function(){return p}),n.d(t,"f",function(){return b}),n.d(t,"g",function(){return d}),n.d(t,"h",function(){return v}),n.d(t,"i",function(){return g}),n.d(t,"j",function(){return o}),n.d(t,"k",function(){return a}),n.d(t,"l",function(){return _});var r=1/60;function i(e,t){return Math.abs(e-t)<r}function u(e,t){return{start:Math.min(e.start,t.start),end:Math.max(e.end,t.end)}}function s(e,t){return e.end<=t.start}function a(e,t){for(var n=0;n<e.length;n++)if(o(e[n],t))return!0;return!1}function o(e,t){var n=e.start,r=e.end;return n<=t&&t<r}function c(e,t){return o(e,t.start)||e.start<t.end&&t.end<e.end||o(t,e.start)}function l(e,t){return i(t.start,e.end)||i(t.end,e.start)}function f(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function d(e,t){for(var n=e.length-1;0<=n;n--){var r=e.start(n);if(r<=t){var i=e.end(n);if(t<i)return{start:r,end:i}}}return null}function p(e,t){for(var n=e.length,r=0;r<n;r++){var i=e.start(r);if(t<i)return i-t}return 1/0}function h(e,t){for(var n=null,r=[],i=0;i<e.length;i++){var a=e.start(i),o=e.end(i);t<a||o<=t?r.push({start:a,end:o}):n={start:a,end:o}}return{outerRanges:r,innerRange:n}}function v(e,t){var n=d(e,t);return null!==n?n.end-n.start:0}function b(e,t){var n=d(e,t);return null!==n?t-n.start:0}function m(e,t){var n=d(e,t);return null!==n?n.end-t:1/0}function g(e,t){if(t.start===t.end)return e;for(var n=t,r=0;r<e.length;r++){var i=e[r],a=c(n,i),o=l(n,i);if(a||o)n=u(n,i),e.splice(r--,1);else if(0===r){if(s(n,e[0]))break}else if(s(e[r-1],n)&&s(n,i))break}return e.splice(r,0,n),function(e){for(var t=1;t<e.length;t++){var n=e[t-1],r=e[t];if(l(n,r)){var i=u(n,r);e.splice(--t,2,i)}}return e}(function(e){for(var t=0;t<e.length;t++){var n=e[t];n.start===n.end&&e.splice(t++,1)}return e}(e))}function y(e,t){for(var n=[],r=0;r<t.length;r++)c(e,t[r])&&n.push(t[r]);return n}function _(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=y(i,t);if(0<a.length)for(var o=0;o<a.length;o++){var u=a[o];n.push({start:Math.max(i.start,u.start),end:Math.min(i.end,u.end)})}}return n}function O(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=[],o=y(i,t);if(0<o.length)for(var u=0;u<o.length;u++){var s=o[u];a.push({start:Math.max(i.start,s.start),end:Math.min(i.end,s.end)})}if(0===a.length)n.push(i);else{for(var c=i.start,l=0;l<a.length;l++)a[l].start>c&&n.push({start:c,end:a[l].start}),c=a[l].end;c<i.end&&n.push({start:c,end:i.end})}}return n}},function(e,t,n){"use strict";var s=n(50),c=n(93),l=n(59),f=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}();n.d(t,"a",function(){return r});var r=function(){function u(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var e;return u.prototype.unsubscribe=function(){var t;if(!this.closed){var e=this._parentOrParents,n=this._unsubscribe,r=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof u)e.remove(this);else if(null!==e)for(var i=0;i<e.length;++i){e[i].remove(this)}if(Object(l.a)(n))try{n.call(this)}catch(e){t=e instanceof f?d(e.errors):[e]}if(Object(s.a)(r)){i=-1;for(var a=r.length;++i<a;){var o=r[i];if(Object(c.a)(o))try{o.unsubscribe()}catch(e){t=t||[],e instanceof f?t=t.concat(d(e.errors)):t.push(e)}}}if(t)throw new f(t)}},u.prototype.add=function(e){var t=e;if(!e)return u.EMPTY;switch(typeof e){case"function":t=new u(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof u)){var n=t;(t=new u)._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var r=t._parentOrParents;if(null===r)t._parentOrParents=this;else if(r instanceof u){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}var i=this._subscriptions;return null===i?this._subscriptions=[t]:i.push(t),t},u.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},u.EMPTY=((e=new u).closed=!0,e),u}();function d(e){return e.reduce(function(e,t){return e.concat(t instanceof f?t.errors:t)},[])}},function(e,t,n){"use strict";var r=n(9),i=n(61),a=n(26),o=n(14);t.a=function(e){if(e instanceof r.a)return e;if(Object(o.a)(e)||"function"!=typeof e.subscribe)return Object(o.a)(e)||"function"!=typeof e.then?Object(a.a)(e):Object(i.a)(e);var n=e;return new r.a(function(t){var e=n.subscribe(function(e){t.next(e)},function(e){t.error(e)},function(){t.complete()});return function(){Object(o.a)(e)||"function"!=typeof e.dispose?Object(o.a)(e)||"function"!=typeof e.unsubscribe||e.unsubscribe():e.dispose()}})}},function(e,t,n){"use strict";var r=n(9),i=n(3),f=n(131),d=n(2),p=n(14),u=i.a.DEFAULT_REQUEST_TIMEOUT;function a(a){var o={url:a.url,headers:a.headers,responseType:Object(p.a)(a.responseType)?"json":a.responseType,timeout:Object(p.a)(a.timeout)?u:a.timeout};return new r.a(function(u){var s=o.url,e=o.headers,t=o.responseType,n=o.timeout,c=new XMLHttpRequest;if(c.open("GET",s,!0),0<=n&&(c.timeout=n),c.responseType=t,"document"===c.responseType&&c.overrideMimeType("text/xml"),!Object(p.a)(e)){var r=e;for(var i in r)r.hasOwnProperty(i)&&c.setRequestHeader(i,r[i])}var l=performance.now();return c.onerror=function(){u.error(new f.a(s,c.status,"ERROR_EVENT",c))},c.ontimeout=function(){u.error(new f.a(s,c.status,"TIMEOUT",c))},!0===a.sendProgressEvents&&(c.onprogress=function(e){var t=performance.now();u.next({type:"progress",value:{url:s,duration:t-l,sendingTime:l,currentTime:t,size:e.loaded,totalSize:e.total}})}),c.onload=function(e){if(4===c.readyState)if(200<=c.status&&c.status<300){var t,n=performance.now(),r=c.response instanceof ArrayBuffer?c.response.byteLength:e.total,i=c.status,a=c.responseType,o=Object(d.a)(c.responseURL)?c.responseURL:s;if(t="json"===a?"object"==typeof c.response?c.response:function(e){try{return JSON.parse(e)}catch(e){return null}}(c.responseText):c.response,Object(p.a)(t))return void u.error(new f.a(s,c.status,"PARSE_ERROR",c));u.next({type:"data-loaded",value:{status:i,url:o,responseType:a,sendingTime:l,receivedTime:n,duration:n-l,size:r,responseData:t}}),u.complete()}else u.error(new f.a(s,c.status,"ERROR_HTTP_CODE",c))},c.send(),function(){Object(p.a)(c)||4===c.readyState||c.abort()}})}t.a=a},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(13),i=[];function a(e){Object(r.a)(i,e)||(console.warn(e),i.push(e))}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return o});var r=!!window.MSInputMethodContext&&!!document.documentMode,i="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent),a=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),o=/SamsungBrowser/.test(navigator.userAgent),u=/Safari/i.test(navigator.userAgent)},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"e",function(){return u});var r=n(58),i=n(94),a=window,o=a.HTMLElement,u=null!=a.VTTCue?a.VTTCue:a.TextTrackCue,s=null!=a.MediaSource?a.MediaSource:null!=a.MozMediaSource?a.MozMediaSource:null!=a.WebKitMediaSource?a.WebKitMediaSource:a.MSMediaSource,c=Object(i.a)()?a.WebKitMediaKeys:null!=a.MediaKeys?a.MediaKeys:null!=a.MSMediaKeys?a.MSMediaKeys:null!=a.MozMediaKeys?a.MozMediaKeys:null!=a.WebKitMediaKeys?a.WebKitMediaKeys:function(){function e(){throw new r.a("MEDIA_KEYS_NOT_SUPPORTED","No `MediaKeys` implementation found in the current browser.")}this.create=e,this.createSession=e,this.isTypeSupported=e,this.setServerCertificate=e},l={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(48),i=n(66),a=n(75);function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return Object(r.a)(n)?(e.pop(),Object(a.a)(e,n)):Object(i.a)(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(52),o=n(121),u=n(9);function r(e,t,n,r,i){if(void 0===i&&(i=new a.a(e,n,r)),!i.closed)return t instanceof u.a?t.subscribe(i):Object(o.a)(t)(i)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(4),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n(8).a)},function(e,t,n){"use strict";var r={loaded:function(e){return{type:"loaded",value:{sourceBuffersStore:e}}},decipherabilityUpdate:function(e){return{type:"decipherabilityUpdate",value:e}},manifestReady:function(e){return{type:"manifestReady",value:{manifest:e}}},manifestUpdate:function(){return{type:"manifestUpdate",value:null}},nullRepresentation:function(e,t){return{type:"representationChange",value:{type:e,representation:null,period:t}}},reloadingMediaSource:function(){return{type:"reloading-media-source",value:void 0}},speedChanged:function(e){return{type:"speedChanged",value:e}},stalled:function(e){return{type:"stalled",value:e}},warning:function(e){return{type:"warning",value:e}}};t.a=r},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return u});var i=n(9),r=n(0),a=n(14),o=function(){function e(){this._listeners={}}var t=e.prototype;return t.addEventListener=function(e,t){var n=this._listeners[e];Array.isArray(n)?n.push(t):this._listeners[e]=[t]},t.removeEventListener=function(e,t){if(Object(a.a)(e))this._listeners={};else{var n=this._listeners[e];if(Array.isArray(n))if(Object(a.a)(t))delete this._listeners[e];else{var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length&&delete this._listeners[e]}}},t.trigger=function(e,t){var n=this._listeners[e];Array.isArray(n)&&n.slice().forEach(function(e){try{e(t)}catch(e){r.a.error(e,e instanceof Error?e.stack:null)}})},e}();function u(n,r){return new i.a(function(t){function e(e){t.next(e)}return n.addEventListener(r,e),function(){n.removeEventListener(r,e)}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(4),i=n(8);function a(t,n){return function(e){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return e.lift(new o(t,n))}}var o=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.thisArg))},e}(),u=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.project=t,r.count=0,r.thisArg=n||r,r}return r.a(e,i),e.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(i.a)},function(e,t,n){"use strict";t.a=function(){}},function(e,t,n){"use strict";var r=n(165),i=n.n(r);t.a="function"==typeof Promise?Promise:i.a},function(e,t,n){"use strict";var g=n(11),y=n(13),_=n(2);function a(e,t,n){if("function"==typeof String.prototype.startsWith)return e.startsWith(t,n);var r="number"==typeof n?Math.max(n,0):0;return e.substring(r,r+t.length)===t}function r(e,t,p,h){for(var v={},b=e.slice(),n=0;n<=t.length-1;n++){var m=t[n];if(void 0!==m){var r=function(){var t=void 0,n=void 0;if(m.nodeType===Node.ELEMENT_NODE)for(var e=m,r=0;r<=e.attributes.length-1;r++){var i=e.attributes[r],a=i.name;if("style"===a)t=i.value;else if("region"===a)n=i.value;else{var o=a.substring(4);if(Object(y.a)(b,o)&&(v[o]=i.value,b.splice(r,1),0===b.length))return{v:v}}}if(Object(_.a)(t)){var u=Object(g.a)(p,function(e){return e.id===t});if(void 0!==u)for(var s=0;s<=b.length-1;s++){var c=b[s];if(!Object(_.a)(v[c])&&Object(_.a)(u.style[c])){if(v[c]=u.style[c],b.splice(s,1),0===b.length)return{v:v};s--}}}if(Object(_.a)(n)){var l=Object(g.a)(h,function(e){return e.id===n});if(void 0!==l)for(var f=0;f<=b.length-1;f++){var d=b[f];if(!Object(_.a)(v[d])&&Object(_.a)(l.style[d])){if(v[d]=l.style[d],b.splice(f,1),0===b.length)return{v:v};f--}}}}();if("object"==typeof r)return r.v}}return v}function i(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};for(var t=e,n={},r=0;r<=t.attributes.length-1;r++){var i=t.attributes[r];if(a(i.name,"tts"))n[i.name.substring(4)]=i.value}return n}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i})},function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=n(212),i=n(14);function a(e,t){if(!e)throw new r.a(void 0===t?"invalid assertion":t)}function o(e,t,n){for(var r in void 0===n&&(n="object"),a(!Object(i.a)(e),n+" should be an object"),t)t.hasOwnProperty(r)&&a(typeof e[r]===t[r],n+" should have property "+r+" as a "+t[r])}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(63);function i(e,t){try{return e(t)}catch(e){return Object(r.a)(e)}}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a});var r={NETWORK_ERROR:"NETWORK_ERROR",MEDIA_ERROR:"MEDIA_ERROR",ENCRYPTED_MEDIA_ERROR:"ENCRYPTED_MEDIA_ERROR",OTHER_ERROR:"OTHER_ERROR"},i={TIMEOUT:"TIMEOUT",ERROR_EVENT:"ERROR_EVENT",ERROR_HTTP_CODE:"ERROR_HTTP_CODE",PARSE_ERROR:"PARSE_ERROR"},a={PIPELINE_LOAD_ERROR:"PIPELINE_LOAD_ERROR",PIPELINE_PARSE_ERROR:"PIPELINE_PARSE_ERROR",INTEGRITY_ERROR:"INTEGRITY_ERROR",MANIFEST_PARSE_ERROR:"MANIFEST_PARSE_ERROR",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"MANIFEST_INCOMPATIBLE_CODECS_ERROR",MANIFEST_UNSUPPORTED_ADAPTATION_TYPE:"MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",MEDIA_STARTING_TIME_NOT_FOUND:"MEDIA_STARTING_TIME_NOT_FOUND",MEDIA_TIME_BEFORE_MANIFEST:"MEDIA_TIME_BEFORE_MANIFEST",MEDIA_TIME_AFTER_MANIFEST:"MEDIA_TIME_AFTER_MANIFEST",MEDIA_TIME_NOT_FOUND:"MEDIA_TIME_NOT_FOUND",NO_PLAYABLE_REPRESENTATION:"NO_PLAYABLE_REPRESENTATION",MEDIA_IS_ENCRYPTED_ERROR:"MEDIA_IS_ENCRYPTED_ERROR",CREATE_MEDIA_KEYS_ERROR:"CREATE_MEDIA_KEYS_ERROR",KEY_ERROR:"KEY_ERROR",KEY_STATUS_CHANGE_ERROR:"KEY_STATUS_CHANGE_ERROR",KEY_UPDATE_ERROR:"KEY_UPDATE_ERROR",KEY_LOAD_ERROR:"KEY_LOAD_ERROR",KEY_LOAD_TIMEOUT:"KEY_LOAD_TIMEOUT",KEY_GENERATE_REQUEST_ERROR:"KEY_GENERATE_REQUEST_ERROR",INCOMPATIBLE_KEYSYSTEMS:"INCOMPATIBLE_KEYSYSTEMS",INVALID_ENCRYPTED_EVENT:"INVALID_ENCRYPTED_EVENT",INVALID_KEY_SYSTEM:"INVALID_KEY_SYSTEM",LICENSE_SERVER_CERTIFICATE_ERROR:"LICENSE_SERVER_CERTIFICATE_ERROR",MULTIPLE_SESSIONS_SAME_INIT_DATA:"MULTIPLE_SESSIONS_SAME_INIT_DATA",BUFFER_APPEND_ERROR:"BUFFER_APPEND_ERROR",BUFFER_FULL_ERROR:"BUFFER_FULL_ERROR",BUFFER_TYPE_UNKNOWN:"BUFFER_TYPE_UNKNOWN",MEDIA_ERR_BLOCKED_AUTOPLAY:"MEDIA_ERR_BLOCKED_AUTOPLAY",MEDIA_ERR_PLAY_NOT_ALLOWED:"MEDIA_ERR_PLAY_NOT_ALLOWED",MEDIA_ERR_NOT_LOADED_METADATA:"MEDIA_ERR_NOT_LOADED_METADATA",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_UNKNOWN:"MEDIA_ERR_UNKNOWN",MEDIA_SOURCE_NOT_SUPPORTED:"MEDIA_SOURCE_NOT_SUPPORTED",MEDIA_KEYS_NOT_SUPPORTED:"MEDIA_KEYS_NOT_SUPPORTED",NONE:"NONE"}},function(e,t,n){"use strict";function r(e){for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e[n],t&=t;return t}n.d(t,"a",function(){return r})},,function(e,t,n){"use strict";var r=new WeakMap;t.a={setState:function(e,t){r.set(e,t)},getState:function(e){var t=r.get(e);return null==t?null:t},clearState:function(e){r.set(e,null)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var i=/^(?:[a-z]+:)?\/\//i,a=/\/\.{1,2}\//;function r(){var e=arguments.length;if(0===e)return"";for(var t="",n=0;n<e;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];"string"==typeof r&&""!==r&&(t=i.test(r)?r:("/"===r[0]&&(r=r.substring(1)),"/"===t[t.length-1]&&(t=t.substring(0,t.length-1)),t+"/"+r))}return function(e){if(!a.test(e))return e;for(var t=[],n=e.split("/"),r=0,i=n.length;r<i;r++)if(".."===n[r])t.pop();else{if("."===n[r])continue;t.push(n[r])}return t.join("/")}(t)}function o(e){var t=e.lastIndexOf("/");return 0<=t?e.substring(0,t+1):e}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(81),i=new(n(80).a)(r.a)},function(e,t,n){"use strict";n.d(t,"b",function(){return l}),n.d(t,"a",function(){return f});var i=n(4),r=n(9),a=n(8),o=n(20),u=n(55),s=n(100),c=n(70),l=function(n){function e(e){var t=n.call(this,e)||this;return t.destination=e,t}return i.a(e,n),e}(a.a),f=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i.a(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},e.prototype.next=function(e){if(this.closed)throw new u.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},e.prototype.error=function(e){if(this.closed)throw new u.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new u.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new u.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(e){if(this.closed)throw new u.a;return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.isStopped?(e.complete(),o.a.EMPTY):(this.observers.push(e),new s.a(this,e))},e.prototype.asObservable=function(){var e=new r.a;return e.source=this,e},e.create=function(e,t){return new d(e,t)},e}(r.a),d=function(r){function e(e,t){var n=r.call(this)||this;return n.destination=e,n.source=t,n}return i.a(e,r),e.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},e.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},e.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},e.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):o.a.EMPTY},e}(f)},function(e,t,n){"use strict";function r(e){var t=e[0],n=e[1];return n===1/0?"bytes="+t+"-":"bytes="+t+"-"+n}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(4),a=n(27),i=n(28),o=n(52),u=n(31),s=n(61);function c(t,i,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof i?function(e){return e.pipe(c(function(n,r){return Object(s.a)(t(n,r)).pipe(Object(u.a)(function(e,t){return i(n,e,r,t)}))},n))}:("number"==typeof i&&(n=i),function(e){return e.lift(new l(t,n))})}var l=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.project,this.concurrent))},e}(),f=function(i){function e(e,t,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var r=i.call(this,e)||this;return r.project=t,r.concurrent=n,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return r.a(e,i),e.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},e.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){var r=new o.a(this,void 0,void 0);this.destination.add(r),Object(a.a)(this,e,t,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},e.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(i.a)},function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.r(t);var a=n(210),r=n(9),i=n(46),o=new r.a(i.a);var u=n(83),s=n(74),c=n(26),l=n(219),f=n(211),d=n(31),p=n(171),h=n(140),v=n(128),b=n(4),m=n(43),g=n(99),y=n(8),_=n(73);function O(e,t){void 0===t&&(t=m.a);var n=Object(g.a)(e)?e-t.now():Math.abs(e);return function(e){return e.lift(new E(n,t))}}var E=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new w(e,this.delay,this.scheduler))},e}(),w=function(i){function t(e,t,n){var r=i.call(this,e)||this;return r.delay=t,r.scheduler=n,r.queue=[],r.active=!1,r.errored=!1,r}return b.a(t,i),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;0<n.length&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(0<n.length){var a=Math.max(0,n[0].time-r.now());this.schedule(e,a)}else this.unsubscribe(),t.active=!1},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler,n=new j(t.now()+this.delay,e);this.queue.push(n),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(_.a.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(_.a.createComplete()),this.unsubscribe()},t}(y.a),j=function(){return function(e,t){this.time=e,this.notification=t}}(),T=n(172),S=n(28),A=n(27),x={leading:!0,trailing:!1};S.a;var k=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new R(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),R=function(o){function e(e,t,n,r,i){var a=o.call(this,e)||this;return a.duration=t,a.scheduler=n,a.leading=r,a.trailing=i,a._hasTrailingValue=!1,a._trailingValue=null,a}return b.a(e,o),e.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(I,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},e.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},e.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},e}(y.a);function I(e){e.subscriber.clearThrottle()}var M=n(3),N=n(2),C=n(25);n.d(t,"onPictureInPictureEvent$",function(){return W}),n.d(t,"isActive",function(){return $}),n.d(t,"isVideoVisible",function(){return V}),n.d(t,"videoWidth$",function(){return H}),n.d(t,"onPlayPause$",function(){return Z}),n.d(t,"onTextTrackChanges$",function(){return J}),n.d(t,"onLoadedMetadata$",function(){return K}),n.d(t,"onSeeking$",function(){return Y}),n.d(t,"onSeeked$",function(){return G}),n.d(t,"onEnded$",function(){return q}),n.d(t,"onTimeUpdate$",function(){return X}),n.d(t,"onFullscreenChange$",function(){return Q}),n.d(t,"onSourceOpen$",function(){return ee}),n.d(t,"onUpdate$",function(){return te}),n.d(t,"onRemoveSourceBuffers$",function(){return ne}),n.d(t,"onEncrypted$",function(){return re}),n.d(t,"onKeyMessage$",function(){return ie}),n.d(t,"onKeyAdded$",function(){return ae}),n.d(t,"onKeyError$",function(){return oe}),n.d(t,"onKeyStatusesChange$",function(){return ue});var D=["","webkit","moz","ms"],P=M.a.INACTIVITY_DELAY,B=null==window.devicePixelRatio||0===window.devicePixelRatio?1:window.devicePixelRatio;function L(a,e){return e.filter(function(e){return t=a,n=e,r=document.createElement(t.tagName),(i="on"+n)in r||(r.setAttribute(i,"return;"),"function"==typeof r[i]);var t,n,r,i})[0]}function U(e,t){var n,r,i=(r=t,e.reduce(function(e,t){return e.concat((null==r?D:r).map(function(e){return e+t}))},[]));return function(t){return t instanceof C.a?(void 0===n&&(n=L(t,i)),Object(N.a)(n)?Object(a.a)(t,n):o):u.a.apply(void 0,i.map(function(e){return Object(a.a)(t,e)}))}}function F(){var e,t=document;null!=t.hidden?e="":null!=t.mozHidden?e="moz":null!=t.msHidden?e="ms":null!=t.webkitHidden&&(e="webkit");var n=Object(N.a)(e)?e+"Hidden":"hidden",r=Object(N.a)(e)?e+"visibilitychange":"visibilitychange";return Object(s.a)(function(){var e=document[n];return Object(a.a)(document,r).pipe(Object(d.a)(function(){return!document[n]}),Object(p.a)(!e),Object(h.a)())})}function $(){return F().pipe(Object(v.a)(function(e){return e?Object(c.a)(e):Object(c.a)(e).pipe(O(P))}))}function z(e,t){var n=t.width,r=t.height/(e.clientHeight/e.clientWidth);return Math.min(n,r)}function W(n){return Object(s.a)(function(){if(n.webkitSupportsPresentationMode&&"function"==typeof n.webkitSetPresentationMode){var e="picture-in-picture"===n.webkitPresentationMode;return Object(a.a)(n,"webkitpresentationmodechanged").pipe(Object(d.a)(function(){return{isEnabled:"picture-in-picture"===n.webkitPresentationMode,pipWindow:null}}),Object(p.a)({isEnabled:e,pipWindow:null}))}var t={isEnabled:document.pictureInPictureElement&&document.pictureInPictureElement===n,pipWindow:null};return Object(u.a)(Object(a.a)(n,"enterpictureinpicture").pipe(Object(d.a)(function(e){return{isEnabled:!0,pipWindow:e.pictureInPictureWindow}})),Object(a.a)(n,"leavepictureinpicture").pipe(Object(T.a)({isEnabled:!1,pipWindow:null}))).pipe(Object(p.a)(t))})}function V(e){return Object(l.a)([F(),e]).pipe(Object(v.a)(function(e){var t=e[0];return e[1].isEnabled||t?Object(c.a)(!0):Object(c.a)(!1).pipe(O(P))}),Object(h.a)())}function H(i,e){return Object(l.a)([e,Object(f.a)(2e4).pipe(Object(p.a)(null)),Object(a.a)(window,"resize").pipe((t=500,void 0===n&&(n=m.a),void 0===r&&(r=x),function(e){return e.lift(new k(t,n,r.leading,r.trailing))}),Object(p.a)(null))]).pipe(Object(v.a)(function(e){var t=e[0];if(t.isEnabled){if(null==t.pipWindow)return Object(c.a)(1/0);var n=t.pipWindow,r=z(i,n);return Object(a.a)(n,"resize").pipe(Object(p.a)(r*B),Object(d.a)(function(){return z(i,n)*B}))}return Object(c.a)(i.clientWidth*B)}),Object(h.a)());var t,n,r}var K=U(["loadedmetadata"]),Y=U(["seeking"]),G=U(["seeked"]),q=U(["ended"]),X=U(["timeupdate"]),Q=U(["fullscreenchange","FullscreenChange"],D.concat("MS")),Z=function(e){return Object(u.a)(U(["play"])(e),U(["pause"])(e))},J=function(e){return Object(u.a)(U(["addtrack"])(e),U(["removetrack"])(e))},ee=U(["sourceopen","webkitsourceopen"]),te=U(["update"]),ne=U(["onremovesourcebuffer"]),re=U(["encrypted","needkey"]),ie=U(["keymessage","message"]),ae=U(["keyadded","ready"]),oe=U(["keyerror","error"]),ue=U(["keystatuseschange"])},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(4),i=function(i){function e(e,t,n){var r=i.call(this)||this;return r.parent=e,r.outerValue=t,r.outerIndex=n,r.index=0,r}return r.a(e,i),e.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},e.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(n(8).a)},function(e,t,n){"use strict";function r(){var e=0;return function(){return String(e++)}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var r=n(9),i=new r.a(function(e){return e.complete()});function a(e){return e?(t=e,new r.a(function(e){return t.schedule(function(){return e.complete()})})):i;var t}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o});var s=n(1);function r(e,t){var n=a(e,t);return null!=n?e.subarray(n[0]+8,n[1]):null}function i(e,t){var n=a(e,t);return null!=n?e.subarray(n[0],n[1]):null}function a(e,t){for(var n,r=e.length,i=0,a=0;i+8<r;){if(a=Object(s.d)(e,i),n=Object(s.d)(e,i+4),a<=0)throw new Error("ISOBMFF: Size out of range");if(n===t)break;i+=a}return i<r?[i,i+a]:null}function o(e,t,n,r,i){for(var a,o=e.length,u=0;u<o;u+=a)if(a=Object(s.d)(e,u),1970628964===Object(s.d)(e,u+4)&&Object(s.d)(e,u+8)===t&&Object(s.d)(e,u+12)===n&&Object(s.d)(e,u+16)===r&&Object(s.d)(e,u+20)===i)return e.subarray(u+24,u+a)}},function(e,t,n){"use strict";function r(e){return e.getElementsByTagName("body")[0]}function i(e){return e.getElementsByTagName("style")}function a(e){return e.getElementsByTagName("region")}function o(e){return e.getElementsByTagName("p")}n.d(t,"a",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return a}),n.d(t,"d",function(){return o})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(37),o=n(64);function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(r){var e,t;function i(e,t){var n;return n=r.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),i.prototype),n.name="MediaError",n.type=a.b.MEDIA_ERROR,n.code=e,n.message=Object(o.a)(n.name,n.code,t),n.fatal=!1,n}return t=r,(e=i).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,i}(i(Error))},function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"a",function(){return o});var r=n(2);function i(e){for(var t=0;t<e.length;){if(""===e[t])return t+1;t++}return t}function s(e,t){return"string"==typeof e[t]&&/^STYLE( .*)?$/g.test(e[t])&&(void 0===e[t+1]||e[t+1].indexOf("--\x3e")<0)}function a(e,t){var n,r,i,a,o=e[t];if(void 0===o||""===o||s(e,t)||"string"==typeof(i=e)[a=t]&&/^REGION( .*)?$/g.test(i[a])&&(void 0===i[a+1]||i[a+1].indexOf("--\x3e")<0)||"string"==typeof(n=e)[r=t]&&/^NOTE( .*)?$/g.test(n[r])&&(void 0===n[r+1]||n[r+1].indexOf("--\x3e")<0))return!1;if(0<=o.indexOf("--\x3e"))return!0;var u=e[t+1];return void 0!==u&&0<=u.indexOf("--\x3e")}function o(e,t){for(var n=t+1;Object(r.a)(e[n]);)n++;return n}},function(e,t,n){"use strict";var s=n(9),r=n(121),c=n(20),l=n(51);var f=n(75),d=n(65);var p=n(98),h=n(96);function i(e,t){if(null!=e){if((u=e)&&"function"==typeof u[l.a])return a=e,o=t,new s.a(function(t){var n=new c.a;return n.add(o.schedule(function(){var e=a[l.a]();n.add(e.subscribe({next:function(e){n.add(o.schedule(function(){return t.next(e)}))},error:function(e){n.add(o.schedule(function(){return t.error(e)}))},complete:function(){n.add(o.schedule(function(){return t.complete()}))}}))})),n});if(Object(p.a)(e))return r=e,i=t,new s.a(function(t){var n=new c.a;return n.add(i.schedule(function(){return r.then(function(e){n.add(i.schedule(function(){t.next(e),n.add(i.schedule(function(){return t.complete()}))}))},function(e){n.add(i.schedule(function(){return t.error(e)}))})})),n});if(Object(h.a)(e))return Object(f.a)(e,t);if((n=e)&&"function"==typeof n[d.a]||"string"==typeof e)return function(t,n){if(!t)throw new Error("Iterable cannot be null");return new s.a(function(r){var i,e=new c.a;return e.add(function(){i&&"function"==typeof i.return&&i.return()}),e.add(n.schedule(function(){i=t[d.a](),e.add(n.schedule(function(){if(!r.closed){var e,t;try{var n=i.next();e=n.value,t=n.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}}))})),e})}(e,t)}var n,r,i,a,o,u;throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function a(e,t){return t?i(e,t):e instanceof s.a?e:new s.a(Object(r.a)(e))}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(9);function i(t,n){return n?new r.a(function(e){return n.schedule(a,0,{error:t,subscriber:e})}):new r.a(function(e){return e.error(t)})}function a(e){var t=e.error;e.subscriber.error(t)}},function(e,t,n){"use strict";function r(e,t,n){return e+" ("+t+") "+n}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",function(){return i});var i=r()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(9),i=n(97),a=n(75);function o(e,t){return t?Object(a.a)(e,t):new r.a(Object(i.a)(e))}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(37),o=n(64);function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(r){var e,t;function i(e,t){var n;return n=r.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),i.prototype),n.name="OtherError",n.type=a.b.OTHER_ERROR,n.code=e,n.message=Object(o.a)(n.name,n.code,t),n.fatal=!1,n}return t=r,(e=i).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,i}(i(Error))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1);function r(e,t){for(var n=e.length,r=0;r+8<n;){var i=Object(a.d)(e,r);if(i<=0)return-1;if(Object(a.d)(e,r+4)===t)return r+i<=n?r:-1;r+=i}return-1}},function(e,t,n){"use strict";var a,r;a=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},r=function(e){var t,n,r=document.createTextNode(""),i=0;return new e(function(){var e;if(t)n&&(t=n.concat(t));else{if(!n)return;t=n}if(n=t,t=null,"function"==typeof n)return e=n,n=null,void e();for(r.data=i=++i%2;n;)e=n.shift(),n.length||(n=null),e()}).observe(r,{characterData:!0}),function(e){a(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,r.data=i=++i%2)}},e.exports=function(){if("object"==typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return r(MutationObserver);if("function"==typeof WebKitMutationObserver)return r(WebKitMutationObserver)}return"function"==typeof setImmediate?function(e){setImmediate(a(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(a(e),0)}:null}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(50);function i(e){return!Object(r.a)(e)&&0<=e-parseFloat(e)+1}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(67),i=n(68);function a(e,t){if(t){if(Object(i.a)(e,1718909296)<0)throw new r.a("INTEGRITY_ERROR","Incomplete `ftyp` box");if(Object(i.a)(e,1836019574)<0)throw new r.a("INTEGRITY_ERROR","Incomplete `moov` box")}else{if(Object(i.a)(e,1836019558)<0)throw new r.a("INTEGRITY_ERROR","Incomplete `moof` box");if(Object(i.a)(e,1835295092)<0)throw new r.a("INTEGRITY_ERROR","Incomplete `mdat` box")}}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(54),i=n(26),a=n(63);var o=function(){function t(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return t.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},t.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},t.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(a.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(9),i=n(61),a=n(54);function o(n){return new r.a(function(t){var e;try{e=n()}catch(e){return void t.error(e)}return(e?Object(i.a)(e):Object(a.b)()).subscribe(t)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(9),o=n(20);function r(r,i){return new a.a(function(e){var t=new o.a,n=0;return t.add(i.schedule(function(){n!==r.length?(e.next(r[n++]),e.closed||t.add(this.schedule())):e.complete()})),t})}},function(e,t,n){"use strict";var r=n(92);t.a=r.a},function(e,t,n){"use strict";t.a="function"==typeof Object.values?Object.values:function(t){return Object.keys(t).map(function(e){return t[e]})}},function(e,t,n){"use strict";function r(e,i){if(!(e.parentNode instanceof Element))return[];return function e(t){var n=[];t.tagName.toLowerCase()===i.toLowerCase()&&n.push(t);var r=t.parentNode;return r instanceof Element&&n.push.apply(n,e(r)),n}(e.parentNode)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(69),a=n.n(r),o=n(26),i=n(30),u=n(36),s=n(19),c=function(){function e(){this._ranges=[],this.length=0}var t=e.prototype;return t.insert=function(e,t){Object(s.i)(this._ranges,{start:e,end:t}),this.length=this._ranges.length},t.remove=function(e,t){var n=[];0<e&&n.push({start:0,end:e}),t<1/0&&n.push({start:t,end:1/0}),this._ranges=Object(s.l)(this._ranges,n),this.length=this._ranges.length},t.start=function(e){if(e>=this._ranges.length)throw new Error("INDEX_SIZE_ERROR");return this._ranges[e].start},t.end=function(e){if(e>=this._ranges.length)throw new Error("INDEX_SIZE_ERROR");return this._ranges[e].end},e}();n.d(t,"a",function(){return l});var l=function(t){var e,n;function r(){var e;return(e=t.call(this)||this).updating=!1,e.readyState="opened",e.buffered=new c,e.timestampOffset=0,e.appendWindowStart=0,e.appendWindowEnd=1/0,e}n=t,(e=r).prototype=Object.create(n.prototype),(e.prototype.constructor=e).__proto__=n;var i=r.prototype;return i.appendBuffer=function(e){var t=this;this._lock(function(){return t._append(e)})},i.remove=function(e,t){var n=this;this._lock(function(){return n._remove(e,t)})},i.abort=function(){this.updating=!1,this.readyState="closed",this._abort()},i._lock=function(e){var t=this;if(this.updating)throw new Error("SourceBuffer: SourceBuffer already updating.");this.updating=!0,this.trigger("updatestart",void 0),Object(u.a)(function(){return e(),Object(o.a)(void 0)},void 0).subscribe(function(){return a()(function(){t.updating=!1,t.trigger("update",void 0),t.trigger("updateend",void 0)})},function(e){return a()(function(){t.updating=!1,t.trigger("error",e),t.trigger("updateend",void 0)})})},r}(i.a)},function(e,t,n){"use strict";var a=n(4),o=function(){function n(e,t){void 0===t&&(t=n.now),this.SchedulerAction=e,this.now=t}return n.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},n.now=function(){return Date.now()},n}();n.d(t,"a",function(){return r});var r=function(r){function i(e,t){void 0===t&&(t=o.now);var n=r.call(this,e,function(){return i.delegate&&i.delegate!==n?i.delegate.now():t()})||this;return n.actions=[],n.active=!1,n.scheduled=void 0,n}return a.a(i,r),i.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):r.prototype.schedule.call(this,e,t,n)},i.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},i}(o)},function(e,t,n){"use strict";var i=n(4),r=function(n){function e(e,t){return n.call(this)||this}return i.a(e,n),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},e}(n(20).a);n.d(t,"a",function(){return a});var a=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n.pending=!1,n}return i.a(e,r),e.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},e.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},e.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},e}(r)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(42),i=n(62),a={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(9),o=n(48),u=n(95),s=n(66);function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return Object(o.a)(i)?(r=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof a.a?e[0]:Object(u.a)(n)(Object(s.a)(e,r))}},function(e,t,n){"use strict";n.d(t,"b",function(){return o});var r=n(9),i=n(3),h=n(131),v=n(37),b=n(0),m=n(14),s=i.a.DEFAULT_REQUEST_TIMEOUT,a="function"==typeof Headers?Headers:null,c="function"==typeof AbortController?AbortController:null;function o(){return"function"==typeof window.fetch&&!Object(m.a)(c)&&!Object(m.a)(a)}t.a=function(o){var u;if(!Object(m.a)(o.headers))if(Object(m.a)(a))u=o.headers;else{u=new a;for(var e=Object.keys(o.headers),t=0;t<e.length;t++){var n=e[t];u.append(n,o.headers[n])}}return new r.a(function(f){b.a.debug("Fetch: Called with URL",o.url);var t=!1,n=!1,d=!1,p=performance.now(),e=Object(m.a)(c)?null:new c;function r(){if(!d){if(!Object(m.a)(e))return e.abort();b.a.warn("Fetch: AbortController API not available.")}}var i=Object(m.a)(o.timeout)?s:o.timeout,a=window.setTimeout(function(){n=!0,r()},i);return fetch(o.url,{headers:u,method:"GET",signal:Object(m.a)(e)?void 0:e.signal}).then(function(u){if(Object(m.a)(a)||clearTimeout(a),300<=u.status)return b.a.warn("Fetch: Request HTTP Error",u),void f.error(new h.a(u.url,u.status,v.c.ERROR_HTTP_CODE));if(!Object(m.a)(u.body)){var e=u.headers.get("Content-Length"),s=Object(m.a)(e)||isNaN(+e)?void 0:+e,c=u.body.getReader(),l=0;return function t(){var n,r,i,a,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(c.read());case 2:if((n=e.sent).done||Object(m.a)(n.value)){e.next=11;break}return l+=n.value.byteLength,r=performance.now(),i={type:"data-chunk",value:{url:u.url,currentTime:r,duration:r-p,sendingTime:p,chunkSize:n.value.byteLength,chunk:n.value.buffer,size:l,totalSize:s}},f.next(i),e.abrupt("return",t());case 11:n.done&&(a=performance.now(),o=a-p,d=!0,f.next({type:"data-complete",value:{duration:o,receivedTime:a,sendingTime:p,size:l,status:u.status,url:u.url}}),f.complete());case 12:case"end":return e.stop()}})}()}f.error(new h.a(u.url,u.status,v.c.PARSE_ERROR))}).catch(function(e){if(t)b.a.debug("Fetch: Request aborted.");else{if(n)return b.a.warn("Fetch: Request timeouted."),void f.error(new h.a(o.url,0,v.c.TIMEOUT));b.a.warn("Fetch: Request Error",e instanceof Error?e.toString():""),f.error(new h.a(o.url,0,v.c.ERROR_EVENT))}}),function(){t=!0,r()}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(0),o=n(24);function r(e){if(o.a){for(var t=e.textTracks,n=0;n<t.length;n++)t[n].mode="disabled";if(e.hasChildNodes())for(var r=e.childNodes,i=r.length-1;0<=i;i--)if("track"===r[i].nodeName)try{e.removeChild(r[i])}catch(e){a.a.warn("Compat: Could not remove text track child from element.")}}e.src="",e.removeAttribute("src")}},function(e,t,n){"use strict";var c=n(11),u=n(1),r=n(30),i=n(53),a=n(23),l=n(58),f=n(0),d=n(13),p=n(76);var o="function"==typeof window.Set?function(e){return Array.from(new Set(e))}:function(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})},s=n(148);function h(e,t){return"audio"===e||"video"===e?t.filter(function(e){return Object(s.a)((n=(t=e).codecs,r=void 0===n?"":n,(void 0===(i=t.mimeType)?"":i)+';codecs="'+r+'"'));var t,n,r,i}):t}var v=function(){function e(e){this.id=e.id,this.bitrate=e.bitrate,this.codec=e.codecs,null!=e.height&&(this.height=e.height),null!=e.width&&(this.width=e.width),null!=e.mimeType&&(this.mimeType=e.mimeType),void 0!==e.contentProtections&&(this.contentProtections=e.contentProtections),null!=e.frameRate&&(this.frameRate=e.frameRate),this.index=e.index}var t=e.prototype;return t.getMimeTypeString=function(){return this.mimeType+';codecs="'+this.codec+'"'},t.getProtectionsInitializationData=function(){var i=this.contentProtections;return void 0===i?[]:Object.keys(i.initData).reduce(function(e,t){var n=i.initData[t];if(void 0===n||0===n.length)return e;var r=u.i.apply(void 0,n.map(function(e){return e.data}));return e.push({type:t,data:r}),e},[])},t._addProtectionData=function(e,t,n){var r={systemId:t,data:n};if(void 0!==this.contentProtections){var i=this.contentProtections.initData[e];if(void 0!==i){for(var a=i.length-1;0<=a;a--)if(i[a].systemId===t){if(Object(u.a)(i[a].data,n))return;f.a.warn("Manifest: Two PSSH for the same system ID")}i.push(r)}else this.contentProtections.initData[e]=[r]}else{var o;this.contentProtections={keyIds:[],initData:((o={})[e]=[r],o)}}},e}(),b=["audio","video","text","image"];var m=function(){function e(e,t){var n=this;void 0===t&&(t={});var r,i=t.representationFilter,a=t.isManuallyAdded;if(this.parsingErrors=[],this.id=e.id,r=e.type,!Object(d.a)(b,r))throw f.a.info("Manifest: Not supported adaptation type",e.type),new l.a("MANIFEST_UNSUPPORTED_ADAPTATION_TYPE",'"'+e.type+'" is not a valid Adaptation type.');this.type=e.type;var o=0!==e.representations.length,u=h(e.type,e.representations);if(o&&0===u.length){f.a.warn("Incompatible codecs for adaptation",e);var s=new l.a("MANIFEST_INCOMPATIBLE_CODECS_ERROR","An Adaptation contains only incompatible codecs.");this.parsingErrors.push(s)}void 0!==e.language&&(this.language=e.language,this.normalizedLanguage=Object(p.a)(e.language)),void 0!==e.closedCaption&&(this.isClosedCaption=e.closedCaption),void 0!==e.audioDescription&&(this.isAudioDescription=e.audioDescription),void 0!==e.isDub&&(this.isDub=e.isDub),this.representations=u.map(function(e){return new v(e)}).sort(function(e,t){return e.bitrate-t.bitrate}).filter(function(e){return null==i||i(e,{bufferType:n.type,language:n.language,normalizedLanguage:n.normalizedLanguage,isClosedCaption:n.isClosedCaption,isDub:n.isDub,isAudioDescription:n.isAudioDescription})}),this.manuallyAdded=!0===a}var t=e.prototype;return t.getAvailableBitrates=function(){for(var e=[],t=0;t<this.representations.length;t++){var n=this.representations[t];!1!==n.decipherable&&e.push(n.bitrate)}return o(e)},t.getRepresentation=function(n){return Object(c.a)(this.representations,function(e){var t=e.id;return n===t})},e}(),g=n(168),y=n(77),_=function(){function e(i,a){var o=this;if(this.parsingErrors=[],this.id=i.id,this.adaptations=Object.keys(i.adaptations).reduce(function(e,t){var n=i.adaptations[t];if(null==n)return e;var r=n.map(function(e){var t,n=null;try{n=new m(e,{representationFilter:a})}catch(e){if(Object(g.a)(e)&&"MANIFEST_UNSUPPORTED_ADAPTATION_TYPE"===e.code)return o.parsingErrors.push(e),null;throw e}return(t=o.parsingErrors).push.apply(t,n.parsingErrors),n}).filter(function(e){return null!=e&&0<e.representations.length});if(0===r.length&&0<n.length&&("video"===t||"audio"===t))throw new l.a("MANIFEST_PARSE_ERROR","No supported "+t+" adaptations");return 0<r.length&&(e[t]=r),e},{}),!Array.isArray(this.adaptations.video)&&!Array.isArray(this.adaptations.audio))throw new l.a("MANIFEST_PARSE_ERROR","No supported audio and video tracks.");this.duration=i.duration,this.start=i.start,null!=this.duration&&null!=this.start&&(this.end=this.start+this.duration)}var t=e.prototype;return t.getAdaptations=function(){var e=this.adaptations;return Object(y.a)(e).reduce(function(e,t){return null!=t?e.concat(t):e},[])},t.getAdaptationsForType=function(e){var t=this.adaptations[e];return null==t?[]:t},t.getAdaptation=function(n){return Object(c.a)(this.getAdaptations(),function(e){var t=e.id;return n===t})},e}(),O=function(){function e(e){this._mediaURL=e.media}var t=e.prototype;return t.getInitSegment=function(){return null},t.getSegments=function(){return[{id:"0",isInit:!1,number:0,time:0,duration:Number.MAX_VALUE,timescale:1,mediaURL:this._mediaURL}]},t.getFirstPosition=function(){},t.getLastPosition=function(){},t.shouldRefresh=function(){return!1},t.checkDiscontinuity=function(){return-1},t.isSegmentStillAvailable=function(){return!0},t.canBeOutOfSyncError=function(){return!1},t.isFinished=function(){return!0},t._addSegments=function(){f.a.warn("Tried add Segments to a static RepresentationIndex")},t._update=function(){f.a.warn("Tried to update a static RepresentationIndex")},e}();function E(e,t){e.start=t.start,e.end=t.end,e.duration=t.duration;for(var u=e.getAdaptations(),s=t.getAdaptations(),n=function(e){var t=u[e],n=Object(c.a)(s,function(e){return e.id===t.id});if(void 0===n)f.a.warn('Manifest: Adaptation "'+u[e].id+'" not found when merging.');else for(var r=u[e].representations,i=n.representations,a=function(e){var t=r[e],n=Object(c.a)(i,function(e){return e.id===t.id});void 0===n?f.a.warn('Manifest: Representation "'+r[e].id+'" not found when merging.'):t.index._update(n.index)},o=0;o<r.length;o++)a(o)},r=0;r<u.length;r++)n(r)}var w=Object(i.a)(),j=function(s){var e,t;function n(e,t){var r;r=s.call(this)||this;var n=t.supplementaryTextTracks,i=void 0===n?[]:n,a=t.supplementaryImageTracks,o=void 0===a?[]:a,u=t.representationFilter;return r.parsingErrors=[],r.id=e.id,r.transport=e.transportType,r._clockOffset=e.clockOffset,r.periods=e.periods.map(function(e){var t,n=new _(e,u);return(t=r.parsingErrors).push.apply(t,n.parsingErrors),n}).sort(function(e,t){return e.start-t.start}),r.adaptations=null==r.periods[0]?{}:null==r.periods[0].adaptations?{}:r.periods[0].adaptations,r.minimumTime=e.minimumTime,r.isLive=e.isLive,r.uris=void 0===e.uris?[]:e.uris,r.lifetime=e.lifetime,r.suggestedPresentationDelay=e.suggestedPresentationDelay,r.availabilityStartTime=e.availabilityStartTime,r.maximumTime=e.maximumTime,r.baseURL=e.baseURL,0<o.length&&r.addSupplementaryImageAdaptations(o),0<i.length&&r.addSupplementaryTextAdaptations(i),r}t=s,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r.getPeriod=function(t){return Object(c.a)(this.periods,function(e){return t===e.id})},r.getPeriodForTime=function(t){return Object(c.a)(this.periods,function(e){return t>=e.start&&(null==e.end||e.end>t)})},r.getPeriodAfter=function(e){var t=e.end;if(null==t)return null;var n=Object(c.a)(this.periods,function(e){return null==e.end||t<e.end});return void 0===n?null:n},r.getUrl=function(){return this.uris[0]},r.getAdaptations=function(){Object(a.a)("manifest.getAdaptations() is deprecated. Please use manifest.period[].getAdaptations() instead");var e=this.periods[0];if(null==e)return[];var t=e.adaptations,n=[];for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];n.push.apply(n,i)}return n},r.getAdaptationsForType=function(e){Object(a.a)("manifest.getAdaptationsForType(type) is deprecated. Please use manifest.period[].getAdaptationsForType(type) instead");var t=this.periods[0];if(null==t)return[];var n=t.adaptations[e];return null==n?[]:n},r.getAdaptation=function(n){return Object(a.a)("manifest.getAdaptation(id) is deprecated. Please use manifest.period[].getAdaptation(id) instead"),Object(c.a)(this.getAdaptations(),function(e){var t=e.id;return n===t})},r.update=function(e){this.adaptations=e.adaptations,this.availabilityStartTime=e.availabilityStartTime,this.baseURL=e.baseURL,this.id=e.id,this.isLive=e.isLive,this.lifetime=e.lifetime,this.maximumTime=e.maximumTime,this.minimumTime=e.minimumTime,this.parsingErrors=e.parsingErrors,this.suggestedPresentationDelay=e.suggestedPresentationDelay,this.transport=e.transport,this.uris=e.uris,function(e,t){for(var n=0,r=0;r<t.length;r++){for(var i=t[r],a=n,o=e[a];null!=o&&o.id!==i.id;)o=e[++a];if(null!=o){E(o,i);var u=t.slice(n,r);e.splice.apply(e,[a,0].concat(u)),n=r+1}}if(n>e.length)f.a.error("Manifest: error when updating Periods");else{n<e.length&&e.splice(n,e.length-n);var s=t.slice(n,t.length);0<s.length&&e.push.apply(e,s)}}(this.periods,e.periods),this.trigger("manifestUpdate",null)},r.getMinimumPosition=function(){var e=this.minimumTime;if(null==e)return 0;if(!e.isContinuous)return e.value;var t=performance.now()-e.time;return e.value+t/1e3},r.getMaximumPosition=function(){var e=this.maximumTime;if(void 0===e){if(this.isLive){var t=void 0!==this.availabilityStartTime?this.availabilityStartTime:0;return null==this._clockOffset?Date.now()/1e3-t:(performance.now()+this._clockOffset)/1e3-t}return 1/0}if(!e.isContinuous)return e.value;var n=performance.now()-e.time;return e.value+n/1e3},r.getClockOffset=function(){return this._clockOffset},r.addUndecipherableKIDs=function(a){var e=T(this,function(e){if(!1===e.decipherable||null==e.contentProtections)return!0;for(var t=e.contentProtections.keyIds,n=0;n<t.length;n++)for(var r=t[n],i=0;i<a.length;i++)if(Object(u.l)(a[i],r.keyId))return!1;return!0});0<e.length&&this.trigger("decipherabilityUpdate",e)},r.addUndecipherableProtectionData=function(r,i){var e=T(this,function(e){if(!1===e.decipherable)return!0;for(var t=e.getProtectionsInitializationData(),n=0;n<t.length;n++)if(t[n].type===r&&Object(u.a)(i,t[n].data))return!1;return!0});0<e.length&&this.trigger("decipherabilityUpdate",e)},r.addSupplementaryImageAdaptations=function(e){var u=this,t=(Array.isArray(e)?e:[e]).map(function(e){var t,n=e.mimeType,r=e.url,i="gen-image-ada-"+w(),a="gen-image-rep-"+w(),o=new m({id:i,type:"image",representations:[{bitrate:0,id:a,mimeType:n,index:new O({media:r})}]},{isManuallyAdded:!0});return(t=u.parsingErrors).push.apply(t,o.parsingErrors),o});if(0<t.length&&0<this.periods.length){var n=this.periods[0].adaptations;n.image=null!=n.image?n.image.concat(t):t}},r.addSupplementaryTextAdaptations=function(e){var c=this,t=(Array.isArray(e)?e:[e]).reduce(function(e,t){var a=t.mimeType,o=t.codecs,u=t.url,n=t.language,r=t.languages,s=t.closedCaption,i=null!=n?[n]:null!=r?r:[];return e.concat(i.map(function(e){var t,n="gen-text-ada-"+w(),r="gen-text-rep-"+w(),i=new m({id:n,type:"text",language:e,closedCaption:s,representations:[{bitrate:0,id:r,mimeType:a,codecs:o,index:new O({media:u})}]},{isManuallyAdded:!0});return(t=c.parsingErrors).push.apply(t,i.parsingErrors),i}))},[]);if(0<t.length&&0<this.periods.length){var n=this.periods[0].adaptations;n.text=null!=n.text?n.text.concat(t):t}},n}(r.a);function T(e,t){for(var n=[],r=0;r<e.periods.length;r++)for(var i=e.periods[r],a=i.getAdaptations(),o=0;o<a.length;o++)for(var u=a[o],s=u.representations,c=0;c<s.length;c++){var l=s[c];t(l)||(n.push({manifest:e,period:i,adaptation:u,representation:l}),l.decipherable=!1)}return n}t.a=j},function(e,t,n){"use strict";function r(e,r){return"function"==typeof Array.prototype.flatMap?e.flatMap(r):e.reduce(function(e,t){var n=r(t);return Array.isArray(n)?[].concat(e,n):[].concat(e,[n])},[])}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var i=n(4),r=n(44),a=n(9),o=n(8),u=n(20),s=n(116),c=function(r){function e(e,t){var n=r.call(this)||this;return n.source=e,n.subjectFactory=t,n._refCount=0,n._isComplete=!1,n}return i.a(e,r),e.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},e.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new u.a).add(this.source.subscribe(new f(this.getSubject(),this))),e.closed&&(this._connection=null,e=u.a.EMPTY)),e},e.prototype.refCount=function(){return Object(s.a)()(this)},e}(a.a),l=function(){var e=c.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),f=function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return i.a(e,r),e.prototype._error=function(e){this._unsubscribe(),r.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),r.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},e}(r.b);o.a;function d(r,i){return function(e){var t;if(t="function"==typeof r?r:function(){return r},"function"==typeof i)return e.lift(new p(t,i));var n=Object.create(e,l);return n.source=e,n.subjectFactory=t,n}}n.d(t,"a",function(){return d});var p=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(37),o=n(64);function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(r){var e,t;function i(e,t){var n;return n=r.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),i.prototype),n.name="EncryptedMediaError",n.type=a.b.ENCRYPTED_MEDIA_ERROR,n.code=e,n.message=Object(o.a)(n.name,n.code,t),n.fatal=!1,n}return t=r,(e=i).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,i}(i(Error))},function(e,t,n){"use strict";var i=n(4),r=1,a={};var o=function(e){var t=r++;return a[t]=e,Promise.resolve().then(function(){var e;(e=a[t])&&e()}),t},u=function(e){delete a[e]},s=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n}return i.a(e,r),e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&0<n?r.prototype.requestAsyncId.call(this,e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=o(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay)return r.prototype.recycleAsyncId.call(this,e,t,n);0===e.actions.length&&(u(t),e.scheduled=void 0)},e}(n(81).a),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i.a(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(n(80).a);n.d(t,"a",function(){return l});var l=new c(s)},function(e,t,n){"use strict";function r(e){if(!a()){var t=e;"function"==typeof t.requestFullscreen?t.requestFullscreen():"function"==typeof t.msRequestFullscreen?t.msRequestFullscreen():"function"==typeof t.mozRequestFullScreen?t.mozRequestFullScreen():"function"==typeof t.webkitRequestFullscreen&&t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}}function i(){if(a()){var e=document;"function"==typeof e.exitFullscreen?e.exitFullscreen():"function"==typeof e.msExitFullscreen?e.msExitFullscreen():"function"==typeof e.mozCancelFullScreen?e.mozCancelFullScreen():"function"==typeof e.webkitExitFullscreen&&e.webkitExitFullscreen()}}function a(){var e=document;return null!=e.fullscreenElement||null!=e.mozFullScreenElement||null!=e.webkitFullscreenElement||null!=e.msFullscreenElement}n.d(t,"c",function(){return r}),n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a})},function(e,t,n){"use strict";var r=n(2),i=n(14),a={aa:"aar",ab:"abk",ae:"ave",af:"afr",ak:"aka",am:"amh",an:"arg",ar:"ara",as:"asm",av:"ava",ay:"aym",az:"aze",ba:"bak",be:"bel",bg:"bul",bi:"bis",bm:"bam",bn:"ben",bo:"bod",br:"bre",bs:"bos",ca:"cat",ce:"che",ch:"cha",co:"cos",cr:"cre",cs:"ces",cu:"chu",cv:"chv",cy:"cym",da:"dan",de:"deu",dv:"div",dz:"dzo",ee:"ewe",el:"ell",en:"eng",eo:"epo",es:"spa",et:"est",eu:"eus",fa:"fas",ff:"ful",fi:"fin",fj:"fij",fo:"fao",fr:"fra",fy:"fry",ga:"gle",gd:"gla",gl:"glg",gn:"grn",gu:"guj",gv:"glv",ha:"hau",he:"heb",hi:"hin",ho:"hmo",hr:"hrv",ht:"hat",hu:"hun",hy:"hye",hz:"her",ia:"ina",id:"ind",ie:"ile",ig:"ibo",ii:"iii",ik:"ipk",io:"ido",is:"isl",it:"ita",iu:"iku",ja:"jpn",jv:"jav",ka:"kat",kg:"kon",ki:"kik",kj:"kua",kk:"kaz",kl:"kal",km:"khm",kn:"kan",ko:"kor",kr:"kau",ks:"kas",ku:"kur",kv:"kom",kw:"cor",ky:"kir",la:"lat",lb:"ltz",lg:"lug",li:"lim",ln:"lin",lo:"lao",lt:"lit",lu:"lub",lv:"lav",mg:"mlg",mh:"mah",mi:"mri",mk:"mkd",ml:"mal",mn:"mon",mr:"mar",ms:"msa",mt:"mlt",my:"mya",na:"nau",nb:"nob",nd:"nde",ne:"nep",ng:"ndo",nl:"nld",nn:"nno",no:"nor",nr:"nbl",nv:"nav",ny:"nya",oc:"oci",oj:"oji",om:"orm",or:"ori",os:"oss",pa:"pan",pi:"pli",pl:"pol",ps:"pus",pt:"por",qu:"que",rm:"roh",rn:"run",ro:"ron",ru:"rus",rw:"kin",sa:"san",sc:"srd",sd:"snd",se:"sme",sg:"sag",si:"sin",sk:"slk",sl:"slv",sm:"smo",sn:"sna",so:"som",sq:"sqi",sr:"srp",ss:"ssw",st:"sot",su:"sun",sv:"swe",sw:"swa",ta:"tam",te:"tel",tg:"tgk",th:"tha",ti:"tir",tk:"tuk",tl:"tgl",tn:"tsn",to:"ton",tr:"tur",ts:"tso",tt:"tat",tw:"twi",ty:"tah",ug:"uig",uk:"ukr",ur:"urd",uz:"uzb",ve:"ven",vi:"vie",vo:"vol",wa:"wln",wo:"wol",xh:"xho",yi:"yid",yo:"yor",za:"zha",zh:"zho",zu:"zul"},o={alb:"sqi",arm:"hye",baq:"eus",bur:"mya",chi:"zho",cze:"ces",dut:"nld",fre:"fra",geo:"kat",ger:"deu",gre:"ell",ice:"isl",mac:"mkd",mao:"mri",may:"msa",per:"fas",slo:"slk",rum:"ron",tib:"bod",wel:"cym"};function u(e){if(Object(i.a)(e)||""===e)return"";var t=function(e){var t;switch(e.length){case 2:t=a[e];break;case 3:t=o[e]}return t}((""+e).toLowerCase().split("-")[0]);return Object(r.a)(t)?t:e}function s(e){if(Object(i.a)(e))return e;var t,n=!1;return"string"==typeof e?t=e:(t=e.language,!0===e.closedCaption&&(n=!0)),{language:t,closedCaption:n,normalized:u(t)}}function c(e){if(Object(i.a)(e))return e;if("string"==typeof e)return{language:e,audioDescription:!1,normalized:u(e)};var t={language:e.language,audioDescription:!0===e.audioDescription,normalized:u(u(e.language))};return!0===e.isDub&&(t.isDub=!0),t}n.d(t,"b",function(){return c}),n.d(t,"c",function(){return s});t.a=u},function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(24);function i(){return r.d&&null!=window.WebKitMediaKeys}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(47),i=n(163);function a(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(r.a)(i.a,e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(r){return function(e){for(var t=0,n=r.length;t<n&&!e.closed;t++)e.next(r[t]);e.complete()}}},function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e){return e instanceof Date&&!isNaN(+e)}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(4),r=function(r){function e(e,t){var n=r.call(this)||this;return n.subject=e,n.subscriber=t,n.closed=!1,n}return i.a(e,r),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},e}(n(20).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this._hashes={}}var t=e.prototype;return t.add=function(e){this._hashes[e]=!0},t.remove=function(e){delete this._hashes[e]},t.test=function(e){return this._hashes.hasOwnProperty(e)},t.isEmpty=function(){return 0===Object.keys(this._hashes).length},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),i=Object(r.d)(Object(r.r)("pssh"),0)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=.3;function i(e){return e*(1+(2*Math.random()-1)*r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(74),i=n(26),a=n(176),o=n(214),u=n(0),s=n(40);function c(n){return Object(r.a)(function(){var e=s.a.getState(n);if(null===e)return Object(i.a)(null);u.a.debug("EME: Disposing of the current MediaKeys");var t=e.sessionsStore;return s.a.clearState(n),t.closeAllSessions().pipe(Object(a.a)(Object(o.a)(n,null)))})}},function(e,t,n){"use strict";function r(e,t,n,r){if(n===e.timescale){for(var i=0;i<t.length;i++){var a=t[i],o=a.start-r;if(o>e.time)return!1;if(o===e.time)return a.duration===e.duration&&(null==a.range?null==e.range:null!=e.range&&a.range[0]===e.range[0]&&a.range[1]===e.range[1]);if(0<=a.repeatCount&&null!=a.duration){var u=(o-a.start)/a.duration-1;return u%1==0&&u<=a.repeatCount}}return!1}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(;0<e.length;){var n=e[0];if(n.start>=t)return;if(n.repeatCount<=0)e.shift();else{var r=e[1];if(null!=r&&r.start<=t)e.shift();else{if(n.duration<=0)return;for(var i=n.start+n.duration,a=1;i<t&&a<=n.repeatCount;)i+=n.duration,a++;if(!(a>n.repeatCount)){var o=n.repeatCount-a;return n.start=i,void(n.repeatCount=o)}e.shift()}}}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var u=n(0),s=n(13);function c(a){var o=[];a.periods.forEach(function(e){var t=e.id;if(Object(s.a)(o,t)){u.a.warn("Two periods with the same ID found. Updating.");var n=t+"-dup";e.id=n,c(a),o.push(n)}else o.push(t);var r=e.adaptations,i=[];Object.keys(r).forEach(function(e){var t=r[e];void 0!==t&&t.forEach(function(e){var t=e.id;if(Object(s.a)(i,t)){u.a.warn("Two adaptations with the same ID found. Updating.",t);var n=t+"-dup";e.id=n,c(a),i.push(n)}else i.push(t);var r=[];e.representations.forEach(function(e){var t=e.id;if(Object(s.a)(r,t)){u.a.warn("Two representations with the same ID found. Updating.",t);var n=t+"-dup";e.id=n,c(a),r.push(n)}else r.push(t)})})})})}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(14);function r(e){if(Object(i.a)(e))return"";var t=new Uint8Array(e);239===t[0]&&187===t[1]&&191===t[2]&&(t=t.subarray(3));var n=function(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t}(t),r=escape(n);return decodeURIComponent(r)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(2),o=n(60);function r(e,t){for(var n=[],r=t;r<e.length;r++)if(Object(o.c)(e,r)){var i=Object(o.a)(e,r);n.push(e.slice(r,i)),r=i}else if(Object(a.a)(e[r]))for(;Object(a.a)(e[r]);)r++;return n}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(25);function a(e,t,n){if(null==i.e)throw new Error("VTT cues not supported in your target");return t<=e?(r.a.warn("Compat: Invalid cue times: "+e+" - "+t),null):new i.e(e,t,n)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var y=n(0),_=n(2),O=/(\d+) (\d+)/;function r(e){var t=e.getAttribute("ttp:frameRate"),n=e.getAttribute("ttp:subFramRate"),r=e.getAttribute("ttp:tickRate"),i=e.getAttribute("ttp:frameRateMultiplier"),a=e.getAttribute("xml:space"),o=e.getAttribute("ttp:cellResolution"),u={columns:32,rows:15};if(null!==o){var s=O.exec(o);if(null===s||s.length<3)y.a.warn("TTML Parser: Invalid cellResolution");else{var c=parseInt(s[1],10),l=parseInt(s[2],10);isNaN(c)||isNaN(l)?y.a.warn("TTML Parser: Invalid cellResolution"):u={columns:c,rows:l}}}if(Object(_.a)(a)&&"default"!==a&&"preserve"!==a)throw new Error("Invalid spacing style");var f=Number(t);(isNaN(f)||f<=0)&&(f=30);var d=Number(n);(isNaN(d)||d<=0)&&(d=1);var p=Number(r);(isNaN(p)||p<=0)&&(p=void 0);var h=f,v=null!=d?d:1,b=null!==a?a:"default",m=void 0!==p?p:f*d;if(null!==i){var g=/^(\d+) (\d+)$/g.exec(i);if(null!==g)h=f*(Number(g[1])/Number(g[2]))}return{cellResolution:u,tickRate:m,frameRate:h,subFrameRate:v,spaceStyle:b}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(127),u=n(26),s=n(175),c=n(130),l=n(172),f=n(213),d=n(142),p=n(174),h=n(47),v=n(114),b=n(135),m=n(136),g=n(0);function r(t,n,e,r){var i=Object(m.a)(n).pipe(Object(c.a)(1),Object(d.a)(function(){g.a.info("Init: Set initial time",e),n.currentTime="function"==typeof e?e():e}),Object(p.a)({refCount:!0})),a=i.pipe(Object(h.a)(function(){return(a=n,e=t.pipe(Object(s.a)(function(e){var t=e.seeking,n=e.stalled,r=e.readyState,i=e.currentRange;return!t&&null==n&&(4===r||3===r&&null!=i)&&(!Object(v.a)()||0<a.duration)}),Object(c.a)(1),Object(l.a)("can-play")),Object(v.a)()&&0===a.duration?Object(o.a)(Object(u.a)("not-loaded-metadata"),e):e).pipe(Object(d.a)(function(){return g.a.info("Init: Can begin to play content")}),Object(h.a)(function(e){return"can-play"===e?r?(t=n,Object(b.a)(t).pipe(Object(l.a)("autoplay"),Object(f.a)(function(e){if(e instanceof Error&&"NotAllowedError"===e.name)return g.a.warn("Init: Media element can't play. It may be due to browser auto-play policies."),Object(u.a)("autoplay-blocked");throw e}))):Object(u.a)("loaded"):Object(u.a)(e);var t}));var a,e}),Object(p.a)({refCount:!0}));return{seek$:i,load$:a}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(24);function i(){return r.e}},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(83),i=n(26),a=n(31),o=n(7),u=n(137),s=n(89),c=n(10),l=n(0),f=o.a.onEncrypted$;function d(e,t,n){return null==c.a.emeManager?Object(r.a)(f(e).pipe(Object(a.a)(function(){throw l.a.error("Init: Encrypted event but EME feature not activated"),new s.a("MEDIA_IS_ENCRYPTED_ERROR","EME feature not activated.")})),Object(i.a)({type:"eme-disabled"})):0===t.length?Object(r.a)(f(e).pipe(Object(a.a)(function(){throw l.a.error("Init: Ciphered media and no keySystem passed"),new s.a("MEDIA_IS_ENCRYPTED_ERROR","Media is encrypted and no `keySystems` given")})),Object(i.a)({type:"eme-disabled"})):Object(u.a)()?(l.a.debug("Init: Creating EMEManager"),c.a.emeManager(e,t,n)):Object(r.a)(f(e).pipe(Object(a.a)(function(){throw l.a.error("Init: Encrypted event but no EME API available"),new s.a("MEDIA_IS_ENCRYPTED_ERROR","Encryption APIs not found.")})),Object(i.a)({type:"eme-disabled"}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(4),r=n(8);function a(){return function(e){return e.lift(new o(e))}}var o=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new u(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),u=function(r){function e(e,t){var n=r.call(this,e)||this;return n.connectable=t,n}return i.a(e,r),e.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,1<t)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(210),i=n(47),a=n(58);function o(e){return Object(r.a)(e,"error").pipe(Object(i.a)(function(){switch(null==e.error?0:e.error.code){case 1:throw new a.a("MEDIA_ERR_ABORTED","The fetching of the associated resource was aborted by the user's request.");case 2:throw new a.a("MEDIA_ERR_NETWORK","A network error occurred which prevented the media from being successfully fetched");case 3:throw new a.a("MEDIA_ERR_DECODE","An error occurred while trying to decode the media resource");case 4:throw new a.a("MEDIA_ERR_SRC_NOT_SUPPORTED","The media resource has been found to be unsuitable.");default:throw new a.a("MEDIA_ERR_UNKNOWN","The HTMLMediaElement errored due to an unknown reason.")}}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(26),o=n(74),u=n(31),s=n(171),c=n(140),l=n(128),f=n(142),d=n(0);function r(t,n,e,r){var i=r.pauseWhenStalled;return(void 0===i||i?e.pipe(Object(u.a)(function(e){return null!==e.stalled}),Object(s.a)(!1),Object(c.a)()):Object(a.a)(!1)).pipe(Object(l.a)(function(e){return e?Object(o.a)(function(){return d.a.info("Init: Pause playback to build buffer"),t.playbackRate=0,Object(a.a)(0)}):n.pipe(Object(f.a)(function(e){d.a.info("Init: Resume playback speed",e),t.playbackRate=e}))}))}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(177),i=n(31),a=n(140);function o(e){return e.pipe(Object(r.a)(),Object(i.a)(function(e){return e.stalled}),Object(a.a)(function(e,t){return null===e&&null===t||null!==e&&null!==t&&e.reason===t.reason}))}},function(e,t,n){"use strict";function r(e){return"eme-disabled"===e.type||"attached-media-keys"===e.type||"created-media-keys"===e.type&&!0===e.value.keySystemOptions.disableMediaKeysAttachmentLock}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var a=n(97),o=n(62),u=n(65),s=n(51),c=n(96),l=n(98),f=n(93);n.d(t,"a",function(){return r});var r=function(e){if(e&&"function"==typeof e[s.a])return i=e,function(e){var t=i[s.a]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Object(c.a)(e))return Object(a.a)(e);if(Object(l.a)(e))return n=e,function(t){return n.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,o.a),t};if(e&&"function"==typeof e[u.a])return r=e,function(e){for(var t=r[u.a]();;){var n=t.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e};var r,n,i,t=Object(f.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},function(e,t,n){"use strict";var a=n(2);function o(e,t){for(var n=t+1;Object(a.a)(e[n]);)n++;return n}function r(e){for(var t=[],n=0;n<e.length;n++)if(Object(a.a)(e[n])){var r=o(e,n),i=e.slice(n,r);0<i.length&&(1===i.length?0<=i[0].indexOf("--\x3e")&&t.push(i):(0<=i[1].indexOf("--\x3e")||0<=i[0].indexOf("--\x3e"))&&t.push(i)),n=r}return t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var c=n(2);function l(e){var t=e.split(":");if(Object(c.a)(t[2])){var n=parseInt(t[0],10),r=parseInt(t[1],10),i=parseFloat(t[2].replace(",","."));if(isNaN(n)||isNaN(r)||isNaN(i))return;return 60*n*60+60*r+i}}function r(e,t){if(0===e.length)return null;var n,r,i=[];if(Object(c.a)(e[1])&&-1!==e[1].indexOf("--\x3e")){var a=e[1].split("--\x3e").map(function(e){return e.trim()});n=a[0],r=a[1],i=e.slice(2,e.length)}if(!Object(c.a)(n)||!Object(c.a)(r)){var o=e[0].split("--\x3e").map(function(e){return e.trim()});n=o[0],r=o[1],i=e.slice(1,e.length)}if(!Object(c.a)(n)||!Object(c.a)(r))return null;var u=l(n),s=l(r);return void 0===u||void 0===s?null:{start:u+t,end:s+t,payload:i}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var r=n(22),i=n(9);function a(e){var t=e.url;if(null==t)throw new Error("Cannot perform HTTP(s) request. URL not known");return Object(r.a)({url:t,responseType:"document"})}function o(e){var u,s,t=e.customManifestLoader;return null==t?a:(u=t,s=a,function(n){return new i.a(function(r){var e=n.url,i=Date.now()-performance.now(),a=!1,o=!1,t=u(e,{reject:function(e){o||(a=!0,r.error(e))},resolve:function(e){if(!o){a=!0;var t=null!=e.receivingTime?e.receivingTime-i:void 0,n=null!=e.sendingTime?e.sendingTime-i:void 0;r.next({type:"data-loaded",value:{responseData:e.data,size:e.size,duration:e.duration,url:e.url,receivedTime:t,sendingTime:n}}),r.complete()}},fallback:function(){o=!0,s(n).subscribe(r)}});return function(){a||o||"function"!=typeof t||t()}})})}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";var a=n(2);function i(e){var t=e.split(":").reverse();if(Object(a.a)(t[2])||Object(a.a)(t[1])){var n=Object(a.a)(t[2])?parseInt(t[2],10):0,r=parseInt(t[1],10),i=parseFloat(t[0].replace(",","."));if(isNaN(n)||isNaN(r)||isNaN(i))return;return 60*n*60+60*r+i}}function u(e){var t=e.match(/^([\d:.]+)[ |\t]+-->[ |\t]+([\d:.]+)[ |\t]*(.*)$/);if(null===t)return null;var n=i(t[1]),r=i(t[2]);return null==n||null==r?null:{start:n,end:r,settings:t[3].split(/ |\t/).reduce(function(e,t){var n=t.split(":");return 2===n.length&&(e[n[0]]=n[1]),e},{})}}function r(e,t){var n,r,i,a=/-->/;if(a.test(e[0]))n=e[0],r=e.slice(1,e.length);else{if(!a.test(e[1]))return null;i=e[0],n=e[1],r=e.slice(2,e.length)}var o=u(n);return null===o?null:{start:o.start+t,end:o.end+t,settings:o.settings,payload:r,header:i}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var s=n(2),c=n(16);function l(e,t){var n=e.exec(t);if(null===n||""===n[0])return null;var r=Number(n[1]);isNaN(r)&&(r=0);var i=Number(n[2]);isNaN(i)&&(i=0);var a=Number(n[3]);isNaN(a)&&(a=0);var o=Number(n[4]);return isNaN(o)&&(o=0),o/1e3+a+60*i+3600*r}var f=function(e,t){return c.f.test(e)?function(e,t){var n=c.f.exec(t),r=Number(n[1]),i=Number(n[2]),a=Number(n[3]),o=Number(n[4]),u=Number(n[5]);isNaN(u)&&(u=0);return o+=u/e.subFrameRate,(a+=o/e.frameRate)+60*i+3600*r}(t,e):c.e.test(e)?l(c.e,e):c.g.test(e)?l(c.g,e):c.h.test(e)?(a=t,o=e,u=c.h.exec(o),Number(u[1])/a.frameRate):c.j.test(e)?(n=t,r=e,i=c.j.exec(r),Number(i[1])/n.tickRate):c.i.test(e)?l(c.i,e):void 0;var n,r,i,a,o,u};function r(e,t){var n=e.getAttribute("begin"),r=e.getAttribute("dur"),i=e.getAttribute("end"),a=Object(s.a)(n)?f(n,t):null,o=Object(s.a)(r)?f(r,t):null,u=Object(s.a)(i)?f(i,t):null;if(null==a||null==u&&null==o)throw new Error("Invalid text cue");return{start:a,end:null==u?a+o:u}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(26),i=n(164);function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(i.a)()(r.a.apply(void 0,e))}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(4),r=n(28),a=n(52),o=n(27),u=n(31),s=n(61);function c(t,i){return"function"==typeof i?function(e){return e.pipe(c(function(n,r){return Object(s.a)(t(n,r)).pipe(Object(u.a)(function(e,t){return i(n,e,r,t)}))}))}:function(e){return e.lift(new l(t))}}var l=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new f(e,this.project))},e}(),f=function(r){function e(e,t){var n=r.call(this,e)||this;return n.project=t,n.index=0,n}return i.a(e,r),e.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new a.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(o.a)(this,e,t,n,i)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||r.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&r.prototype._complete.call(this)},e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},e}(r.a)},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var r=n(56);function i(e){var t=Object(r.b)(e,1836019558);return null===t?null:Object(r.b)(t,1953653094)}function a(e){return Object(r.b)(e,1835295092)}function o(e){var t=Object(r.b)(e,1836019574);if(null===t)return null;var n=Object(r.b)(t,1953653099);return null===n?null:Object(r.b)(n,1835297121)}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(4),r=n(8),a=n(101),o=n(54);function u(t){return function(e){return 0===t?Object(o.b)():e.lift(new s(t))}}var s=function(){function e(e){if(this.total=e,this.total<0)throw new a.a}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.total))},e}(),c=function(r){function e(e,t){var n=r.call(this,e)||this;return n.total=t,n.count=0,n}return i.a(e,r),e.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},e}(r.a)},function(e,t,n){"use strict";function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return a(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r});var r=function(a){var e,t;function o(e,t,n,r){var i;return i=a.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(i),o.prototype),i.name="RequestError",i.url=e,i.xhr=r,i.status=t,i.type=n,i.message=n,i}return t=a,(e=o).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,o}(i(Error))},function(e,t,n){"use strict";function a(e,t,n,r){var i;t in e&&("function"!=typeof(i=r)||"[object Function]"!==s.call(i)||!r())||(f?l(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)}function r(e,t){var n=2<arguments.length?arguments[2]:{},r=o(t);u&&(r=c.call(r,Object.getOwnPropertySymbols(t)));for(var i=0;i<r.length;i+=1)a(e,r[i],t[r[i]],n[r[i]])}var o=n(154),u="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,c=Array.prototype.concat,l=Object.defineProperty,f=l&&function(){var e={};try{for(var t in l(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(e){return!1}}();r.supportsDescriptors=!!f,e.exports=r},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(24);function i(){return r.b}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(9),i=n(0),a=n(85);function o(t,n){return new r.a(function(e){return i.a.info("Setting URL to Element",n,t),t.src=n,e.next(void 0),function(){Object(a.a)(t)}})}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(74),i=n(21),a=n(36);function o(e){return Object(r.a)(function(){return Object(a.a)(function(){return Object(i.a)(e.play())},void 0)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(26),i=n(130),a=n(25),o=n(49);function u(e){return e.readyState>=a.d.HAVE_METADATA?Object(r.a)(null):Object(o.onLoadedMetadata$)(e).pipe(Object(i.a)(1))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(138);function i(){return"function"==typeof r.c}},function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"c",function(){return g});var r=n(44),i=n(83),h=n(63),v=n(26),a=n(173),u=n(1),o=n(21),s=n(30),c=n(33),l=n(25),f=n(24),d=n(49),p=n(94),b=n(139);function m(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}var g=null;var y=function(e,t){return e.createSession(t)},_=function(){function e(){}var t=e.prototype;return t._setVideo=function(){throw new Error("MediaKeys is not implemented in your browser")},t.createSession=function(){throw new Error("MediaKeys is not implemented in your browser")},t.setServerCertificate=function(){throw new Error("MediaKeys is not implemented in your browser")},e}();if(null==navigator.requestMediaKeySystemAccess||Object(p.a)()){var O=function(a){return function(n,r){var i=this;return new c.a(function(e,t){try{a.call(i,n,null==r?"":r),e()}catch(e){t(e)}})}},E=function(e){return"function"==typeof e.webkitGenerateKeyRequest};if(E(HTMLVideoElement.prototype)){var w=function(n){function e(e,t){var o;return(o=n.call(this)||this)._closeSession$=new r.a,o._vid=e,o._key=t,o.sessionId="",o.closed=new c.a(function(e){o._closeSession$.subscribe(e)}),o.keyStatuses=new Map,o.expiration=NaN,Object(i.a)(d.onKeyMessage$(e),d.onKeyAdded$(e),d.onKeyError$(e)).pipe(Object(a.a)(o._closeSession$)).subscribe(function(e){return o.trigger(e.type,e)}),o.update=O(function(e,t){if(!E(o._vid))throw new Error("impossible to add a new key");if(0<=o._key.indexOf("clearkey")){var n=e instanceof ArrayBuffer?new Uint8Array(e):e,r=JSON.parse(Object(u.g)(n)),i=Object(u.r)(atob(r.keys[0].k)),a=Object(u.r)(atob(r.keys[0].kid));o._vid.webkitAddKey(o._key,i,a,t)}else o._vid.webkitAddKey(o._key,e,null,t);o.sessionId=t}),o}m(e,n);var t=e.prototype;return t.generateRequest=function(e,t){var n=this;return new c.a(function(e){if(!E(n._vid))throw new Error("impossible to generate a key request");n._vid.webkitGenerateKeyRequest(n._key,t),e()})},t.close=function(){var t=this;return new c.a(function(e){t._closeSession$.next(),t._closeSession$.complete(),e()})},t.load=function(){return c.a.resolve(!1)},t.remove=function(){return c.a.resolve()},e}(s.a);_=function(){function e(e){this.ks_=e}var t=e.prototype;return t._setVideo=function(e){this._vid=e},t.createSession=function(){if(null==this._vid)throw new Error("Video not attached to the MediaKeys");return new w(this._vid,this.ks_)},t.setServerCertificate=function(){throw new Error("Server certificate is not implemented in your browser")},e}();g=function(e,t){if(n=e,null==(r=document.querySelector("video"))&&(r=document.createElement("video")),null==r||"function"!=typeof r.canPlayType||!r.canPlayType("video/mp4",n))return Object(h.a)(void 0);for(var n,r,i=0;i<t.length;i++){var a=t[i],o=a.videoCapabilities,u=a.audioCapabilities,s=a.initDataTypes,c=a.sessionTypes,l=a.distinctiveIdentifier,f=a.persistentState,d=!0;if(d=(d=(d=(d=d&&(null==s||s.some(function(e){return"cenc"===e})))&&(null==c||c.filter(function(e){return"temporary"===e}).length===c.length))&&"required"!==l)&&"required"!==f){var p={videoCapabilities:o,audioCapabilities:u,initDataTypes:["cenc"],sessionTypes:["temporary"],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed"};return Object(v.a)(new b.a(e,new _(e),p))}}return Object(h.a)(void 0)}}else if(null!=l.b&&null!=l.b.prototype&&"function"==typeof l.b.isTypeSupported&&(g=function(e,t){if(!l.b.isTypeSupported(e))return Object(h.a)(void 0);for(var n=0;n<t.length;n++){var r=t[n],i=r.videoCapabilities,a=r.audioCapabilities,o=r.initDataTypes,u=r.distinctiveIdentifier,s=!0;if(s=(s=s&&(null==o||o.some(function(e){return"cenc"===e})))&&"required"!==u){var c={videoCapabilities:i,audioCapabilities:a,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]};return Object(v.a)(new b.a(e,new l.b(e),c))}}return Object(h.a)(void 0)},f.b&&"function"==typeof l.b.prototype.createSession)){var j=function(t){function e(e){var n;return(n=t.call(this)||this).sessionId="",n.expiration=NaN,n.keyStatuses=new Map,n._mk=e,n._closeSession$=new r.a,n.closed=new c.a(function(e){n._closeSession$.subscribe(e)}),n.update=O(function(e,t){if(null==n._ss)throw new Error("MediaKeySession not set");n._ss.update(e,t),n.sessionId=t}),n}m(e,t);var n=e.prototype;return n.generateRequest=function(e,t){var n=this;return new c.a(function(e){n._ss=n._mk.createSession("video/mp4",t),Object(i.a)(d.onKeyMessage$(n._ss),d.onKeyAdded$(n._ss),d.onKeyError$(n._ss)).pipe(Object(a.a)(n._closeSession$)).subscribe(function(e){return n.trigger(e.type,e)}),e()})},n.close=function(){var t=this;return new c.a(function(e){null!=t._ss&&(t._ss.close(),t._ss=void 0),t._closeSession$.next(),t._closeSession$.complete(),e()})},n.load=function(){return c.a.resolve(!1)},n.remove=function(){return c.a.resolve()},e}(s.a);y=function(e){return new j(e)}}}else g=function(e,t){return Object(o.a)(navigator.requestMediaKeySystemAccess(e,t))};t.b=_},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(33);function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(e,t,n){this._keyType=e,this._mediaKeys=t,this._configuration=n}var t,n,r,i=e.prototype;return i.createMediaKeys=function(){var t=this;return new a.a(function(e){return e(t._mediaKeys)})},i.getConfiguration=function(){return this._configuration},t=e,(n=[{key:"keySystem",get:function(){return this._keyType}}])&&o(t.prototype,n),r&&o(t,r),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(4),i=n(8);function a(t,n){return function(e){return e.lift(new o(t,n))}}var o=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.compare,this.keySelector))},e}(),u=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.keySelector=n,r.hasKey=!1,"function"==typeof t&&(r.compare=t),r}return r.a(e,i),e.prototype.compare=function(e,t){return e===t},e.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(4),i=n(8);function a(){return function(e){return e.lift(new o)}}var o=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new u(e))},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.a(t,e),t.prototype._next=function(e){},t}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(4),i=n(8),o=n(46),u=n(59);function a(t,n,r){return function(e){return e.lift(new s(t,n,r))}}var s=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.nextOrObserver,this.error,this.complete))},e}(),c=function(a){function e(e,t,n,r){var i=a.call(this,e)||this;return i._tapNext=o.a,i._tapError=o.a,i._tapComplete=o.a,i._tapError=n||o.a,i._tapComplete=r||o.a,Object(u.a)(t)?(i._context=i)._tapNext=t:t&&(i._context=t,i._tapNext=t.next||o.a,i._tapError=t.error||o.a,i._tapComplete=t.complete||o.a),i}return r.a(e,a),e.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},e.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},e}(i.a)},,function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(24);function i(){return r.b}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(74),i=n(54),a=n(141),o=n(133),u=n(105),s=n(40);function c(t){return Object(r.a)(function(){if(Object(o.a)())return Object(u.a)(t).pipe(Object(a.a)());var e=s.a.getState(t);return null!=e&&!0===e.keySystemOptions.closeSessionsOnStop?e.sessionsStore.closeAllSessions().pipe(Object(a.a)()):i.a})}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(32),i=n(105);function a(e){Object(i.a)(e).subscribe(r.a)}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(40);function i(e){var t=r.a.getState(e);return null==t?null:t.keySystemOptions.type}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(25);function i(e){return null!=r.c&&("function"!=typeof r.c.isTypeSupported||r.c.isTypeSupported(e))}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(24);function i(){return!r.c}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(24);function r(e,t){var n,r,i="subtitles";if(o.c){var a=e.textTracks.length;(n=0<a?e.textTracks[a-1]:e.addTextTrack(i)).mode=t?n.HIDDEN:n.SHOWING}else r=document.createElement("track"),e.appendChild(r),n=r.track,r.kind=i,n.mode=t?"hidden":"showing";return{track:n,trackElement:r}}},function(e,t,n){"use strict";function r(e){return"function"==typeof window.VTTCue&&e instanceof window.VTTCue}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(74),i=n(9),u=n(211),s=n(171),c=n(31),l=n(140),f=n(0),d=window.ResizeObserver;function a(t,e){return Object(r.a)(function(){if(void 0===d)return Object(u.a)(e).pipe(Object(s.a)(null),Object(c.a)(function(){var e=t.getBoundingClientRect();return{height:e.height,width:e.width}}),Object(l.a)(function(e,t){return e.height===t.height&&e.width===t.width}));var a=-1,o=-1;return new i.a(function(i){var e=new d(function(e){if(0!==e.length){var t=e[0].contentRect,n=t.height,r=t.width;n===a&&r===o||(a=n,o=r,i.next({height:n,width:r}))}else f.a.error("Compat: Resized but no observed element.")});return e.observe(t),function(){e.disconnect()}})})}},function(e,t,n){"use strict";var r;function i(e,t){(void 0===r&&(r=void 0!==e.classList&&"function"==typeof e.classList.add),r)?e.classList.add(t):(" "+e.className+" ").indexOf(" "+t+" ")<0&&(e.className+=" "+t)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(155),a=Object.keys,o=a?function(e){return a(e)}:n(190),u=Object.keys;o.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return i(e)?u(r.call(e)):u(e)}):Object.keys=o;return Object.keys||o},e.exports=o},function(e,t,n){"use strict";var r=Object.prototype.toString;e.exports=function(e){var t=r.call(e),n="[object Arguments]"===t;return n=n||"[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===r.call(e.callee)}},function(e,t,n){"use strict";var r=Object,i=TypeError;e.exports=function(){if(null!=this&&this!==r(this))throw new i("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e}},function(e,t,n){"use strict";var r=n(156),i=n(132).supportsDescriptors,a=Object.getOwnPropertyDescriptor,o=TypeError;e.exports=function(){if(!i)throw new o("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=a(RegExp.prototype,"flags");if(e&&"function"==typeof e.get&&"boolean"==typeof/a/.dotAll)return e.get}return r}},function(e,t,n){"use strict";function r(){return!1===navigator.onLine}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){return e.segment.id===t.segment.id&&e.representation.id===t.representation.id&&e.adaptation.id===t.adaptation.id&&e.period.id===t.period.id}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0);function i(e,t){if("function"!=typeof e.changeType)return!1;try{e.changeType(t)}catch(e){return r.a.warn("Could not call 'changeType' on the given SourceBuffer:",e),!1}return!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(24);function r(e,t,n,r){return i.a&&r&&"timeupdate"===n&&null!=t&&10<t.end-e}},function(e,t,n){"use strict";n.r(t);var r=n(145),i=n(146),g=n(54),y=n(26),_=n(83),b=n(63),O=n(127),s=n(174),c=n(175),l=n(130),f=n(142),E=n(47),w=n(31),j=n(213),m=n(141),a=n(7),d=n(222),p=n(223),T=n(89),S=n(0),A=n(74),o=n(3),v=n(13),x=n(21);function k(e){if(""===e.sessionId)return!1;var t=e.keyStatuses,n=[];return t.forEach(function(e){n.push(e)}),0<n.length&&!Object(v.a)(n,"expired")&&!Object(v.a)(n,"internal-error")&&(S.a.debug("EME: Reuse loaded session",e.sessionId),!0)}function R(d,p,h){return Object(A.a)(function(){var e=h.keySystemOptions,t=h.mediaKeySystemAccess,n=h.sessionsStore,r=h.sessionStorage,i=t.getConfiguration().sessionTypes,a=null!=i&&Object(v.a)(i,"persistent-license"),o=a&&null!=r&&!0===e.persistentLicense?"persistent-license":"temporary";S.a.debug("EME: Create a new "+o+" session");var u=n.createSession(d,p,o);if(!a||null==r||!0!==e.persistentLicense)return Object(y.a)({type:"created-session",value:{mediaKeySession:u,sessionType:o}});var s=r.get(d,p);if(null===s)return Object(y.a)({type:"created-session",value:{mediaKeySession:u,sessionType:o}});function c(){return S.a.info("EME: Removing previous persistent session."),null!==r.get(d,p)&&r.delete(d,p),n.deleteAndCloseSession(u).pipe(Object(w.a)(function(){return{type:"created-session",value:{mediaKeySession:n.createSession(d,p,o),sessionType:o}}}))}var l,f;return(l=s.sessionId,f=u,Object(A.a)(function(){return S.a.debug("EME: Load persisted session",l),Object(x.a)(f.load(l))})).pipe(Object(E.a)(function(e){return e?e&&k(u)?(r.add(d,p,u),S.a.info("EME: Succeeded to load persistent session."),Object(y.a)({type:"loaded-persistent-session",value:{mediaKeySession:u,sessionType:o}})):(S.a.warn("EME: Previous persistent session not usable anymore."),c()):(S.a.warn("EME: No data stored for the loaded session"),r.delete(d,p),Object(y.a)({type:"created-session",value:{mediaKeySession:u,sessionType:o}}))}),Object(j.a)(function(){return S.a.warn("EME: Unable to load persistent session."),c()}))})}var I=o.a.EME_MAX_SIMULTANEOUS_MEDIA_KEY_SESSIONS;var M=n(172),u=n(214),h=n(40);var N=n(36),C=n(9),D=n(144),P=n(138),B=n(87),L=o.a.EME_DEFAULT_WIDEVINE_ROBUSTNESSES,U=o.a.EME_KEY_SYSTEMS;function F(n,r){return Object(A.a)(function(){var e=h.a.getState(n);if(null!=e){var t=function(e,t,n){var r=t.getConfiguration();if(Object(D.a)()||null==r)return null;var i=e.filter(function(e){return e.type===n.type&&((!0!==e.persistentLicense||"required"===r.persistentState)&&(!0!==e.distinctiveIdentifierRequired||"required"===r.distinctiveIdentifier))})[0];return null!=i?{keySystemOptions:i,keySystemAccess:t}:null}(r,e.mediaKeySystemAccess,e.keySystemOptions);if(null!==t)return S.a.debug("EME: Found cached compatible keySystem",t),Object(y.a)({type:"reuse-media-key-system-access",value:{mediaKeySystemAccess:t.keySystemAccess,options:t.keySystemOptions}})}var l=r.reduce(function(e,t){var n,r=U[t.type];null!=r?n=r.map(function(e){return{keyName:t.type,keyType:e,keySystemOptions:t}}):n=[{keyName:function(e){for(var t=0,n=Object.keys(U);t<n.length;t++){var r=n[t];if(Object(v.a)(U[r],e))return r}}(t.type),keyType:t.type,keySystemOptions:t}];return e.concat(n)},[]);return new C.a(function(u){var s,c=!1;return function e(t){if(!c)if(t>=l.length)u.error(new T.a("INCOMPATIBLE_KEYSYSTEMS","No key system compatible with your wanted configuration has been found in the current browser."));else{var n=l[t],r=n.keyName,i=n.keyType,a=n.keySystemOptions,o=function(e,t){var n=["temporary"],r="optional",i="optional";!0===t.persistentLicense&&(r="required",n.push("persistent-license")),!0===t.persistentStateRequired&&(r="required"),!0===t.distinctiveIdentifierRequired&&(i="required");var a=null!=t.videoRobustnesses?t.videoRobustnesses:"widevine"===e?L:[],o=null!=t.audioRobustnesses?t.audioRobustnesses:"widevine"===e?L:[];return 0===a.length&&a.push(void 0),0===o.length&&o.push(void 0),[{initDataTypes:["cenc"],videoCapabilities:Object(B.a)(a,function(e){return[{contentType:'video/mp4;codecs="avc1.4d401e"',robustness:e},{contentType:'video/mp4;codecs="avc1.42e01e"',robustness:e},{contentType:'video/webm;codecs="vp8"',robustness:e}]}),audioCapabilities:Object(B.a)(o,function(e){return[{contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:e},{contentType:"audio/webm;codecs=opus",robustness:e}]}),distinctiveIdentifier:i,persistentState:r,sessionTypes:n}]}(r,a);if(S.a.debug("EME: Request keysystem access "+i+","+(t+1)+" of "+l.length,o),null==P.c)throw new Error("requestMediaKeySystemAccess is not implemented in your browser.");s=Object(P.c)(i,o).subscribe(function(e){S.a.info("EME: Found compatible keysystem",i,o),u.next({type:"create-media-key-system-access",value:{options:a,mediaKeySystemAccess:e}}),u.complete()},function(){S.a.debug("EME: Rejected access to keysystem",i,o),s=null,e(t+1)})}}(0),function(){c=!0,null!=s&&s.unsubscribe()}})})}var $=n(220),z=n(221);var W=n(11),V=n(38),H=function(){function e(e){this._mediaKeys=e,this._entries=[]}var t=e.prototype;return t.getAll=function(){return this._entries.map(function(e){return{session:e.session,sessionType:e.sessionType}})},t.get=function(e,t){var n=Object(V.a)(e),r=Object(W.a)(this._entries,function(e){return e.initData===n&&e.initDataType===t});return null==r?null:{session:r.session,sessionType:r.sessionType}},t.createSession=function(e,t,n){var r=this;if(null!=this.get(e,t))throw new T.a("MULTIPLE_SESSIONS_SAME_INIT_DATA","This initialization data was already stored.");var i=Object(P.a)(this._mediaKeys,n),a={session:i,sessionType:n,initData:Object(V.a)(e),initDataType:t};return null!==i.closed&&i.closed.then(function(){r._delete(i)}).catch(function(e){S.a.warn("EME-MKSS: session.closed rejected: "+e)}),S.a.debug("EME-MKSS: Add session",a),this._entries.push(a),i},t.deleteAndCloseSession=function(e){var t=this;return Object(A.a)(function(){return t._delete(e),S.a.debug("EME-MKSS: Close session",e),(n=e,Object($.a)(Object(x.a)(n.close()),Object(z.a)(1e3).pipe(Object(E.a)(function(){return Object(x.a)(n.update(new Uint8Array(1))).pipe(Object(w.a)(function(){throw new Error("Compat: Couldn't know if session is closed")}),Object(j.a)(function(e){if(e instanceof Error&&"The session is already closed."===e.message)return Object(y.a)(null);var t=Object(x.a)(n.closed);return Object($.a)(t,Object(z.a)(1e3).pipe(Object(w.a)(function(){throw new Error("Compat: Couldn't know if session is closed")})))}))})))).pipe(Object(j.a)(function(e){return S.a.error(e),Object(y.a)(null)}));var n})},t.closeAllSessions=function(){var n=this;return Object(A.a)(function(){var e=n._entries;n._entries=[];var t=e.map(function(e){return n.deleteAndCloseSession(e.session)});return Object(O.a)(_.a.apply(void 0,t).pipe(Object(m.a)()),Object(y.a)(null))})},t._delete=function(t){var e=Object(W.a)(this._entries,function(e){return e.session===t});if(null==e)return-1;S.a.debug("EME-MKSS: delete session",e);var n=this._entries.indexOf(e);return this._entries.splice(n,1),n},e}(),K=n(35),Y=n(2);var G=function(){function e(e){var t;t=e,Object(K.a)(t,{save:"function",load:"function"},"licenseStorage"),this._entries=[],this._storage=e;try{this._entries=this._storage.load(),Array.isArray(this._entries)||(this._entries=[])}catch(e){S.a.warn("EME-PSS: Could not get entries from license storage",e),this.dispose()}}var t=e.prototype;return t.get=function(e,t){var n=Object(V.a)(e),r=Object(W.a)(this._entries,function(e){return e.initData===n&&e.initDataType===t});return null==r?null:r},t.add=function(e,t,n){if(null!=n&&Object(Y.a)(n.sessionId)){var r=n.sessionId,i=this.get(e,t);null!=i&&i.sessionId===r||(null!=i&&this.delete(e,t),S.a.info("EME-PSS: Add new session",r,n),this._entries.push({sessionId:r,initData:Object(V.a)(e),initDataType:t}),this._save())}},t.delete=function(e,t){var n=Object(V.a)(e),r=Object(W.a)(this._entries,function(e){return e.initData===n&&e.initDataType===t});if(null!=r){S.a.warn("EME-PSS: Delete session from store",r);var i=this._entries.indexOf(r);this._entries.splice(i,1),this._save()}},t.dispose=function(){this._entries=[],this._save()},t._save=function(){try{this._storage.save(this._entries)}catch(e){S.a.warn("EME-PSS: Could not save licenses in localStorage")}},e}();function q(s,e){return F(s,e).pipe(Object(E.a)(function(e){var t=e.value,n=t.options,r=t.mediaKeySystemAccess,i=h.a.getState(s),a=function(e){if(!0!==e.persistentLicense)return null;var t=e.licenseStorage;if(null==t)throw new T.a("INVALID_KEY_SYSTEM","No license storage found for persistent license.");return S.a.info("EME: Set the given license storage"),new G(t)}(n);if(null==i||"reuse-media-key-system-access"!==e.type)return S.a.debug("EME: Calling createMediaKeys on the MediaKeySystemAccess"),Object(N.a)(function(){return Object(x.a)(r.createMediaKeys())},void 0).pipe(Object(j.a)(function(e){var t=e instanceof Error?e.message:"Unknown error when creating MediaKeys.";throw new T.a("CREATE_MEDIA_KEYS_ERROR",t)}),Object(w.a)(function(e){return{mediaKeys:e,sessionsStore:new H(e),mediaKeySystemAccess:r,keySystemOptions:n,sessionStorage:a}}));var o=i.mediaKeys,u=i.sessionsStore;return Object(y.a)({mediaKeys:o,sessionsStore:u,mediaKeySystemAccess:r,keySystemOptions:n,sessionStorage:a})}))}function X(t,e){return q(t,e).pipe(Object(E.a)(function(e){return Object(O.a)(Object(y.a)({type:"created-media-keys",value:e}),(a=e,o=t,Object(A.a)(function(){var e=a.keySystemOptions,t=a.mediaKeySystemAccess,n=a.mediaKeys,r=a.sessionsStore,i=h.a.getState(o);return h.a.setState(o,{keySystemOptions:e,mediaKeySystemAccess:t,mediaKeys:n,sessionsStore:r}),(null!=i&&i.sessionsStore!==r?i.sessionsStore.closeAllSessions():Object(y.a)(null)).pipe(Object(E.a)(function(){return o.mediaKeys===n?Object(y.a)(null):(S.a.debug("EME: Setting MediaKeys"),Object(u.a)(o,n))}))})).pipe(Object(M.a)({type:"attached-media-keys",value:e})));var a,o}))}var Q=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),Z=n(44),J=n(163),ee=n(43),te=n(4),ne=n(99),re=n(28),ie=n(27);var ae=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new oe(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),oe=function(o){function t(e,t,n,r,i){var a=o.call(this,e)||this;return a.absoluteTimeout=t,a.waitFor=n,a.withObservable=r,a.scheduler=i,a.action=null,a.scheduleTimeout(),a}return te.a(t,o),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Object(ie.a)(e,t))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),o.prototype._next.call(this,e)},t.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},t}(re.a);function ue(e,t){return void 0===t&&(t=ee.a),r=e,i=Object(b.a)(new Q),void 0===(a=t)&&(a=ee.a),function(e){var t=Object(ne.a)(r),n=t?r-a.now():Math.abs(r);return e.lift(new ae(n,t,i,a))};var r,i,a}var se=n(171);var ce=n(173),le=n(104),fe=n(14);var de={EXPIRED:"expired",INTERNAL_ERROR:"internal-error",OUTPUT_RESTRICTED:"output-restricted"};function pe(e){var r="function"==typeof Map?new Map:void 0;return(pe=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return he(e,arguments,be(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ve(n,e)})(e)}function he(e,t,n){return(he=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ve(i,n.prototype),i}).apply(null,arguments)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=a.a.onKeyError$,ge=a.a.onKeyMessage$,ye=a.a.onKeyStatusesChange$,_e=function(n){var e,t;function r(e){var t;return t=n.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),r.prototype),t.sessionError=e,t}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(pe(Error));function Oe(e){if(e instanceof Q)return new T.a("KEY_LOAD_TIMEOUT","The license server took too much time to respond.");var t=new T.a("KEY_LOAD_ERROR","An error occured when calling `getLicense`.");return null!=e&&Object(Y.a)(e.message)&&(t.message=e.message),t}function Ee(e,t){var n,s,c,l,r,f,i=(n=e,c=[],l=[],r=(s=t).fallbackOn,f=void 0===r?{}:r,n.keyStatuses.forEach(function(e,t){var n="string"==typeof e?[e,t]:[t,e],r=n[0],i=n[1];switch(r){case de.EXPIRED:var a=new T.a("KEY_STATUS_CHANGE_ERROR","A decryption key expired");if(!1!==s.throwOnLicenseExpiration)throw a;c.push({type:"warning",value:a});break;case de.INTERNAL_ERROR:var o=new T.a("KEY_STATUS_CHANGE_ERROR","An invalid key status has been encountered: "+r);if(!0!==f.keyInternalError)throw o;c.push({type:"warning",value:o}),l.push(i);case de.OUTPUT_RESTRICTED:var u=new T.a("KEY_STATUS_CHANGE_ERROR","An invalid key status has been encountered: "+r);if(!0!==f.keyOutputRestricted)throw u;c.push({type:"warning",value:u}),l.push(i)}}),[c,l]),a=i[0],o=i[1],u=0<a.length?y.a.apply(void 0,a):g.a,d=0<o.length?Object(y.a)({type:"blacklist-keys",value:o}):g.a;return Object(O.a)(u,d)}function we(d,p,e){var t,h=e.initData,v=e.initDataType;S.a.debug("EME: Binding session events",d);var n,r,i=new Z.a,a=p.getLicenseConfig,b=void 0===a?{}:a,m={totalRetry:null!=(t=b.retry)?t:2,baseDelay:200,maxDelay:3e3,shouldRetry:function(e){return e instanceof Q||null==e||!0!==e.noRetry},onRetry:function(e){return i.next({type:"warning",value:Oe(e)})}},o=me(d).pipe(Object(w.a)(function(e){throw new T.a("KEY_ERROR",e.type)})),u=ye(d).pipe(Object(E.a)(function(e){S.a.debug("EME: keystatuseschange event",d,e);var t=Ee(d,p),n=Object(N.a)(function(){return"function"==typeof p.onKeyStatusesChange?Object(x.a)(p.onKeyStatusesChange(e,d)):g.a},void 0).pipe(Object(w.a)(function(e){return{type:"key-status-change-handled",value:{session:d,license:e}}}),Object(j.a)(function(e){var t=new T.a("KEY_STATUS_CHANGE_ERROR","Unknown `onKeyStatusesChange` error");throw null!=e&&Object(Y.a)(e.message)&&(t.message=e.message),t}));return Object(O.a)(t,n)})),s=ge(d).pipe(Object(E.a)(function(e){var n=new Uint8Array(e.message),r=Object(Y.a)(e.messageType)?e.messageType:"license-request";S.a.debug("EME: Event message type "+r,d,e);var t,i,a,o,u,s,c,l,f=Object(A.a)(function(){var e=p.getLicense(n,r),t=null!=b.timeout?b.timeout:1e4;return Object(x.a)(e).pipe(0<=t?ue(t):J.a)});return(t=f,a=(i=m).baseDelay,o=i.maxDelay,u=i.totalRetry,s=i.shouldRetry,c=i.onRetry,l=0,t.pipe(Object(j.a)(function(e,t){if(!Object(fe.a)(s)&&!s(e)||l++>=u)throw e;"function"==typeof c&&c(e,l);var n=Math.min(a*Math.pow(2,l-1),o),r=Object(le.a)(n);return Object(z.a)(r).pipe(Object(E.a)(function(){return t}))}))).pipe(Object(w.a)(function(e){return{type:"key-message-handled",value:{session:d,license:e}}}),Object(j.a)(function(e){var t=Oe(e);if(null!=e&&!0===e.fallbackOnLastTry)throw S.a.warn("EME: Last `getLicense` attempt failed. Blacklisting the current session."),new _e(t);throw t}),Object(se.a)({type:"session-message",value:{messageType:r,initData:h,initDataType:v}}))})),c=Object(_.a)(s,u).pipe((n=function(e){switch(e.type){case"warning":case"blacklist-keys":case"session-message":return Object(y.a)(e)}var t=e.value.license;return null==t?(S.a.info("EME: No license given, skipping session.update"),Object(y.a)({type:"no-update",value:{initData:h,initDataType:v}})):(S.a.debug("EME: Update session",e),Object(x.a)(d.update(t)).pipe(Object(j.a)(function(e){var t=e instanceof Error?e.toString():"`session.update` failed";throw new T.a("KEY_UPDATE_ERROR",t)}),Object(M.a)({type:"session-updated",value:{session:d,license:t,initData:h,initDataType:v}})))},Object(E.a)(n,r,1))),l=Object(_.a)(Ee(d,p),c,o,i);return null!=d.closed?l.pipe(Object(ce.a)(Object(x.a)(d.closed))):l}function je(e,t){return"function"==typeof e.setServerCertificate?(S.a.debug("EME: Setting server certificate on the MediaKeys"),(n=e,r=t,Object(A.a)(function(){return Object(x.a)(n.setServerCertificate(r)).pipe(Object(j.a)(function(e){S.a.warn("EME: mediaKeys.setServerCertificate returned an error",e);var t=e instanceof Error?e.toString():"`setServerCertificate` error";throw new T.a("LICENSE_SERVER_CERTIFICATE_ERROR",t)}))})).pipe(Object(m.a)(),Object(j.a)(function(e){return Object(y.a)({type:"warning",value:e})}))):(S.a.warn("EME: Could not set the server certificate. mediaKeys.setServerCertificate is not a function"),g.a);var n,r}var Te=function(){function e(){this._namedTypeData={},this._unnamedTypeData={}}var t=e.prototype;return t.get=function(e,t){if(!Object(Y.a)(e))return this._unnamedTypeData[Object(V.a)(t)];var n=this._namedTypeData[e];return null!=n?n[Object(V.a)(t)]:void 0},t.set=function(e,t,n){var r=Object(V.a)(t);if(Object(Y.a)(e)){var i,a=this._namedTypeData[e];if(null==a)this._namedTypeData[e]=((i={})[r]=n,i);else a[r]=n}else this._unnamedTypeData[r]=n},t.remove=function(e,t){if(Object(Y.a)(e)){if(!this._namedTypeData.hasOwnProperty(e))return!1;var n=this._namedTypeData[e],r=Object(V.a)(t);return!!n.hasOwnProperty(r)&&(delete n[r],!0)}var i=Object(V.a)(t);return!!this._unnamedTypeData.hasOwnProperty(i)&&(delete this._unnamedTypeData[i],!0)},e}(),Se=a.a.onEncrypted$;var Ae=n(147);n.d(t,"clearEMESession",function(){return r.a}),n.d(t,"disposeEME",function(){return i.a}),n.d(t,"getCurrentKeySystem",function(){return Ae.a});t.default=function(e,t,n){S.a.debug("EME: Starting EMEManager logic.");var h=new Te,v=new Te,r=X(e,t).pipe(Object(s.a)()),i=r.pipe(Object(c.a)(function(e){return"attached-media-keys"===e.type}),Object(l.a)(1)),a=Se(e).pipe(Object(f.a)(function(e){S.a.debug("EME: Encrypted event received from media element.",e)}),Object(E.a)(function(e){var t=Object(d.a)(e),n=t.initData,r=t.initDataType;return null==n?g.a:Object(y.a)({type:r,data:n})}),Object(s.a)({refCount:!0})),o=n.pipe(Object(f.a)(function(e){S.a.debug("EME: Encrypted event received from Player",e)})),u=Object(_.a)(o,a).pipe(Object(E.a)(function(t){return i.pipe(Object(w.a)(function(e){return[t,e]}))}),Object(E.a)(function(e,t){var n=e[0],r=e[1].value,i=r.keySystemOptions,a=r.mediaKeys,o=i.serverCertificate,u=n.type,s=n.data,c=v.get(u,s);if(null!=c){if(null!=u)return S.a.warn("EME: The current session has already been blacklisted. Blacklisting content."),Object(y.a)({type:"blacklist-protection-data",value:{type:u,data:s}});S.a.error("EME: The current session has already been blacklisted but the current content is not known. Throwing.");var l=c.sessionError;return l.fatal=!0,Object(b.a)(l)}if(!0===h.get(u,s))return S.a.debug("EME: Init data already received. Skipping it."),Object(y.a)({type:"init-data-ignored",value:{type:u,data:s}});h.set(u,s,!0);var f,d,p=(f=n,d=r,Object(A.a)(function(){var r=f.type,i=f.data,e=null,a=d.sessionsStore,t=a.get(i,r);if(null!=t){if(k(e=t.session))return S.a.debug("EME: Reuse loaded session",e.sessionId),Object(y.a)({type:"loaded-open-session",value:{mediaKeySession:e,sessionType:t.sessionType,initData:i,initDataType:r}});null!=d.sessionStorage&&d.sessionStorage.delete(new Uint8Array(i),r)}return(null!=e?a.deleteAndCloseSession(e):Object(y.a)(null)).pipe(Object(E.a)(function(){var e=[],t=a.getAll().slice();if(0<I&&I<=t.length)for(var n=0;n<I-t.length+1;n++)e.push(a.deleteAndCloseSession(t[n].session));return Object(O.a)(_.a.apply(void 0,e).pipe(Object(m.a)()),R(i,r,d).pipe(Object(w.a)(function(e){return{type:e.type,value:{mediaKeySession:e.value.mediaKeySession,sessionType:e.value.sessionType,initData:i,initDataType:r}}})))}))})).pipe(Object(w.a)(function(e){return{type:e.type,value:{initData:e.value.initData,initDataType:e.value.initDataType,mediaKeySession:e.value.mediaKeySession,sessionType:e.value.sessionType,keySystemOptions:r.keySystemOptions,sessionStorage:r.sessionStorage}}}));return 0===t?Object(_.a)(null!=o?Object(O.a)(je(a,o),p):p):p}),Object(E.a)(function(e){switch(e.type){case"warning":case"blacklist-protection-data":case"init-data-ignored":return Object(y.a)(e)}var t=e.value,n=t.initData,r=t.initDataType,i=t.mediaKeySession,a=t.sessionType,o=t.keySystemOptions,u=t.sessionStorage,s="created-session"!==e.type?g.a:Object(p.a)(i,n,r).pipe(Object(f.a)(function(){"persistent-license"===a&&null!=u&&u.add(n,r,i)}),Object(j.a)(function(e){throw new T.a("KEY_GENERATE_REQUEST_ERROR",e instanceof Error?e.toString():"Unknown error")}),Object(m.a)());return Object(_.a)(we(i,o,{initData:n,initDataType:r}),s).pipe(Object(j.a)(function(e){if(!(e instanceof _e))throw e;v.set(r,n,e);var t=e.sessionError;if(null==r)throw S.a.error("EME: Current session blacklisted and content not known. Throwing."),t.fatal=!0,t;return S.a.warn("EME: Current session blacklisted. Blacklisting content."),Object(y.a)({type:"warning",value:t},{type:"blacklist-protection-data",value:{type:r,data:n}})}))}));return Object(_.a)(r,a.pipe(Object(w.a)(function(e){return{type:"encrypted-event-received",value:e}})),u)}},function(e,t,n){"use strict";function r(e){return e}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(95);function i(){return Object(r.a)(1)}},function(e,t,n){"use strict";(function(t){function r(){}var n,i="pending",a="settled",o="fulfilled",u="rejected",s=void 0!==t&&void 0!==t.process&&"function"==typeof t.process.emit,c="undefined"==typeof setImmediate?setTimeout:setImmediate,l=[];function f(){for(var e=0;e<l.length;e++)l[e][0](l[e][1]);n=!(l=[])}function d(e,t){l.push([e,t]),n||(n=!0,c(f,0))}function p(e,t){function n(e){g(t,e)}try{e(function(e){b(t,e)},n)}catch(e){n(e)}}function h(e){var t=e.owner,n=t._state,r=t._data,i=e[n],a=e.then;if("function"==typeof i){n=o;try{r=i(r)}catch(e){g(a,e)}}v(a,r)||(n===o&&b(a,r),n===u&&g(a,r))}function v(t,n){var r;try{if(t===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"==typeof n)){var e=n.then;if("function"==typeof e)return e.call(n,function(e){r||(r=!0,n===e?m(t,e):b(t,e))},function(e){r||(r=!0,g(t,e))}),!0}}catch(e){return r||g(t,e),!0}return!1}function b(e,t){e!==t&&v(e,t)||m(e,t)}function m(e,t){e._state===i&&(e._state=a,e._data=t,d(_,e))}function g(e,t){e._state===i&&(e._state=a,e._data=t,d(O,e))}function y(e){e._then=e._then.forEach(h)}function _(e){e._state=o,y(e)}function O(e){e._state=u,y(e),!e._handled&&s&&t.process.emit("unhandledRejection",e._data,e)}function E(e){t.process.emit("rejectionHandled",e)}function w(e){if("function"!=typeof e)throw new TypeError("Promise resolver "+e+" is not a function");if(this instanceof w==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],p(e,this)}w.prototype={constructor:w,_state:i,_then:null,_data:void 0,_handled:!1,then:function(e,t){var n={owner:this,then:new this.constructor(r),fulfilled:e,rejected:t};return!t&&!e||this._handled||(this._handled=!0,this._state===u&&s&&d(E,this)),this._state===o||this._state===u?d(h,n):this._then.push(n),n.then},catch:function(e){return this.then(null,e)}},w.all=function(u){if(!Array.isArray(u))throw new TypeError("You must pass an array to Promise.all().");return new w(function(n,e){var r=[],i=0;function t(t){return i++,function(e){r[t]=e,--i||n(r)}}for(var a,o=0;o<u.length;o++)(a=u[o])&&"function"==typeof a.then?a.then(t(o),e):r[o]=a;i||n(r)})},w.race=function(i){if(!Array.isArray(i))throw new TypeError("You must pass an array to Promise.race().");return new w(function(e,t){for(var n,r=0;r<i.length;r++)(n=i[r])&&"function"==typeof n.then?n.then(e,t):e(n)})},w.resolve=function(t){return t&&"object"==typeof t&&t.constructor===w?t:new w(function(e){e(t)})},w.reject=function(n){return new w(function(e,t){t(n)})},e.exports=w}).call(this,n(182))},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(37),o=n(64);function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return u(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,e)})(e)}function u(e,t,n){return(u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&s(i,n.prototype),i}).apply(null,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var r=function(r){var e,t;function i(e,t){var n;return n=r.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n),i.prototype),n.name="NetworkError",n.type=a.b.NETWORK_ERROR,n.xhr=void 0===t.xhr?null:t.xhr,n.url=t.url,n.status=t.status,n.errorType=t.type,n.code=e,n.message=Object(o.a)(n.name,n.code,t.message),n.fatal=!1,n}return t=r,(e=i).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,i.prototype.isHttpError=function(e){return this.errorType===a.c.ERROR_HTTP_CODE&&this.status===e},i}(i(Error))},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o});var r=n(1),i={};function a(e,t){var n=t.length+8;return Object(r.i)(Object(r.n)(n),function(e){if(null!=i[e])return i[e];var t=Object(r.r)(e);return i[e]=t}(e),t)}function o(e,t){return a(e,r.i.apply(void 0,t))}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(89),i=n(37),a=n(58),o=n(166),u=n(67);function s(e){return(e instanceof r.a||e instanceof a.a||e instanceof u.a||e instanceof o.a)&&0<=Object.keys(i.b).indexOf(e.type)}},function(e,t,n){var f=n(154),d=n(191),i=n(192),p=n(193),h=n(197),v=n(199),b=Date.prototype.getTime;function m(e,t,n){var r=n||{};return!(r.strict?!i(e,t):e!==t)||(!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?i(e,t):e==t:function(e,t,n){var r,i;if(typeof e!=typeof t)return!1;if(g(e)||g(t))return!1;if(e.prototype!==t.prototype)return!1;if(d(e)!==d(t))return!1;var a=p(e),o=p(t);if(a!==o)return!1;if(a||o)return e.source===t.source&&h(e)===h(t);if(v(e)&&v(t))return b.call(e)===b.call(t);var u=y(e),s=y(t);if(u!==s)return!1;if(u||s){if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}if(typeof e!=typeof t)return!1;try{var c=f(e),l=f(t)}catch(e){return!1}if(c.length!==l.length)return!1;for(c.sort(),l.sort(),r=c.length-1;0<=r;r--)if(c[r]!=l[r])return!1;for(r=c.length-1;0<=r;r--)if(i=c[r],!m(e[i],t[i],n))return!1;return!0}(e,t,r))}function g(e){return null==e}function y(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length)&&("function"==typeof e.copy&&"function"==typeof e.slice&&!(0<e.length&&"number"!=typeof e[0]))}e.exports=m},function(e,t,n){"use strict";var a=n(4),r=n(44),i=function(r){function e(e,t){var n=r.call(this,e,t)||this;return n.scheduler=e,n.work=t,n}return a.a(e,r),e.prototype.schedule=function(e,t){return void 0===t&&(t=0),0<t?r.prototype.schedule.call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,t){return 0<t||this.closed?r.prototype.execute.call(this,e,t):this._execute(e,t)},e.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&0<n||null===n&&0<this.delay?r.prototype.requestAsyncId.call(this,e,t,n):e.flush(this)},e}(n(81).a),o=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a.a(t,e),t}(n(80).a))(i),u=n(20),s=n(8),c=n(73);var l=function(i){function t(e,t,n){void 0===n&&(n=0);var r=i.call(this,e)||this;return r.scheduler=t,r.delay=n,r}return a.a(t,i),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new f(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(c.a.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(c.a.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(c.a.createComplete()),this.unsubscribe()},t}(s.a),f=function(){return function(e,t){this.notification=e,this.destination=t}}(),d=n(55),p=n(100);n.d(t,"a",function(){return h});var h=function(i){function e(e,t,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY);var r=i.call(this)||this;return r.scheduler=n,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=e<1?1:e,r._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return a.a(e,i),e.prototype.nextInfiniteTimeWindow=function(e){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),i.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new v(this._getNow(),e)),this._trimBufferThenGetEvents(),i.prototype.next.call(this,e)},e.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new d.a;if(t=this.isStopped||this.hasError?u.a.EMPTY:(this.observers.push(e),new p.a(this,e)),i&&e.add(e=new l(e,i)),n)for(var o=0;o<a&&!e.closed;o++)e.next(r[o]);else for(o=0;o<a&&!e.closed;o++)e.next(r[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},e.prototype._getNow=function(){return(this.scheduler||o).now()},e.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,a=0;a<i&&!(e-r[a].time<n);)a++;return t<i&&(a=Math.max(a,i-t)),0<a&&r.splice(0,a),r},e}(r.a),v=function(){return function(e,t){this.time=e,this.value=t}}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(127),i=n(48);function a(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return Object(i.a)(n)?(t.pop(),function(e){return Object(r.a)(t,e,n)}):function(e){return Object(r.a)(t,e)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(4),r=n(8);function a(t){return function(e){return e.lift(new o(t))}}var o=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.value))},e}(),u=function(r){function e(e,t){var n=r.call(this,e)||this;return n.value=t,n}return i.a(e,r),e.prototype._next=function(e){this.destination.next(this.value)},e}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(4),i=n(28),a=n(27);function o(t){return function(e){return e.lift(new u(t))}}var u=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new s(e),r=Object(a.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),s=function(n){function e(e){var t=n.call(this,e)||this;return t.seenValue=!1,t}return r.a(e,n),e.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},e.prototype.notifyComplete=function(){},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var h=n(170);function r(e,t,n){var p;return p=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift((i=(t=p).bufferSize,a=void 0===i?Number.POSITIVE_INFINITY:i,o=t.windowTime,u=void 0===o?Number.POSITIVE_INFINITY:o,s=t.refCount,c=t.scheduler,l=0,d=f=!1,function(e){l++,n&&!f||(f=!1,n=new h.a(a,u,c),r=e.subscribe({next:function(e){n.next(e)},error:function(e){f=!0,n.error(e)},complete:function(){d=!0,n.complete()}}));var t=n.subscribe(this);this.add(function(){l--,t.unsubscribe(),r&&!d&&s&&0===l&&(r.unsubscribe(),n=r=void 0)})}));var t,n,r,i,a,o,u,s,c,l,f,d}}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(4),i=n(8);function a(t,n){return function(e){return e.lift(new o(t,n))}}var o=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.predicate,this.thisArg))},e}(),u=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.predicate=t,r.thisArg=n,r.count=0,r}return r.a(e,i),e.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(47);function i(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?Object(r.a)(function(){return e},t,n):("number"==typeof t&&(n=t),Object(r.a)(function(){return e},n))}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(88),i=n(116),a=n(44);function o(){return new a.a}function u(){return function(e){return Object(i.a)()(Object(r.a)(o)(e))}}},,,,,function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var T=n(1);t.default=function(e){var t=0,n=e.length,r=Object(T.g)(e.subarray(t,t+8)),i=e[t+=8],a=e[t+=1],o=e[t+=1],u=e[t+=1];t+=1;var s=[i,a,o,u].join("."),c=e[t]+Object(T.q)(e,t+1);t+=4;var l=Object(T.q)(e,t);t+=4;var f=Object(T.g)(e.subarray(t,t+4));t+=4;var d=Object(T.p)(e,t);t+=2;var p=Object(T.p)(e,t),h=[e[t+=2],e[t+1]].join(":"),v=1===e[t+=2];t+=1,t=64;var b,m=[],g=0;if(0===c)throw new Error("bif: no images to parse");for(;t<n;){var y=Object(T.q)(e,t);t+=4;var _=Object(T.q)(e,t);if(t+=4,null!=b){var O=b.index,E=l,w=g,j=e.subarray(b.offset,_);m.push({index:O,duration:E,ts:w,data:j}),g+=l}if(4294967295===y)break;b={index:y,offset:_}}return{fileFormat:r,version:s,imageCount:c,timescale:l,format:f,width:d,height:p,aspectRatio:h,isVod:v,thumbs:m}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(1);function r(e){var t=Object(a.p)(e,8),n=Object(a.h)(e.subarray(10,t+10)),r=(new DOMParser).parseFromString(n,"application/xml").querySelector("KID");if(null===r)throw new Error("Cannot parse PlayReady private data: invalid XML");var i=null===r.textContent?"":r.textContent;return Object(a.j)(atob(i)).toLowerCase()}},function(e,t,n){"use strict";n.r(t);var b=n(111),m=n(35),g=n(2),y=/&#([0-9]+);/g,_=/<br>/gi,O=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,E=/\s*<p class=([^>]+)>(.*)/i,w=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;t.default=function(e,o,t){var n,r,i=/<sync[ >]/gi,a=/<sync[ >]|<\/body>/gi,u=[],s=e.match(O),c=null!==s?s[1]:"";a.exec(e);var l=function(e){for(var t,n,r,i=/\.(\S+)\s*{([^}]*)}/gi,a={},o=i.exec(e);Array.isArray(o);){var u=o[1],s=(t=o[2],n="lang",r=t.match(new RegExp("\\s*"+n+":\\s*(\\S+);","i")),Array.isArray(r)?r[1]:null);null!=u&&null!=s&&(a[s]=u),o=i.exec(e)}return a}(c),f=Object(g.a)(t)?l[t]:void 0;for(Object(m.b)(Object(g.a)(f),"sami: could not find lang "+t+" in CSS");n=i.exec(e),r=a.exec(e),null!==n||null!==r;){if(null===n||null===r||n.index>=r.index)throw new Error("parse error");var d=e.slice(n.index,r.index),p=d.match(w);if(null===p)throw new Error("parse error (sync time attribute)");var h=+p[1];if(isNaN(h))throw new Error("parse error (sync time attribute NaN)");v(d.split("\n"),h/1e3)}return function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.start,a=r.end,o=r.text;if(Object(g.a)(o)&&null!=a){var u=Object(b.a)(i,a,o);null!=u&&t.push(u)}}return t}(u);function v(e,t){for(var n,r=e.length;0<=--r;)if(null!==(n=e[r].match(E))){var i=n[1],a=n[2];f===i&&("&nbsp;"===a?u[u.length-1].end=t:u.push({text:a.replace(_,"\n").replace(y,function(e,t){return String.fromCharCode(t)}),start:t+o}))}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var p=n(111),h=n(122),v=n(123);function r(e,t){for(var n,r,i,a,o,u=e.split(/\r\n|\n|\r/),s=Object(h.a)(u),c=[],l=0;l<s.length;l++){var f=Object(v.a)(s[l],t);if(null!==f){var d=(a=void 0,r=(n=f).start,i=n.end,a=n.payload,o=a.join("\n"),Object(p.a)(r,i,o));null!==d&&c.push(d)}}return c}},function(e,t,n){"use strict";n.r(t);var g=n(35),y=n(2),_=/&#([0-9]+);/g,O=/<br>/gi,E=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,w=/\s*<p class=([^>]+)>(.*)/i,j=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;t.default=function(e,d,t){var n,r,i=/<sync[ >]/gi,a=/<sync[ >]|<\/body>/gi,p=[],o=e.match(E),u=Array.isArray(o)?o[1]:"";a.exec(e);var s,c=function(e){for(var t,n,r,i=/\.(\S+)\s*{([^}]*)}/gi,a={},o=i.exec(e);null!==o;){var u=o[1],s=(t=o[2],n="lang",r=t.match(new RegExp("\\s*"+n+":\\s*(\\S+);","i")),Array.isArray(r)?r[1]:null);null!=u&&null!=s&&(a[s]=u),o=i.exec(e)}return a}(u),h=null===(s=/p\s*{([^}]*)}/gi.exec(u))?"":s[1],v=Object(y.a)(t)?c[t]:void 0;for(Object(g.b)(Object(y.a)(v),"sami: could not find lang "+t+" in CSS");n=i.exec(e),r=a.exec(e),null!==n||null!==r;){if(null===n||null===r||n.index>=r.index)throw new Error("parse error");var l=e.slice(n.index,r.index),f=l.match(j);if(!Array.isArray(f))throw new Error("parse error (sync time attribute)");var b=+f[1];if(isNaN(b))throw new Error("parse error (sync time attribute NaN)");m(l.split("\n"),b/1e3)}return p;function m(e,t){for(var n=e.length;0<=--n;){var r=e[n].match(w);if(Array.isArray(r)){var i=r[1],a=r[2];if(v===i)if("&nbsp;"===a)p[p.length-1].end=t;else{var o=document.createElement("DIV");o.className="rxp-texttrack-region";var u=document.createElement("DIV");u.className="rxp-texttrack-div",u.style.position="absolute",u.style.bottom="0",u.style.width="100%",u.style.color="#fff",u.style.textShadow="-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000";var s=document.createElement("div");s.className="rxp-texttrack-p",Object(y.a)(h)&&(s.style.cssText=h);for(var c=a.split(O),l=0;l<c.length;l++){0!==l&&s.appendChild(document.createElement("BR"));var f=document.createElement("SPAN");f.className="rxp-texttrack-span",f.textContent=c[l].replace(_,function(e,t){return String.fromCharCode(t)}),s.appendChild(f)}u.appendChild(s),o.appendChild(u),p.push({element:o,start:t+d,end:-1})}}}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var s=n(122),c=n(123);function r(e,t){for(var n=e.split(/\r\n|\n|\r/),r=Object(s.a)(n),i=[],a=0;a<r.length;a++){var o=Object(c.a)(r[a],t);if(null!=o){var u=l(o);null!=u&&i.push(u)}}return i}function l(e){var t=e.start,n=e.end,r=e.payload,i=document.createElement("div");i.className="rxp-texttrack-p",i.style.fontSize="28px",i.style.position="absolute",i.style.bottom="5%",i.style.width="100%",i.style.textAlign="center",i.style.color="#fff",i.style.textShadow="-1px -1px 2px #000,1px -1px 2px #000,-1px 1px 2px #000,1px 1px 2px #000";for(var a=0;a<r.length;a++){0!==a&&i.appendChild(document.createElement("br"));var o=u(r[a]);i.appendChild(o)}return{start:t,end:n,element:i}}function u(e){var t=document.createElement("div");t.innerHTML=e;return function e(t){var n=t.childNodes,r=document.createElement("span");r.className="rxp-texttrack-span";for(var i=0;i<n.length;i++){var a=n[i];if("#text"===a.nodeName){for(var o=a.wholeText.split("\n"),u=0;u<o.length;u++)if(0!==u&&r.appendChild(document.createElement("br")),0<o[u].length){var s=document.createTextNode(o[u]);r.appendChild(s)}}else if("B"===a.nodeName){var c=e(a);c.style.fontWeight="bold",r.appendChild(c)}else if("I"===a.nodeName){var l=e(a);l.style.fontStyle="italic",r.appendChild(l)}else if("U"===a.nodeName){var f=e(a);f.style.textDecoration="underline",r.appendChild(f)}else if("FONT"===a.nodeName&&null!=a.color){var d=e(a);d.style.color=a.color,r.appendChild(d)}else{var p=e(a);r.appendChild(p)}}return r}(t)}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return r});var y=n(54),_=n(90),O=n(26),E=n(83),w=n(47),j=n(215),T=n(177),S=n(31),A=n(175),x=n(130),k=n(176),R=n(141),I=n(85),M=n(134),N=n(58),C=n(0),D=n(115),P=n(29),B=n(119),L=n(113),U=n(120),F=n(117),$=n(118);function r(e){var t=e.autoPlay,n=e.clock$,r=e.keySystems,i=e.mediaElement,a=e.speed$,o=e.startAt,u=e.url;if(Object(I.a)(i),null==u)throw new Error("No URL for a DirectFile content");var s=Object(M.a)(i,u);C.a.debug("Init: Calculating initial time");function c(){return function(e,t){if(null==t)return 0;if(null!=t.position)return t.position;if(null!=t.wallClockTime)return t.wallClockTime;if(null!=t.fromFirstPosition)return t.fromFirstPosition;var n=e.duration;if(null==n||!isFinite(n))return C.a.warn("startAt.fromLastPosition set but no known duration, beginning at 0."),0;if("number"==typeof t.fromLastPosition)return Math.max(0,n+t.fromLastPosition);if(null==t.percentage)return 0;var r=t.percentage;return 100<=r?n:r<=0?0:n*(r/100)}(i,o)}C.a.debug("Init: Initial time calculated:",c);var l=Object(L.a)(n,i,c,t),f=l.seek$,d=l.load$,p=s.pipe(Object(w.a)(function(){return Object(D.a)(i,r,y.a)}),Object(j.a)(_.a),Object(T.a)()),h=Object(F.a)(i),v=Object($.a)(i,a,n,{pauseWhenStalled:!0}).pipe(Object(S.a)(P.a.speedChanged)),b=Object(B.a)(n).pipe(Object(S.a)(P.a.stalled)),m=p.pipe(Object(A.a)(U.a),Object(x.a)(1),Object(k.a)(d),Object(w.a)(function(e){if("autoplay-blocked"===e){var t=new N.a("MEDIA_ERR_BLOCKED_AUTOPLAY","Cannot trigger auto-play automatically: your browser does not allow it.");return Object(O.a)(P.a.warning(t),P.a.loaded(null))}if("not-loaded-metadata"!==e)return Object(O.a)(P.a.loaded(null));var n=new N.a("MEDIA_ERR_NOT_LOADED_METADATA","Cannot load automatically: your browser falsely announced having loaded the content.");return Object(O.a)(P.a.warning(n))})),g=f.pipe(Object(R.a)());return Object(E.a)(m,g,p,h,v,b)}},function(e,t,n){"use strict";var r;if(!Object.keys){var d=Object.prototype.hasOwnProperty,p=Object.prototype.toString,h=n(155),i=Object.prototype.propertyIsEnumerable,v=!i.call({toString:null},"toString"),b=i.call(function(){},"prototype"),m=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],g=function(e){var t=e.constructor;return t&&t.prototype===e},a={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},y=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!a["$"+e]&&d.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{g(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===p.call(e),r=h(e),i=t&&"[object String]"===p.call(e),a=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var o=b&&n;if(i&&0<e.length&&!d.call(e,0))for(var u=0;u<e.length;++u)a.push(String(u));if(r&&0<e.length)for(var s=0;s<e.length;++s)a.push(String(s));else for(var c in e)o&&"prototype"===c||!d.call(e,c)||a.push(String(c));if(v)for(var l=function(e){if("undefined"==typeof window||!y)return g(e);try{return g(e)}catch(e){return!1}}(e),f=0;f<m.length;++f)l&&"constructor"===m[f]||!d.call(e,m[f])||a.push(m[f]);return a}}e.exports=r},function(e,t,n){"use strict";function r(e){return!(a&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===o.call(e)}function i(e){return!!r(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Array]"!==o.call(e)&&"[object Function]"===o.call(e.callee)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=Object.prototype.toString,u=function(){return r(arguments)}();r.isLegacyArguments=i,e.exports=u?r:i},function(e,t,n){"use strict";function r(e){return e!=e}e.exports=function(e,t){return 0===e&&0===t?1/e==1/t:e===t||!(!r(e)||!r(t))}},function(e,t,n){"use strict";var r=n(194),i=RegExp.prototype.exec,a=Object.getOwnPropertyDescriptor,o=Object.prototype.toString,u="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!u)return"[object RegExp]"===o.call(e);var t=a(e,"lastIndex");return!(!t||!r(t,"value"))&&function(e){try{var t=e.lastIndex;return e.lastIndex=0,i.call(e),!0}catch(e){return!1}finally{e.lastIndex=t}}(e)}},function(e,t,n){"use strict";var r=n(195);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,n){"use strict";var r=n(196);e.exports=Function.prototype.bind||r},function(e,t,n){"use strict";var s=Array.prototype.slice,c=Object.prototype.toString;e.exports=function(t){var n=this;if("function"!=typeof n||"[object Function]"!==c.call(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var r,i=s.call(arguments,1),e=Math.max(0,n.length-i.length),a=[],o=0;o<e;o++)a.push("$"+o);if(r=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof r){var e=n.apply(this,i.concat(s.call(arguments)));return Object(e)===e?e:this}return n.apply(t,i.concat(s.call(arguments)))}),n.prototype){var u=function(){};u.prototype=n.prototype,r.prototype=new u,u.prototype=null}return r}},function(e,t,n){"use strict";var r=n(132),i=n(156),a=n(157),o=n(198),u=Function.call.bind(i);r(u,{getPolyfill:a,implementation:i,shim:o}),e.exports=u},function(e,t,n){"use strict";var r=n(132).supportsDescriptors,i=n(157),a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,u=TypeError,s=Object.getPrototypeOf,c=/a/;e.exports=function(){if(!r||!s)throw new u("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=i(),t=s(c),n=a(t,"flags");return n&&n.get===e||o(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},function(e,t,n){"use strict";var r=Date.prototype.getDay,i=Object.prototype.toString,a="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){return"object"==typeof e&&null!==e&&(a?function(e){try{return r.call(e),!0}catch(e){return!1}}(e):"[object Date]"===i.call(e))}},function(e,t,n){"use strict";n.r(t);var r=n(169),u=n.n(r),i=n(12),P=n.n(i),W=n(44),x=n(170),a=n(4),o=n(55),g=function(n){function e(e){var t=n.call(this)||this;return t._value=e,t}return a.a(e,n),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var t=n.prototype._subscribe.call(this,e);return t&&!t.closed&&e.next(this._value),t},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){n.prototype.next.call(this,this._value=e)},e}(W.a),V=n(83),H=n(54),K=n(219),B=n(127),Y=n(26),G=n(173),q=n(31),X=n(140),L=n(130),S=n(88);function U(e){return e?Object(S.a)(function(){return new W.a},e):Object(S.a)(new W.a)}var Q=n(175),F=n(177),Z=n(171),$=n(172),s=n(8);var z=function(){function e(e){this.predicate=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate))},e}(),c=function(r){function e(e,t){var n=r.call(this,e)||this;return n.predicate=t,n.skipping=!0,n.index=0,n}return a.a(e,r),e.prototype._next=function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)},e.prototype.tryCallPredicate=function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(e){this.destination.error(e)}},e}(s.a),J=n(227),ee=n(176),A=n(213),l=n(3),te=n(0),R=n(30),ne=n(32),f=n(33),re=n(19),ie=n(23),d=n(7),p=n(91),ae=n(58),h=n(168),v=n(67);function k(e,t){var n=t.defaultCode,r=t.defaultReason;if(Object(h.a)(e))return e;var i=e instanceof Error?e.toString():r;return new v.a(n,i)}var b=n(37),oe=n(10),y=n(146),_=n(147),O=n(145),I=n(90),ue=n(47),M=n(215),se=n(142),m=n(20);function ce(t){return function(e){return e.lift(new E(t))}}var E=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new w(e,this.callback))},e}(),w=function(r){function e(e,t){var n=r.call(this,e)||this;return n.add(new m.a(t)),n}return a.a(e,r),e}(s.a),le=n(128),N=n(9);var j=n(15),T=function(){function e(e){this._alpha=Math.exp(Math.log(.5)/e),this._lastEstimate=0,this._totalWeight=0}var t=e.prototype;return t.addSample=function(e,t){var n=Math.pow(this._alpha,e),r=t*(1-n)+n*this._lastEstimate;isNaN(r)||(this._lastEstimate=r,this._totalWeight+=e)},t.getEstimate=function(){var e=1-Math.pow(this._alpha,this._totalWeight);return this._lastEstimate/e},e}(),C=l.a.ABR_MINIMUM_TOTAL_BYTES,D=l.a.ABR_MINIMUM_CHUNK_SIZE,fe=l.a.ABR_FAST_EMA,de=l.a.ABR_SLOW_EMA,pe=function(){function e(){this._fastEWMA=new T(fe),this._slowEWMA=new T(de),this._bytesSampled=0}var t=e.prototype;return t.addSample=function(e,t){if(!(t<D)){var n=8e3*t/e,r=e/1e3;this._bytesSampled+=t,this._fastEWMA.addSample(r,n),this._slowEWMA.addSample(r,n)}},t.getEstimate=function(){if(!(this._bytesSampled<C))return Math.min(this._fastEWMA.getEstimate(),this._slowEWMA.getEstimate())},t.reset=function(){this._fastEWMA=new T(fe),this._slowEWMA=new T(de),this._bytesSampled=0},e}();var he=n(74),ve=n(141),be=n(28),me=n(27);function ge(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(e){var t;"function"==typeof r[r.length-1]&&(t=r.pop());var n=r;return e.lift(new ye(n,t))}}var ye=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new _e(e,this.observables,this.project))},e}(),_e=function(u){function e(e,t,n){var r=u.call(this,e)||this;r.observables=t,r.project=n,r.toRespond=[];var i=t.length;r.values=new Array(i);for(var a=0;a<i;a++)r.toRespond.push(a);for(a=0;a<i;a++){var o=t[a];r.add(Object(me.a)(r,o,o,a))}return r}return a.a(e,u),e.prototype.notifyNext=function(e,t,n,r,i){this.values[n]=t;var a=this.toRespond;if(0<a.length){var o=a.indexOf(n);-1!==o&&a.splice(o,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(e){if(0===this.toRespond.length){var t=[e].concat(this.values);this.project?this._tryProject(t):this.destination.next(t)}},e.prototype._tryProject=function(e){var t;try{t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(be.a);function Oe(n){var t=n.map(function(e){return Math.log(e/n[0])}),r=t.map(function(e){return e-t[0]+1}),i=(r[r.length-1]-1)/(2*n.length+10),a=1/i;return n.map(function(e,t){return function(e){if(0===e)return 0;var t=Math.min(Math.max(1,e),n.length-1);return a*(i+(n[t]*r[t-1]-n[t-1]*r[t])/(n[t]-n[t-1]))+4}(t)})}function Ee(e,t,n){if("function"==typeof Array.prototype.findIndex)return e.findIndex(t,n);for(var r=e.length>>>0,i=0;i<r;i++)if(t.call(n,e[i],i,e))return i;return-1}function we(e,n){var t=Oe(n);return te.a.debug("ABR: Steps for buffer based chooser.",t.map(function(e,t){return{bufferLevel:e,bitrate:n[t]}})),e.pipe(Object(q.a)(function(e){return function(e,t,n){var r=e.bufferGap,i=e.currentBitrate,a=e.currentScore,o=e.speed;if(null==i)return t[0];var u,s=Ee(t,function(e){return e===i});if(s<0||t.length!==n.length)return te.a.error("ABR: Current Bitrate not found in the calculated levels"),t[0];if(null!=a&&(u=0===o?a:a/o),null!=u&&1<u){var c=n[s],l=function(){for(var e=s+1;e<n.length;e++)if(n[e]>c)return e}();if(null!=l)if(n[l]<=r)return t[l]}if((null==u||u<1.15)&&r<n[s]){for(var f=s-1;0<=f;f--)if(t[f]<i)return t[f];return i}return i}(e,n,t)}))}var je=n(11);function Te(e,t){var n=Ee(e,function(e){return e.bitrate>t});return-1===n?e[e.length-1]:e[n-1]}var Se=l.a.ABR_REGULAR_FACTOR,Ae=l.a.ABR_STARVATION_DURATION_DELTA,xe=l.a.ABR_STARVATION_FACTOR,ke=l.a.ABR_STARVATION_GAP,Re=l.a.OUT_OF_STARVATION_GAP;function Ie(e){if(!(e.progress.length<2)){for(var t=new T(2),n=e.progress,r=1;r<n.length;r++){var i=n[r].size-n[r-1].size,a=n[r].timestamp-n[r-1].timestamp,o=8*i/(a/1e3);t.addSample(a/1e3,o)}return t.getEstimate()}}function Me(e,t){var n=8*(e.totalSize-e.size);return Math.max(n/t,0)}function Ne(e,t,n,r){var i=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(0<r.duration)if(t<r.time+r.duration&&-.3<t-r.time)return r}}(e,t.currentTime+t.bufferGap);if(void 0!==i){var a=i.duration,o=performance.now(),u=0<i.progress.length?i.progress[i.progress.length-1]:null,s=Ie(i);if(null!=u&&null!=s){var c=1.2*Me(u,s);if((o-u.timestamp)/1e3<=c&&c>t.bufferGap/t.speed)return s}var l=(o-i.requestTimestamp)/1e3,f=l<=(1.5*a+1)/t.speed;if(null!=n&&!f){var d=a/l,p=n.bitrate*Math.min(.7,d);return null==r||p<r?p:void 0}}}var Ce=function(){function e(e,t){this._initialBitrate=e,this._inStarvationMode=!1,this._config=t?{starvationGap:ke.LOW_LATENCY,outOfStarvationGap:Re.LOW_LATENCY,starvationBitrateFactor:xe.LOW_LATENCY,regularBitrateFactor:Se.LOW_LATENCY}:{starvationGap:ke.DEFAULT,outOfStarvationGap:Re.DEFAULT,starvationBitrateFactor:xe.DEFAULT,regularBitrateFactor:Se.DEFAULT}}var t=e.prototype;return t.getBandwidthEstimate=function(e,t,n,r,i){var a,o,u=this._config,s=e.bufferGap,c=e.currentTime,l=e.duration;return isNaN(l)||s+c<l-Ae?!this._inStarvationMode&&s<=u.starvationGap?(te.a.info("ABR: enter starvation mode."),this._inStarvationMode=!0):this._inStarvationMode&&s>=u.outOfStarvationGap&&(te.a.info("ABR: exit starvation mode."),this._inStarvationMode=!1):this._inStarvationMode&&(te.a.info("ABR: exit starvation mode."),this._inStarvationMode=!1),this._inStarvationMode&&null!=(o=Ne(r,e,n,i))&&(te.a.info("ABR: starvation mode emergency estimate:",o),t.reset(),a=null==n?o:Math.min(o,n.bitrate)),null==a&&(a=null!=(o=t.getEstimate())?o*(this._inStarvationMode?u.starvationBitrateFactor:u.regularBitrateFactor):null!=i?i*(this._inStarvationMode?u.starvationBitrateFactor:u.regularBitrateFactor):this._initialBitrate),1<e.speed&&(a/=e.speed),{bandwidthEstimate:o,bitrateChosen:a}},t.isUrgent=function(e,t,n,r){return null==t||e!==t.bitrate&&(e>t.bitrate?!this._inStarvationMode:function(e,t,n){var r=e.currentTime+e.bufferGap,i=Object(je.a)(t,function(e){return e.time+e.duration>r});if(void 0===i)return!0;var a=performance.now(),o=0<i.progress.length?i.progress[i.progress.length-1]:null,u=Ie(i);if(null==o||null==u)return!0;var s=Me(o,u);return!((a-o.timestamp)/1e3<=1.2*s&&s<e.bufferGap/e.speed+n)}(r,n,this._config.starvationGap))},e}(),De=n(77),Pe=function(){function e(){this._currentRequests={}}var t=e.prototype;return t.add=function(e){var t=e.id,n=e.time,r=e.duration,i=e.requestTimestamp;null==this._currentRequests[t]?this._currentRequests[t]={time:n,duration:r,requestTimestamp:i,progress:[]}:te.a.warn("ABR: request already added.")},t.addProgress=function(e){var t=this._currentRequests[e.id];null!=t?t.progress.push(e):te.a.warn("ABR: progress for a request not added")},t.remove=function(e){null==this._currentRequests[e]&&te.a.warn("ABR: can't remove unknown request"),delete this._currentRequests[e]},t.getRequests=function(){return Object(De.a)(this._currentRequests).filter(function(e){return null!=e}).sort()},e}(),Be=function(){function e(){this._currentRepresentationData=null,this._lastRepresentationWithGoodScore=null}var t=e.prototype;return t.addSample=function(e,t,n){var r,i=n/t,a=this._getEWMA(e);null!=a?(r=a).addSample(t,i):((r=new T(5)).addSample(t,i),this._currentRepresentationData={representation:e,ewma:r}),1<r.getEstimate()&&this._lastRepresentationWithGoodScore!==e&&(te.a.debug("ABR: New last stable representation",e),this._lastRepresentationWithGoodScore=e)},t.getEstimate=function(e){var t=this._getEWMA(e);if(null!=t)return t.getEstimate()},t.getLastStableRepresentation=function(){return this._lastRepresentationWithGoodScore},t._getEWMA=function(e){return null!=this._currentRepresentationData&&this._currentRepresentationData.representation.id===e.id?this._currentRepresentationData.ewma:null},e}();function Le(e,t){var n,r,i,a=e;return null!=t.bitrate&&(n=a,r=t.bitrate,a=-1===(i=Ee(n,function(e){return e.bitrate>r}))?n:n.slice(0,i)),null!=t.width&&(a=function(e,t){var n=e.slice().sort(function(e,t){return Object(j.a)(e.width,0)-Object(j.a)(t.width,0)}),r=Object(je.a)(n,function(e){return"number"==typeof e.width&&e.width>=t});if(void 0===r)return e;var i="number"==typeof r.width?r.width:0;return e.filter(function(e){return"number"!=typeof e.width||e.width<=i})}(a,t.width)),a}function Ue(e){var E=e.bandwidthEstimator,i=e.bufferEvents$,a=e.clock$,o=e.filters$,t=e.initialBitrate,n=e.lowLatencyMode,r=e.manualBitrate$,u=e.maxAutoBitrate$,w=e.representations,j=new Be,T=new Ce(null==t?0:t,n),S=new Pe;var s=i.pipe(Object(Q.a)(function(e){return"metrics"===e.type}),Object(se.a)(function(e){return function(e){var t=e.duration,n=e.size,r=e.content;E.addSample(t,n);var i=r.segment;if(null!=i.duration){var a=t/1e3,o=i.duration/i.timescale,u=r.representation;j.addSample(u,a,o)}}(e.value)}),Object(ve.a)()),c=i.pipe(Object(se.a)(function(e){switch(e.type){case"requestBegin":S.add(e.value);break;case"requestEnd":S.remove(e.value.id);break;case"progress":S.addProgress(e.value)}}),Object(ve.a)()),l=i.pipe(Object(Q.a)(function(e){return"representationChange"===e.type}),Object(q.a)(function(e){return e.value.representation}),Object(Z.a)(null)),f=Object(he.a)(function(){if(0===w.length)throw new Error("ABRManager: no representation choice given");return 1===w.length?Object(Y.a)({bitrate:void 0,representation:w[0],manual:!1,urgent:!0,knownStableBitrate:void 0}):r.pipe(Object(le.a)(function(e){if(0<=e){var t=void 0!==(n=Te(w,e))?n:w[0];return Object(Y.a)({representation:t,bitrate:void 0,knownStableBitrate:void 0,manual:!0,urgent:!0})}var n,_,O=!0,r=we(i.pipe(Object(Q.a)(function(e){return"added-segment"===e.type}),ge(a),Object(q.a)(function(e){var t=e[0].value,n=e[1],r=n.speed,i=n.currentTime,a=t.buffered,o=Object(re.d)(a,i),u=t.content.representation,s=j.getEstimate(u);return{bufferGap:o,currentBitrate:u.bitrate,currentScore:s,speed:r}})),w.map(function(e){return e.bitrate})).pipe(Object(Z.a)(void 0));return Object(K.a)([a,u,o,r]).pipe(ge(l),Object(q.a)(function(e){var t=e[0],n=t[0],r=t[1],i=t[2],a=t[3],o=e[1],u=Le(w,i),s=S.getRequests(),c=T.getBandwidthEstimate(n,E,o,s,_),l=c.bandwidthEstimate,f=c.bitrateChosen;_=l;var d=j.getLastStableRepresentation(),p=null==d?void 0:d.bitrate/(0<n.speed?n.speed:1),h=n.bufferGap;!O&&h<=5?O=!0:O&&Number.isFinite(h)&&10<h&&(O=!1);var v,b=void 0!==(v=Te(u,Math.min(f,r)))?v:0<u.length?u[0]:w[0];if(O)return te.a.debug("ABR: Choosing representation with bandwith estimation.",b),{bitrate:l,representation:b,urgent:T.isUrgent(b.bitrate,o,s,n),manual:!1,knownStableBitrate:p};if(null==a||b.bitrate>=a)return te.a.debug("ABR: Choosing representation with bandwith estimation.",b),{bitrate:l,representation:b,urgent:T.isUrgent(b.bitrate,o,s,n),manual:!1,knownStableBitrate:p};var m,g=Math.min(a,r),y=void 0!==(m=Te(u,g))?m:0<u.length?u[0]:w[0];return a<=r&&te.a.debug("ABR: Choosing representation with buffer based bitrate ceiling.",y),{bitrate:l,representation:y,urgent:T.isUrgent(a,o,s,n),manual:!1,knownStableBitrate:p}}))}))});return Object(V.a)(s,c,f)}var Fe=function(){function e(e){this._manualBitrates=e.manualBitrates,this._maxAutoBitrates=e.maxAutoBitrates,this._initialBitrates=e.initialBitrates,this._throttlers=e.throttlers,this._bandwidthEstimators={},this._lowLatencyMode=e.lowLatencyMode}var t=e.prototype;return t.get$=function(e,t,n,r){void 0===t&&(t=[]);var i,a,o,u,s=this._getBandwidthEstimator(e),c=Object(j.a)(this._manualBitrates[e],Object(Y.a)(-1)),l=Object(j.a)(this._maxAutoBitrates[e],Object(Y.a)(1/0)),f=Object(j.a)(this._initialBitrates[e],0);return Ue({bandwidthEstimator:s,bufferEvents$:r,clock$:n,filters$:(i=this._throttlers.limitWidth[e],a=this._throttlers.throttleBitrate[e],o=this._throttlers.throttle[e],u=[],null!=i&&u.push(i.pipe(Object(q.a)(function(e){return{width:e}}))),null!=o&&u.push(o.pipe(Object(q.a)(function(e){return{bitrate:e}}))),null!=a&&u.push(a.pipe(Object(q.a)(function(e){return{bitrate:e}}))),0<u.length?Object(K.a)(u).pipe(Object(q.a)(function(e){return P.a.apply(void 0,[{}].concat(e))})):Object(Y.a)({})),initialBitrate:f,manualBitrate$:c,maxAutoBitrate$:l,representations:t,lowLatencyMode:this._lowLatencyMode})},t._getBandwidthEstimator=function(e){var t=this._bandwidthEstimators[e];if(null!=t)return t;te.a.debug("ABR: Creating new BandwidthEstimator for ",e);var n=new pe;return this._bandwidthEstimators[e]=n},e}(),$e=n(36),ze=n(221),We=n(158),Ve=n(131),He=n(104);function Ke(e,t){var o=t.baseDelay,u=t.maxDelay,s=t.maxRetryRegular,c=t.maxRetryOffline,l=0,f=1,d=2,p=0;return e.pipe(Object(q.a)(function(e){return{type:"response",value:e}}),Object(A.a)(function(e,t){if(!((n=e)instanceof Ve.a?n.type===b.c.ERROR_HTTP_CODE?500<=n.status||404===n.status||415===n.status||412===n.status:n.type===b.c.TIMEOUT||n.type===b.c.ERROR_EVENT:Object(h.a)(n)&&"INTEGRITY_ERROR"===n.code))throw e;var n,r=e instanceof Ve.a&&(e.type===b.c.ERROR_EVENT&&Object(We.a)())?d:f;if(r!==p&&(l=0,p=r),++l>(r===d?c:s))throw e;var i=Math.min(o*Math.pow(2,l-1),u),a=Object(He.a)(i);return Object(ze.a)(a).pipe(Object(ue.a)(function(){return t}),Object(Z.a)({type:"retry",value:e}))}))}var Ye=n(166);function Ge(e){return e instanceof Ve.a?new Ye.a("PIPELINE_LOAD_ERROR",e):k(e,{defaultCode:"PIPELINE_LOAD_ERROR",defaultReason:"Unknown error when fetching the Manifest"})}function qe(e,t){var n=t.maxRetry,r=t.maxRetryOffline,i=e.loader,a=null!=e.resolver?e.resolver:Y.a,o={baseDelay:t.baseDelay,maxDelay:t.maxDelay,maxRetryRegular:n,maxRetryOffline:r};return function(e){return(t=e,Object($e.a)(a,t).pipe(Object(A.a)(function(e){throw Ge(e)}))).pipe(Object(ue.a)(function(e){return(t=e,Ke(Object($e.a)(i,t),o).pipe(Object(A.a)(function(e){throw Ge(e)}),Object(q.a)(function(e){return"retry"===e.type?{type:"warning",value:Ge(e.value)}:e.value}))).pipe(Object(ue.a)(function(e){if("warning"===e.type)return Object(Y.a)(e);var t=e.value;return Object(Y.a)({type:"response",value:{responseData:t.responseData,url:t.url,sendingTime:t.sendingTime,receivedTime:t.receivedTime}})}));var t}));var t}}var Xe=l.a.DEFAULT_MAX_MANIFEST_REQUEST_RETRY,Qe=l.a.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,Ze=l.a.INITIAL_BACKOFF_DELAY_BASE,Je=l.a.MAX_BACKOFF_DELAY_BASE;var et=function(e,t,a){var n,r,i,o,u=(r=(n=t).manifestRetry,i=n.offlineRetry,{baseDelay:(o=n.lowLatencyMode)?Ze.LOW_LATENCY:Ze.REGULAR,maxDelay:o?Je.LOW_LATENCY:Je.REGULAR,maxRetry:null!=r?r:Xe,maxRetryOffline:null!=i?i:Qe,lowLatencyMode:o}),s=qe(e.manifest,u),c=e.manifest.parser;function l(e){var t={baseDelay:u.baseDelay,maxDelay:u.maxDelay,maxRetryRegular:u.maxRetry,maxRetryOffline:u.maxRetryOffline};return Ke(Object($e.a)(e,void 0),t).pipe(Object(ue.a)(function(e){return"retry"===e.type?(a.next(Ge(e.value)),H.a):Object(Y.a)(e.value)}),Object(A.a)(function(e){throw Ge(e)}))}return{fetch:function(e){return s({url:e}).pipe(Object(se.a)(function(e){"warning"===e.type&&a.next(e.value)}),Object(Q.a)(function(e){return"response"===e.type}))},parse:function(e,t,n){var i=e.sendingTime;return c({response:e,url:t,externalClockOffset:n,scheduleRequest:l}).pipe(Object(A.a)(function(e){throw k(e,{defaultCode:"PIPELINE_PARSE_ERROR",defaultReason:"Unknown error when parsing the Manifest"})}),Object(q.a)(function(e){for(var t=e.manifest,n=t.parsingErrors,r=0;r<n.length;r++)a.next(n[r]);return{manifest:t,sendingTime:i}}))}}},tt=n(13),nt=function(){function e(){this._cache=new WeakMap}var t=e.prototype;return t.add=function(e,t){var n=e.representation;e.segment.isInit&&this._cache.set(n,t)},t.get=function(e){var t=e.representation;if(e.segment.isInit){var n=this._cache.get(t);if(void 0!==n)return n}return null},e}(),rt=l.a.DEFAULT_MAX_PIPELINES_RETRY_ON_ERROR,it=l.a.DEFAULT_MAX_PIPELINES_RETRY_ON_OFFLINE,at=l.a.INITIAL_BACKOFF_DELAY_BASE,ot=l.a.MAX_BACKOFF_DELAY_BASE;var ut=function(){function e(){this._pendingPriority=null,this._numberOfPendingObservables=0,this._queue=[]}var t=e.prototype;return t.create=function(t,n){var r=this,i=Object(he.a)(function(){if(null==r._pendingPriority||r._pendingPriority>=n)return r._pendingPriority=n,r._startObservable(t);var e=new W.a;return r._queue.push({observable:i,priority:n,trigger:e}),e.pipe(Object(ue.a)(function(){return r._startObservable(t)}))});return i},t.updatePriority=function(t,e){var n=Ee(this._queue,function(e){return e.observable===t});if(!(n<0)){var r=this._queue[n];r.priority=e,(null==this._pendingPriority||this._pendingPriority>=e)&&(this._queue.splice(n,1),r.trigger.next(),r.trigger.complete())}},t._startObservable=function(e){var n=this;return this._numberOfPendingObservables++,e.pipe(ce(function(){if(n._numberOfPendingObservables--,!(0<n._numberOfPendingObservables)&&(n._pendingPriority=null,0!==n._queue.length)){n._pendingPriority=n._queue.reduce(function(e,t){return null==e||e>t.priority?t.priority:e},null);for(var e=0;e<n._queue.length;e++){var t=n._queue[e];t.priority===n._pendingPriority&&(n._queue.splice(e,1),e--,t.trigger.next(),t.trigger.complete())}}}))},e}(),st=n(53),ct=n(212);var lt=n(21);function ft(r,e){var a=e.cache,t=e.maxRetry,n=e.maxRetryOffline,o={baseDelay:e.initialBackoffDelay,maxDelay:e.maximumBackoffDelay,maxRetryRegular:t,maxRetryOffline:n};return function(i){return(n=i,null!=(t=null!=a?a.get(n):null)?Object(lt.a)(t).pipe(Object(q.a)(function(e){return{type:"cache",value:e}}),Object(A.a)(e)):e()).pipe(Object(ue.a)(function(e){var t="data-chunk-complete"===e.type||"data-loaded"===e.type?Object(Y.a)({type:"metrics",value:{size:e.value.size,duration:e.value.duration}}):H.a;switch(e.type){case"warning":return Object(Y.a)(e);case"cache":case"data-created":case"data-loaded":var n=Object(Y.a)({type:"data",value:P()({},i,{responseData:e.value.responseData})});return Object(B.a)(n,t);case"request":case"progress":return Object(Y.a)(e);case"data-chunk":return Object(Y.a)({type:"chunk",value:P()({},i,{responseData:e.value.responseData})});case"data-chunk-complete":var r=Object(Y.a)({type:"chunk-complete",value:null});return Object(B.a)(r,t)}return function(){throw new ct.a("Unreachable path taken")}()}));function e(){var e=Ke(Object($e.a)(r,n),o).pipe(Object(A.a)(function(e){throw Ge(e)}),Object(q.a)(function(e){if("retry"===e.type)return{type:"warning",value:Ge(e.value)};var t=e.value;return"data-loaded"===t.type&&null!=a&&a.add(n,t.value),e.value}));return Object(B.a)(Object(Y.a)({type:"request",value:n}),e)}var n,t}}var dt=Object(st.a)();var pt=function(){function e(e,t){this._transport=e,this._prioritizer=new ut,this._pipelineOptions=t}return e.prototype.createPipeline=function(e,t){var n,r,i,a,o,u,s,f,c,d,p,l,h,v=(n=e,r=this._pipelineOptions,i=r.segmentRetry,a=r.offlineRetry,o=r.lowLatencyMode,{cache:Object(tt.a)(["audio","video"],n)?new nt:void 0,maxRetry:"image"===n?0:null!=i?i:rt,maxRetryOffline:null!=a?a:it,initialBackoffDelay:o?at.LOW_LATENCY:at.REGULAR,maximumBackoffDelay:o?ot.LOW_LATENCY:ot.REGULAR}),b=(u=e,s=this._transport,f=t,c=v,d=ft(s[u].loader,c),p=s[u].parser,function(s){var c=dt(),l=!1;return d(s).pipe(Object(se.a)(function(e){switch(e.type){case"metrics":var t=e.value,n=t.size,r=t.duration;null!=n&&null!=r&&f.next({type:"metrics",value:{size:n,duration:r,content:s}});break;case"request":var i=e.value.segment;if(null==i||null==i.duration)return;l=!0;var a=i.duration/i.timescale,o=i.time/i.timescale;f.next({type:"requestBegin",value:{duration:a,time:o,requestTimestamp:performance.now(),id:c}});break;case"progress":var u=e.value;null!=u.totalSize&&u.size<u.totalSize&&f.next({type:"progress",value:{duration:u.duration,size:u.size,totalSize:u.totalSize,timestamp:performance.now(),id:c}})}}),ce(function(){l&&f.next({type:"requestEnd",value:{id:c}})}),Object(Q.a)(function(e){return"warning"===e.type||"chunk"===e.type||"chunk-complete"===e.type||"data"===e.type}),Object(ue.a)(function(n){if("warning"===n.type)return Object(Y.a)(n);if("chunk-complete"===n.type)return Object(Y.a)({type:"chunk-complete"});var r="chunk"===n.type,e={type:"chunk",parse:function(e){var t={data:n.value.responseData,isChunked:r};return p({response:t,init:e,content:s}).pipe(Object(A.a)(function(e){throw k(e,{defaultCode:"PIPELINE_PARSE_ERROR",defaultReason:"Unknown parsing error"})}))}};return r?Object(Y.a)(e):Object(B.a)(Object(Y.a)(e),Object(Y.a)({type:"chunk-complete"}))}),Object(F.a)())});return l=this._prioritizer,h=b,{createRequest:function(e,t){return void 0===t&&(t=0),l.create(h(e),t)},updatePriority:function(e,t){l.updatePriority(e,t)}}},e}(),ht=n(115),vt=n(85),bt=n(25),mt=n(2),gt=d.a.onSourceOpen$;function yt(e,t,n){if(null!==t&&"closed"!==t.readyState){for(var r=t.readyState,i=t.sourceBuffers,a=i.length-1;0<=a;a--){var o=i[a];try{"open"===r&&(te.a.info("Init: Removing SourceBuffer from mediaSource",o),o.abort()),t.removeSourceBuffer(o)}catch(e){te.a.warn("Init: Error while disposing SourceBuffer",e)}}0<i.length&&te.a.warn("Init: Not all SourceBuffers could have been removed.")}if(Object(vt.a)(e),null!==n)try{te.a.debug("Init: Revoking previous URL"),URL.revokeObjectURL(n)}catch(e){te.a.warn("Init: Error while revoking the media source URL",e)}}function _t(e){return(i=e,new N.a(function(e){if(null==bt.c)throw new ae.a("MEDIA_SOURCE_NOT_SUPPORTED","No MediaSource Object was found in the current browser.");var t=Object(mt.a)(i.src)?i.src:null;yt(i,null,t),te.a.info("Init: Creating MediaSource");var n=new bt.c,r=URL.createObjectURL(n);return te.a.info("Init: Attaching MediaSource URL to the media element",r),i.src=r,e.next(n),function(){yt(i,n,r)}})).pipe(Object(ue.a)(function(e){return gt(e).pipe(Object(L.a)(1),Object($.a)(e))}));var i}var Ot=n(29),Et=l.a.DEFAULT_LIVE_GAP;var wt=n(120),jt=n(52),Tt=n(61);function St(t,i){return i?function(e){return e.pipe(St(function(n,r){return Object(Tt.a)(t(n,r)).pipe(Object(q.a)(function(e,t){return i(n,e,r,t)}))}))}:function(e){return e.lift(new At(t))}}var At=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new xt(e,this.project))},e}(),xt=function(r){function e(e,t){var n=r.call(this,e)||this;return n.project=t,n.hasSubscription=!1,n.hasCompleted=!1,n.index=0,n}return a.a(e,r),e.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},e.prototype.tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(t,e,n)},e.prototype._innerSub=function(e,t,n){var r=new jt.a(this,void 0,void 0);this.destination.add(r),Object(me.a)(this,e,t,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},e.prototype.notifyError=function(e){this.destination.error(e)},e.prototype.notifyComplete=function(e){this.destination.remove(e),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(be.a),kt=function(){function e(e){this._array=[],this._sortingFn=e}var t=e.prototype;return t.add=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.sort(this._sortingFn);for(var r=0,i=0;i<t.length;i++){for(var a=t[i],o=!1;!o&&r<this._array.length;)this._sortingFn(a,this._array[r])<0?(this._array.splice(r,0,a),o=!0):r++;o||this._array.push(a)}},t.length=function(){return this._array.length},t.get=function(e){if(e<0||e>=this._array.length)throw new Error("Invalid index.");return this._array[e]},t.findFirst=function(e){return Object(je.a)(this._array,e)},t.has=function(e){return Object(tt.a)(this._array,e)},t.removeElement=function(e){var t=this._array.indexOf(e);if(0<=t)return this._array.splice(t,1),t},t.head=function(){return this._array[0]},t.last=function(){return this._array[this._array.length-1]},t.shift=function(){return this._array.shift()},t.pop=function(){return this._array.pop()},e}(),Rt=function(){function e(e){this._weakMap=new WeakMap,this._fn=e}var t=e.prototype;return t.get=function(e){var t=this._weakMap.get(e);if(void 0!==t)return t;var n=this._fn(e);return this._weakMap.set(e,n),n},t.destroy=function(e){this._weakMap.delete(e)},e}(),It=n(164);function Mt(e){var i=e.queuedSourceBuffer,t=e.clock$,n=e.maxBufferBehind$,r=e.maxBufferAhead$;return Object(K.a)([t,n,r]).pipe(Object(ue.a)(function(e){var t=e[0],n=e[1],r=e[2];return function(t,n,r,i){if(!isFinite(r)&&!isFinite(i))return H.a;var a=[],e=Object(re.c)(t.getBufferedRanges(),n),o=e.innerRange,u=e.outerRanges;return function(){if(isFinite(r)){for(var e=0;e<u.length;e++){var t=u[e];n-r>=t.end?a.push(t):n>=t.end&&n-r>t.start&&n-r<t.end&&a.push({start:t.start,end:n-r})}null!=o&&n-r>o.start&&a.push({start:o.start,end:n-r})}}(),function(){if(!isFinite(i)){return}for(var e=0;e<u.length;e++){var t=u[e];if(n+i<=t.start){a.push(t)}else if(n<=t.start&&n+i<t.end&&n+i>t.start){a.push({start:n+i,end:t.end})}}if(o!=null){if(n+i<o.end){a.push({start:n+i,end:o.end})}}}(),Object(Tt.a)(a.map(function(e){return te.a.debug("GC: cleaning range from SourceBuffer",e),t.removeBuffer(e.start,e.end)})).pipe(Object(It.a)(),Object(ve.a)())}(i,t,n,r)}))}var Nt=n(211),Ct=n(210),Dt=n(160),Pt=n(159),Bt=l.a.MAX_MANIFEST_BUFFERED_START_END_DIFFERENCE,Lt=l.a.MAX_MANIFEST_BUFFERED_DURATION_DIFFERENCE,Ut=l.a.MINIMUM_SEGMENT_SIZE,Ft=function(){function e(){this.inventory=[]}var t=e.prototype;return t.reset=function(){this.inventory.length=0},t.synchronizeBuffered=function(e){for(var t=this.inventory,n=0,r=t[0],i=e.length,a=0;a<i;a++){if(void 0===r)return;var o=e.start(a),u=e.end(a);if(u-o<Ut)te.a.warn("SI: skipped TimeRange when synchronizing because it was too small",o,u);else{for(var s=n;void 0!==r&&Object(j.a)(r.bufferedEnd,r.end)-o<Ut;)r=t[++n];var c={end:-1,precizeEnd:!1},l=n-s;if(0<l){var f=t[s+l-1];c.end=Object(j.a)(f.bufferedEnd,f.end),c.precizeEnd=f.precizeEnd,te.a.debug("SI: "+l+" segments GCed."),t.splice(s,l),n=s}if(void 0===r)return;if(u-Object(j.a)(r.bufferedStart,r.start)>=Ut){if(Wt(r,o,c),n===t.length-1)return void Vt(r,u);r=t[++n];for(var d=Object(j.a)(r.bufferedStart,r.start),p=Object(j.a)(r.bufferedEnd,r.end),h=a<i-1?e.start(a+1):void 0;void 0!==r&&Ut<=u-d&&(void 0===h||p-h<=u-d);){var v=t[n-1];void 0===v.bufferedEnd&&(v.bufferedEnd=r.precizeStart?r.start:v.end,te.a.debug("SI: calculating buffered end of contiguous segment",v.bufferedEnd,v.end)),r.bufferedStart=v.bufferedEnd,void 0!==(r=t[++n])&&(d=Object(j.a)(r.bufferedStart,r.start),p=Object(j.a)(r.bufferedEnd,r.end))}}var b=t[n-1];void 0!==b&&Vt(b,u)}}null!=r&&(te.a.debug("SI: last segments have been GCed",n,t.length),t.splice(n,t.length-n))},t.insertChunk=function(e){var t=e.period,n=e.adaptation,r=e.representation,i=e.segment,a=e.start,o=e.end;if(!i.isInit)if(o<=a)te.a.warn("SI: Invalid chunked inserted: starts before it ends",a,o);else{for(var u=this.inventory,s={partiallyPushed:!0,estimatedStart:a,start:a,end:o,precizeStart:!1,precizeEnd:!1,bufferedStart:void 0,bufferedEnd:void 0,infos:{segment:i,period:t,adaptation:n,representation:r}},c=u.length-1;0<=c;c--){var l=u[c];if(l.start<=a){if(l.end<=a){for(te.a.debug("SI: Pushing segment strictly after previous one."),this.inventory.splice(c+1,0,s),c+=2;c<u.length&&u[c].start<s.end;){if(u[c].end>s.end)return te.a.debug("SI: Segment pushed updates the start of the next one"),u[c].start=s.end,u[c].bufferedStart=void 0,void(u[c].precizeStart=u[c].precizeStart&&s.precizeEnd);te.a.debug("SI: Segment pushed removes the next one"),u.splice(c,1)}return}if(l.start===a){if(l.end<=o){for(te.a.debug("SI: Segment pushed replace another one"),this.inventory.splice(c,1,s),c+=1;c<u.length&&u[c].start<s.end;){if(u[c].end>s.end)return te.a.debug("SI: Segment pushed updates the start of the next one"),u[c].start=s.end,u[c].bufferedStart=void 0,void(u[c].precizeStart=u[c].precizeStart&&s.precizeEnd);te.a.debug("SI: Segment pushed removes the next one"),u.splice(c,1)}return}return te.a.debug("SI: Segment pushed ends before another with the same start"),u.splice(c,0,s),l.start=s.end,l.bufferedStart=void 0,void(l.precizeStart=l.precizeStart&&s.precizeEnd)}if(l.end<=s.end){for(te.a.debug("SI: Segment pushed updates end of previous one"),this.inventory.splice(c+1,0,s),l.end=s.start,l.bufferedEnd=void 0,l.precizeEnd=l.precizeEnd&&s.precizeStart,c+=2;c<u.length&&u[c].start<s.end;){if(u[c].end>s.end)return te.a.debug("SI: Segment pushed updates the start of the next one"),u[c].start=s.end,u[c].bufferedStart=void 0,void(u[c].precizeStart=u[c].precizeStart&&s.precizeEnd);te.a.debug("SI: Segment pushed removes the next one"),u.splice(c,1)}return}te.a.debug("SI: Segment pushed is contained in a previous one");var f={partiallyPushed:l.partiallyPushed,start:s.end,end:l.end,precizeStart:l.precizeStart&&l.precizeEnd&&s.precizeEnd,precizeEnd:l.precizeEnd,bufferedStart:void 0,bufferedEnd:l.end,infos:l.infos};return l.end=s.start,l.bufferedEnd=void 0,l.precizeEnd=l.precizeEnd&&s.precizeStart,u.splice(c+1,0,s),void u.splice(c+2,0,f)}}var d=this.inventory[0];if(null==d)return te.a.debug("SI: Segment pushed comes after all previous ones"),void this.inventory.push(s);if(!(d.start>=o)){if(d.end<=o){for(te.a.debug("SI: Segment pushed starts before and completely recovers the previous first one"),this.inventory.splice(0,1,s);1<u.length&&u[1].start<s.end;){if(u[1].end>s.end)return te.a.debug("SI: Segment pushed updates the start of the next one"),u[1].start=s.end,u[1].bufferedStart=void 0,void(u[1].precizeStart=s.precizeEnd);te.a.debug("SI: Segment pushed removes the next one"),u.splice(1,1)}return}return te.a.debug("SI: Segment pushed start of the next one"),d.start=o,d.bufferedStart=void 0,d.precizeStart=s.precizeEnd,void this.inventory.splice(0,0,s)}te.a.debug("SI: Segment pushed comes before all previous ones"),this.inventory.splice(0,0,s)}},t.completeSegment=function(e){if(!e.segment.isInit){for(var t=this.inventory,n=!1,r=0;r<t.length;r++)if(Object(Pt.a)(t[r].infos,e)){n&&te.a.warn("SI: Completed Segment is splitted.",e),n=!0;var i=r;for(r+=1;r<t.length&&Object(Pt.a)(t[r].infos,e);)r++;var a=r-1,o=a-i,u=t[a].end,s=t[a].bufferedEnd;0<o&&(this.inventory.splice(i+1,o),r-=o),this.inventory[i].partiallyPushed=!1,this.inventory[i].end=u,this.inventory[i].bufferedEnd=s}n||te.a.warn("SI: Completed Segment not found",e)}},t.getInventory=function(){return this.inventory},e}();function $t(e){if(void 0===e.bufferedStart||e.partiallyPushed)return!1;var t=e.start,n=e.end-t;return Math.abs(t-e.bufferedStart)<=Bt&&(void 0===e.bufferedEnd||e.bufferedEnd>e.bufferedStart&&Math.abs(e.bufferedEnd-e.bufferedStart-n)<=Math.min(Lt,n/3))}function zt(e){if(void 0===e.bufferedEnd||e.partiallyPushed)return!1;var t=e.start,n=e.end,r=n-t;return Math.abs(n-e.bufferedEnd)<=Bt&&null!=e.bufferedStart&&e.bufferedEnd>e.bufferedStart&&Math.abs(e.bufferedEnd-e.bufferedStart-r)<=Math.min(Lt,r/3)}function Wt(e,t,n){void 0!==e.bufferedStart?(e.bufferedStart<t&&(te.a.debug("SI: Segment partially GCed at the start",e.bufferedStart,t),e.bufferedStart=t),!e.precizeStart&&$t(e)&&(e.start=e.bufferedStart,e.precizeStart=!0)):e.precizeStart?(te.a.debug("SI: buffered start is precize start",e.start),e.bufferedStart=e.start):0<=n.end&&n.end>t&&(n.precizeEnd||e.start-n.end<=Bt)?(te.a.debug("SI: buffered start is end of previous segment",t,e.start,n.end),e.bufferedStart=n.end,$t(e)&&(e.start=n.end,e.precizeStart=!0)):e.start-t<=Bt?(te.a.debug("SI: found true buffered start",t,e.start),e.bufferedStart=t,$t(e)&&(e.start=t,e.precizeStart=!0)):t<e.start?te.a.debug("SI: range start too far from expected start",t,e.start):(te.a.debug("SI: Segment appears immediately garbage collected at the start",e.bufferedStart,t),e.bufferedStart=t)}function Vt(e,t){void 0!==e.bufferedEnd?(e.bufferedEnd>t&&(te.a.debug("SI: Segment partially GCed at the end",e.bufferedEnd,t),e.bufferedEnd=t),!e.precizeEnd&&zt(e)&&(e.precizeEnd=!0,e.end=t)):e.precizeEnd?(te.a.debug("SI: buffered end is precize end",e.end),e.bufferedEnd=e.end):t-e.end<=Bt?(te.a.debug("SI: found true buffered end",t,e.end),e.bufferedEnd=t,zt(e)&&(e.end=t,e.precizeEnd=!0)):t>e.end?(te.a.debug("SI: range end too far from expected end",t,e.end),e.bufferedEnd=e.end,zt(e)&&(e.end=t,e.precizeEnd=!0)):(te.a.debug("SI: Segment appears immediately garbage collected at the end",e.bufferedEnd,t),e.bufferedEnd=t)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Kt,Yt,Gt=l.a.APPEND_WINDOW_SECURITIES,qt=l.a.SOURCE_BUFFER_FLUSHING_INTERVAL;(Yt=Kt=Kt||{})[Yt.Push=0]="Push",Yt[Yt.Remove=1]="Remove",Yt[Yt.EndOfSegment=2]="EndOfSegment";var Xt=function(){function e(e,t,n){var r=this;this._destroy$=new W.a,this.bufferType=e,this._sourceBuffer=n,this._queue=[],this._pendingTask=null,this._lastInitSegment=null,this._currentCodec=t,this._segmentInventory=new Ft,Object(Nt.a)(qt).pipe(Object(se.a)(function(){return r._flush()}),Object(G.a)(this._destroy$)).subscribe(),Object(Ct.a)(this._sourceBuffer,"error").pipe(Object(se.a)(function(e){return r._onError(e)}),Object(G.a)(this._destroy$)).subscribe(),Object(Ct.a)(this._sourceBuffer,"updateend").pipe(Object(se.a)(function(){return r._flush()}),Object(G.a)(this._destroy$)).subscribe()}var t,n,r,i=e.prototype;return i.pushChunk=function(e){return te.a.debug("QSB: receiving order to push data to the SourceBuffer",this.bufferType,e),this._addToQueue({type:Kt.Push,value:e})},i.removeBuffer=function(e,t){return te.a.debug("QSB: receiving order to remove data from the SourceBuffer",this.bufferType,e,t),this._addToQueue({type:Kt.Remove,value:{start:e,end:t}})},i.endOfSegment=function(e){return te.a.debug("QSB: receiving order for validating end of segment",this.bufferType,e.segment),this._addToQueue({type:Kt.EndOfSegment,value:e})},i.synchronizeInventory=function(){this._segmentInventory.synchronizeBuffered(this.getBufferedRanges())},i.getBufferedRanges=function(){return this._sourceBuffer.buffered},i.getInventory=function(){return this._segmentInventory.getInventory()},i.dispose=function(){for(this._destroy$.next(),this._destroy$.complete(),null!=this._pendingTask&&(this._pendingTask.subject.complete(),this._pendingTask=null);0<this._queue.length;){var e=this._queue.shift();null!=e&&e.subject.complete()}},i.abort=function(){this._sourceBuffer.abort()},i._onError=function(e){var t=e instanceof Error?e:new Error("An unknown error occured when appending buffer");(this._lastInitSegment=null)!=this._pendingTask&&this._pendingTask.subject.error(t)},i._addToQueue=function(a){var o=this;return new N.a(function(e){var t=0===o._queue.length&&null==o._pendingTask,n=new W.a,r=P()({subject:n},a);o._queue.push(r);var i=n.subscribe(e);return t&&o._flush(),function(){i.unsubscribe();var e=o._queue.indexOf(r);0<=e&&o._queue.splice(e,1)}})},i._flush=function(){if(!this._sourceBuffer.updating){if(null!=this._pendingTask){if(this._pendingTask.type!==Kt.Push||0===this._pendingTask.steps.length){switch(this._pendingTask.type){case Kt.Push:this._segmentInventory.insertChunk(this._pendingTask.inventoryData);break;case Kt.EndOfSegment:this._segmentInventory.completeSegment(this._pendingTask.value);break;case Kt.Remove:this.synchronizeInventory()}var e=this._pendingTask.subject;return this._pendingTask=null,e.next(),e.complete(),void(0<this._queue.length&&this._flush())}}else{if(0===this._queue.length)return;var t=this._queue.shift();if(null==t)throw new Error("An item from the QueuedSourceBuffer queue was not defined");if(this._pendingTask=function(e){switch(e.type){case Kt.Push:var t=[],n=e.value,r=n.data,i=n.inventoryInfos,a=i.estimatedDuration,o=i.estimatedStart,u=i.segment,s=[void 0!==r.appendWindow[0]?Math.max(0,r.appendWindow[0]-Gt.START):void 0,void 0!==r.appendWindow[1]?r.appendWindow[1]+Gt.END:void 0];if(null!==r.initSegment&&t.push({isInit:!0,segmentData:r.initSegment,codec:r.codec,timestampOffset:r.timestampOffset,appendWindow:s}),null!==r.chunk&&t.push({isInit:!1,segmentData:r.chunk,codec:r.codec,timestampOffset:r.timestampOffset,appendWindow:s}),0===t.length)return null;var c=void 0===o?u.time/u.timescale:o,l=void 0===a?u.duration/u.timescale:a,f=c+l;void 0!==s[0]&&(c=Math.max(c,s[0])),void 0!==s[1]&&(f=Math.min(f,s[1]));var d={period:i.period,adaptation:i.adaptation,representation:i.representation,segment:i.segment,start:c,end:f};return{type:Kt.Push,steps:t,inventoryData:d,subject:e.subject};case Kt.Remove:case Kt.EndOfSegment:return e}return null}(t),null==this._pendingTask)return t.subject.next(),t.subject.complete(),void this._flush()}var n=this._pendingTask;try{switch(n.type){case Kt.EndOfSegment:return te.a.debug("QSB: Acknowledging complete segment",n.value),void this._flush();case Kt.Push:var r=n.steps.shift();if(null==r||r.isInit&&this._lastInitSegment===r.segmentData)return void this._flush();this._pushSegmentData(r);break;case Kt.Remove:var i=n.value,a=i.start,o=i.end;te.a.debug("QSB: removing data from SourceBuffer",this.bufferType,a,o),this._sourceBuffer.remove(a,o)}}catch(e){this._onError(e)}}},i._pushSegmentData=function(e){var t=e.isInit,n=e.segmentData,r=e.timestampOffset,i=e.appendWindow,a=e.codec;this._currentCodec!==a&&(te.a.debug("QSB: updating codec"),Object(Dt.a)(this._sourceBuffer,a)?this._currentCodec=a:te.a.warn("QSB: could not update codec",a,this._currentCodec));if(this._sourceBuffer.timestampOffset!==r){var o=r;te.a.debug("QSB: updating timestampOffset",this.bufferType,this._sourceBuffer.timestampOffset,o),this._sourceBuffer.timestampOffset=o}null==i[0]?0<this._sourceBuffer.appendWindowStart&&(this._sourceBuffer.appendWindowStart=0):i[0]!==this._sourceBuffer.appendWindowStart&&(i[0]>=this._sourceBuffer.appendWindowEnd&&(this._sourceBuffer.appendWindowEnd=i[0]+1),this._sourceBuffer.appendWindowStart=i[0]),null==i[1]?this._sourceBuffer.appendWindowEnd!==1/0&&(this._sourceBuffer.appendWindowEnd=1/0):i[1]!==this._sourceBuffer.appendWindowEnd&&(this._sourceBuffer.appendWindowEnd=i[1]),te.a.debug("QSB: pushing new data to SourceBuffer",this.bufferType),t&&(this._lastInitSegment=n),this._sourceBuffer.appendBuffer(n)},t=e,(n=[{key:"codec",get:function(){return this._currentCodec}}])&&Ht(t.prototype,n),r&&Ht(t,r),e}();var Qt=["audio","video","text","image"];var Zt=function(){function e(e,t){this._mediaElement=e,this._mediaSource=t,this._initializedSourceBuffers={}}e.isNative=function(e){return Jt(e)};var t=e.prototype;return t.get=function(e){var t=this._initializedSourceBuffers[e];return null!=t?t:null},t.createSourceBuffer=function(e,t,n){void 0===n&&(n={});var r,i,a,o,u=this._initializedSourceBuffers[e];if(Jt(e)){if(null!=u)return u.codec!==t?te.a.warn("SB: Reusing native SourceBuffer with codec",u.codec,"for codec",t):te.a.info("SB: Reusing native SourceBuffer with codec",t),u;te.a.info("SB: Adding native SourceBuffer with codec",t);var s=(r=e,i=this._mediaSource,a=t,o=i.addSourceBuffer(a),new Xt(r,a,o));return this._initializedSourceBuffers[e]=s}if(null!=u)return te.a.info("SB: Reusing a previous custom SourceBuffer for the type",e),u;if("text"===e){var c;if(te.a.info("SB: Creating a new text SourceBuffer with codec",t),"html"===n.textTrackMode){if(null==oe.a.htmlTextTracksBuffer)throw new Error("HTML Text track feature not activated");c=new oe.a.htmlTextTracksBuffer(this._mediaElement,n.textTrackElement)}else{if(null==oe.a.nativeTextTracksBuffer)throw new Error("Native Text track feature not activated");c=new oe.a.nativeTextTracksBuffer(this._mediaElement,!0===n.hideNativeSubtitle)}var l=new Xt("text",t,c);return this._initializedSourceBuffers.text=l}if("image"!==e)throw te.a.error("SB: Unknown buffer type:",e),new ae.a("BUFFER_TYPE_UNKNOWN","The player wants to create a SourceBuffer of an unknown type.");if(null==oe.a.imageBuffer)throw new Error("Image buffer feature not activated");te.a.info("SB: Creating a new image SourceBuffer with codec",t);var f=new oe.a.imageBuffer,d=new Xt("image",t,f);return this._initializedSourceBuffers.image=d},t.disposeSourceBuffer=function(t){var e=this._initializedSourceBuffers[t];if(null!=e){if(te.a.info("SB: Aborting SourceBuffer",t),e.dispose(),!Jt(t)||"open"===this._mediaSource.readyState)try{e.abort()}catch(e){te.a.warn("SB: Failed to abort a "+t+" SourceBuffer:",e)}delete this._initializedSourceBuffers[t]}else te.a.warn("SB: Trying to dispose a SourceBuffer that does not exist")},t.disposeAll=function(){var t=this;Qt.forEach(function(e){null!=t.get(e)&&t.disposeSourceBuffer(e)})},e}();function Jt(e){return"audio"===e||"video"===e}var en=n(226);var tn={activeBuffer:function(e){return{type:"active-buffer",value:{bufferType:e}}},activePeriodChanged:function(e){return{type:"activePeriodChanged",value:{period:e}}},adaptationChange:function(e,t,n){return{type:"adaptationChange",value:{type:e,adaptation:t,period:n}}},addedSegment:function(e,t,n,r){return{type:"added-segment",value:{content:e,segment:t,segmentData:r,buffered:n}}},bitrateEstimationChange:function(e,t){return{type:"bitrateEstimationChange",value:{type:e,bitrate:t}}},bufferComplete:function(e){return{type:"complete-buffer",value:{type:e}}},discontinuityEncountered:function(e,t){return{type:"discontinuity-encountered",value:{bufferType:t,gap:e}}},endOfStream:function(){return{type:"end-of-stream",value:void 0}},fullBuffer:function(e){return{type:"full-buffer",value:{bufferType:e}}},needsManifestRefresh:function(){return{type:"needs-manifest-refresh",value:void 0}},manifestMightBeOufOfSync:function(){return{type:"manifest-might-be-out-of-sync",value:void 0}},needsMediaSourceReload:function(e){return{type:"needs-media-source-reload",value:{currentTime:e.currentTime,isPaused:e.isPaused}}},needsNudgingSeek:function(){return{type:"needs-nudging-seek",value:null}},periodBufferReady:function(e,t,n){return{type:"periodBufferReady",value:{type:e,period:t,adaptation$:n}}},periodBufferCleared:function(e,t){return{type:"periodBufferCleared",value:{type:e,period:t}}},protectedSegment:function(e){return{type:"protected-segment",value:e}},representationChange:function(e,t,n){return{type:"representationChange",value:{type:e,period:t,representation:n}}},resumeStream:function(){return{type:"resume-stream",value:void 0}},warning:function(e){return{type:"warning",value:e}}};var nn=Zt,rn=n(63);function an(o){return function(e){return Object(he.a)(function(){var n,r=0,i=!1,a=!1;return e.pipe(Object(ue.a)(function t(e){return Object(he.a)(function(){return a?(n=e,i=!0,H.a):(a=!(i=!1),o(e,r++).pipe(Object(se.a)({complete:function(){return a=!1}}),function(e){return Object(B.a)(e,Object(he.a)(function(){return i?t(n):H.a}))}))})}))})}}var on=n(69),un=n.n(on);var sn=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new cn(e,this.predicate,this.inclusive))},e}(),cn=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.predicate=t,r.inclusive=n,r.index=0,r}return a.a(e,i),e.prototype._next=function(e){var t,n=this.destination;try{t=this.predicate(e,this.index++)}catch(e){return void n.error(e)}this.nextOrComplete(e,t)},e.prototype.nextOrComplete=function(e,t){var n=this.destination;Boolean(t)?n.next(e):(this.inclusive&&n.next(e),n.complete())},e}(s.a),ln=n(102),fn=l.a.BITRATE_REBUFFERING_RATIO,dn=l.a.MAX_TIME_MISSING_FROM_COMPLETE_SEGMENT,pn=l.a.MINIMUM_SEGMENT_SIZE;function hn(e){var v=e.content,t=e.fastSwitchingStep,b=e.loadedSegmentPendingPush,n=e.neededRange,r=e.segmentInventory,i=v.representation.index.getSegments(n.start,n.end-n.start),m=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=!0,a=!0,o=e[r],u=0===r?null:e[r-1],s=r>=e.length-1?null:e[r+1];void 0===o.bufferedStart?i=!1:(null===u||void 0===u.bufferedEnd||u.bufferedEnd!==o.bufferedStart)&&t.start<o.bufferedStart&&o.bufferedStart-o.start>dn&&(te.a.info("Buffer: The start of the wanted segment has been garbage collected",o),i=!1),void 0===o.bufferedEnd?a=!1:(null===s||void 0===s.bufferedEnd||s.bufferedEnd!==o.bufferedStart)&&t.end>o.bufferedEnd&&o.end-o.bufferedEnd>dn&&(te.a.info("Buffer: The end of the wanted segment has been garbage collected",o),a=!1),i&&a&&n.push(o)}return n}(function(e,t){for(var n=Math.max(1/60,pn),r=e.start+n,i=e.end-n,a=[],o=t.length-1;0<=o;o--){var u=t[o];if(!u.partiallyPushed&&!1!==u.infos.representation.decipherable){var s=u.infos.segment,c=s.time/s.timescale,l=null==s.duration?u.end:c+s.duration/s.timescale;(r<l&&c<i||u.end>r&&u.start<i)&&a.unshift(u)}}return a}({start:Math.max(n.start-.5,0),end:n.end+.5},r).filter(function(e){return!function(e,t,n){if(e.period.id!==t.period.id)return!1;if(e.adaptation.id!==t.adaptation.id)return!0;var r=e.representation.bitrate;if(void 0!==n)return r<n;var i=r*fn;return t.representation.bitrate>i}(e.infos,v,t)}),n),g=Math.min(1/60,pn);return i.filter(function(e){if(b.test(e.id))return!1;var t=e.duration,n=e.time,r=e.timescale;if(e.isInit||void 0===t)return!0;if(t/r<pn)return!1;for(var i=n/r,a=i+t/r,o=0;o<m.length;o++){var u=m[o];if(u.infos.period.id===v.period.id){var s=u.infos.segment.time,c=u.infos.segment.duration,l=u.infos.segment.timescale,f=s/l;if(-g<i-f&&-g<f+c/l-a)return!1}}for(var d=0;d<m.length;d++){var p=m[d];if(p.end>i){if(p.start>i+g)return!0;for(var h=d+1;h<m.length-1&&m[h-1].end+g>m[h].start;)h++;return m[--h].end<a+g}}return!0})}var vn=l.a.SEGMENT_PRIORITIES_STEPS;function bn(e,t){for(var n=t.currentTime+t.wantedTimeOffset,r=e.time/e.timescale-n,i=0;i<vn.length;i++)if(r<vn[i])return i;return vn.length}var mn=l.a.BUFFER_GC_GAPS.CALM,gn=l.a.BUFFER_GC_GAPS.BEEFY;function yn(e,t,n){for(var r=Object(re.c)(t,e),i=r.innerRange,a=r.outerRanges,o=[],u=0;u<a.length;u++){var s=a[u];e-n<s.end?o.push(s):e+n>s.start&&o.push(s)}return null!=i&&(te.a.debug("Buffer: GC removing part of inner range",o),e-n>i.start&&o.push({start:i.start,end:e-n}),e+n<i.end&&o.push({start:e+n,end:i.end})),o}function _n(n,i,e){var a=i.pushChunk(e);return a.pipe(Object(A.a)(function(e){if(e instanceof Error&&"QuotaExceededError"===e.name)return Object(B.a)((r=i,n.pipe(Object(L.a)(1),Object(ue.a)(function(e){te.a.warn("Buffer: Running garbage collector");var t=r.getBufferedRanges(),n=yn(e.currentTime,t,mn);return 0===n.length&&(n=yn(e.currentTime,t,gn)),te.a.debug("Buffer: GC cleaning",n),Object(Tt.a)(n.map(function(e){var t=e.start,n=e.end;return r.removeBuffer(t,n)})).pipe(Object(It.a)())}))).pipe(Object(ve.a)()),a).pipe(Object(A.a)(function(e){var t=e instanceof Error?e.toString():"Could not clean the buffer";throw new ae.a("BUFFER_FULL_ERROR",t)}));var r,t=e instanceof Error?e.toString():"An unknown error happened when pushing content";throw new ae.a("BUFFER_APPEND_ERROR",t)}))}var On=function(e){var t,n,r=e.bufferGoal$,d=e.clock$,O=e.content,i=e.fastSwitchingStep$,E=e.queuedSourceBuffer,s=e.segmentFetcher,a=e.terminate$,u=O.manifest,w=O.period,c=O.adaptation,j=O.representation,p=j.getMimeTypeString(),l=c.type,T=j.index.getInitSegment(),S=null==T?{chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]}:null,f=[],h=new x.a(1),v=new W.a,b=null,A=new ln.a,o=Object(K.a)([d,r,a.pipe(Object(L.a)(1),Object($.a)(!0),Object(Z.a)(!1)),v.pipe(Object(Z.a)(void 0))]).pipe(ge(i),Object(q.a)(function(e){var t=e[0],n=t[0],r=t[1],i=t[2],a=e[1];E.synchronizeInventory();var o,u,s,c,l,f,d,p,h=(o=w,s=r,c=(u=n).currentTime+u.wantedTimeOffset,l=null==o.start?0:o.start,f=null==o.end?1/0:o.end,d={start:Math.max(l,c),end:f},{start:Math.min(d.end,Math.max(c,d.start)),end:Math.min(d.end,Math.max(c+s,d.start))}),v=null!=n.stalled?j.index.checkDiscontinuity(n.currentTime):-1,b=j.index.shouldRefresh(h.start,h.end),m=E.getInventory(),g=hn({content:O,fastSwitchingStep:a,loadedSegmentPendingPush:A,neededRange:h,segmentInventory:m}).map(function(e){return{priority:bn(e,n),segment:e}});if(null!=T&&null==S){var y=bn(T,n);g=[{segment:T,priority:y}].concat(g)}if(0<g.length||null==w.end)p=!1;else{var _=j.index.getLastPosition();if(void 0===_)p=h.end>=w.end&&j.index.isFinished();else if(null===_)p=j.index.isFinished();else{p=(null!=w.end?Math.min(w.end,_):_)<=h.end&&j.index.isFinished()}}return{discontinuity:v,isFull:p,terminate:i,neededSegments:g,shouldRefreshManifest:b}}),Object(ue.a)(function(e){var t=e.neededSegments,n=t[0];if(e.terminate){if(f=[],null==b)return te.a.debug("Buffer: no request, terminate.",l),h.complete(),Object(Y.a)({type:"terminated"});if(null==n||b.segment.id!==n.segment.id)return te.a.debug("Buffer: cancel request and terminate.",l),h.next(),h.complete(),Object(Y.a)({type:"terminated"});if(b.priority!==n.priority){var r=b.request$;s.updatePriority(r,n.priority),b.priority=n.priority}return te.a.debug("Buffer: terminate after request.",l),H.a}var i=[];if(1<e.discontinuity){var a=e.discontinuity+1,o=[e.discontinuity,a];i.push(tn.discontinuityEncountered(o,l))}if(e.shouldRefreshManifest&&i.push(tn.needsManifestRefresh()),null==n)return null!=b&&te.a.debug("Buffer: interrupt segment request.",l),f=[],h.next(),Object(B.a)(Y.a.apply(void 0,i),e.isFull?Object(Y.a)(tn.fullBuffer(l)):H.a);if(null==b)te.a.debug("Buffer: start downloading queue.",l),f=t,h.next();else if(b.segment.id!==n.segment.id)te.a.debug("Buffer: restart download queue.",l),f=t,h.next();else if(b.priority!==n.priority){te.a.debug("Buffer: update request priority.",l);var u=b.request$;s.updatePriority(u,n.priority),b.priority=n.priority}else te.a.debug("Buffer: update downloading queue",l),f=t.slice().splice(1,t.length);return Object(B.a)(Y.a.apply(void 0,i),Object(Y.a)(tn.activeBuffer(l)))}),(t=function(e){return"terminated"!==e.type},void 0===n&&(n=!1),function(e){return e.lift(new sn(t,n))})),m=h.pipe(Object(le.a)(function(){return 0<f.length?(o=Object(he.a)(function(){var e=f.shift();if(null==e)return un()(function(){v.next()}),H.a;var n=e.segment,t=e.priority,r={manifest:u,period:w,adaptation:c,representation:j,segment:n},i=s.createRequest(r,t);b={segment:n,priority:t,request$:i};var a=i.pipe(Object(ue.a)(function(e){return"warning"===e.type?Object(Y.a)({type:"retry",value:{segment:n,error:e.value}}):"chunk-complete"===e.type?(b=null,Object(Y.a)({type:"end-of-segment",value:{segment:n}})):(null!=S&&null!=S.chunkInfos&&(t=S.chunkInfos),e.parse(t).pipe(Object(q.a)(function(e){return{type:"parsed-segment",value:{segment:n,data:e}}})));var t}));return Object(B.a)(a,o)})).pipe(ce(function(){b=null})):H.a;var o}),Object(ue.a)(function(n){switch(n.type){case"retry":return Object(B.a)(Object(Y.a)({type:"warning",value:n.value.error}),Object(he.a)(function(){var e=n.value.segment,t=j.index;if(!1===t.isSegmentStillAvailable(e))v.next();else if(t.canBeOutOfSyncError(n.value.error))return Object(Y.a)(tn.manifestMightBeOufOfSync());return H.a}));case"parsed-segment":var e=n.value.segment;return e.isInit&&(S=n.value.data),function(o,e){var u=e.chunkInfos,s=e.chunkData,c=e.chunkOffset,l=e.segmentProtections,f=e.appendWindow;return Object(he.a)(function(){var e=Y.a.apply(void 0,l.map(function(e){return tn.protectedSegment(e)}));if(null==s)return e;var t,n,r={initSegment:null!=S?S.chunkData:null,chunk:o.isInit?null:s,timestampOffset:c,appendWindow:f,codec:p};null!==u&&(t=u.time/u.timescale,n=void 0!==u.duration?u.duration/u.timescale:void 0);var i=P()({segment:o,estimatedStart:t,estimatedDuration:n},O),a=_n(d,E,{data:r,inventoryInfos:i}).pipe(Object(q.a)(function(){var e=E.getBufferedRanges();return tn.addedSegment(O,o,e,s)}));return Object(V.a)(a,e)})}(e,n.value.data);case"end-of-segment":var t=n.value.segment;return A.add(t.id),E.endOfSegment(P()({segment:t},O)).pipe(Object(ve.a)(),ce(function(){A.remove(t.id)}))}}));return Object(V.a)(o,m).pipe(Object(F.a)())};var En=function(e){var t=e.abrManager,u=e.clock$,n=e.content,r=e.options,s=e.queuedSourceBuffer,i=e.segmentPipelinesManager,c=e.wantedBufferAhead$,a="direct"===r.manualBitrateSwitchingMode,l=n.manifest,f=n.period,d=n.adaptation,p={},o=new W.a,h=new W.a,v=new W.a,b=new W.a,m=Object(V.a)(v,b),g=d.representations.filter(function(e){return!1!==e.decipherable});if(g.length<=0){var y=new ae.a("NO_PLAYABLE_REPRESENTATION","No Representation in the chosen Adaptation can be played");return Object(rn.a)(y)}var _=t.get$(d.type,g,u,m).pipe(Object(M.a)(I.a),Object(F.a)()),O=i.createPipeline(d.type,b),E=_.pipe(Object(q.a)(function(e){return e.knownStableBitrate}),Object(S.a)(function(){return new x.a(1)}),Object(Z.a)(void 0),Object(X.a)()),w=_.pipe(Object(Q.a)(function(e){return null!=e.bitrate}),Object(X.a)(function(e,t){return e.bitrate===t.bitrate}),Object(q.a)(function(e){var t=e.bitrate;return te.a.debug("Buffer: new "+d.type+" bitrate estimation",t),tn.bitrateEstimationChange(d.type,t)})),j=_.pipe(Object(X.a)(function(e,t){return e.manual===t.manual&&e.representation.id===t.representation.id})),T=Object(V.a)(j.pipe(an(function(e,t){var n=e.representation;if(a&&e.manual&&0!==t)return u.pipe(Object(L.a)(1),Object(q.a)(function(e){return tn.needsMediaSourceReload(e)}));var r=Object(Y.a)(tn.representationChange(d.type,f,n)),i=function a(o){return Object(he.a)(function(){var e=p[o.id],i=null!=e?e:1;p[o.id]=i;var t=c.pipe(Object(q.a)(function(e){return e*i}));return te.a.info("Buffer: changing representation",d.type,o),On({clock$:u,content:{representation:o,adaptation:d,period:f,manifest:l},queuedSourceBuffer:s,segmentFetcher:O,terminate$:h,bufferGoal$:t,fastSwitchingStep$:E}).pipe(Object(A.a)(function(e){var t=k(e,{defaultCode:"NONE",defaultReason:"Unknown `RepresentationBuffer` error"});if("BUFFER_FULL_ERROR"!==t.code)throw t;var n=c.getValue(),r=i;if(r<=.25||n*r<=2)throw t;return p[o.id]=r-.25,a(o)}))})}(n).pipe(Object(G.a)(o));return Object(B.a)(r,i).pipe(Object(se.a)(function(e){if("representationChange"===e.type||"added-segment"===e.type)return v.next(e)}))})),j.pipe(Object(q.a)(function(e,t){0!==t&&(e.urgent?(te.a.info("Buffer: urgent Representation switch",d.type),o.next()):(te.a.info("Buffer: slow Representation switch",d.type),h.next()))}),Object(ve.a)()));return Object(V.a)(T,w)};function wn(e,t,n,r){var i=r.period;return Object(K.a)([e,t]).pipe(Object(Q.a)(function(e){var t=e[0],n=e[1];return null!=i.end&&t.currentTime+n>=i.end}),Object(q.a)(function(){return te.a.debug('Buffer: full "empty" AdaptationBuffer',n),{type:"full-buffer",value:{bufferType:n}}}))}var jn=l.a.ADAPTATION_SWITCH_BUFFER_PADDINGS;function Tn(e,t,n,r){var i=e.getBufferedRanges();if(0===i.length)return{type:"continue",value:void 0};var a=Object(re.a)(i),o=t.start,u=null==t.end?1/0:t.end,s=Object(re.l)(a,[{start:o,end:u}]);if(0===s.length)return{type:"continue",value:void 0};var c,l,f,d=(l=t,f=n,(c=e).synchronizeInventory(),c.getInventory().reduce(function(e,t){if(t.infos.period.id!==l.id||t.infos.adaptation.id!==f.id)return e;var n=t.bufferedStart,r=t.bufferedEnd;return void 0===n||void 0===r||e.push({start:n,end:r}),e},[])),p=r.currentTime;if("video"===n.type&&1<r.readyState&&Object(re.j)({start:o,end:u},p)&&Object(re.k)(a,p)&&!Object(re.k)(d,p))return{type:"needs-reload",value:void 0};var h=Object(re.b)(s,d),v=n.type,b=jn[v].before;null==b&&(b=0);var m=jn[v].after;null==m&&(m=0);var g=Object(re.b)(h,[{start:Math.max(p-b,o),end:Math.min(p+m,u)}]);return 0<g.length?{type:"clean-buffer",value:g}:{type:"continue",value:void 0}}var Sn=function(e){var f=e.abrManager,d=e.bufferType,p=e.clock$,h=e.content,v=e.garbageCollectors,b=e.segmentPipelinesManager,m=e.sourceBuffersStore,g=e.options,y=e.wantedBufferAhead$,_=h.period,t=new x.a(1);return t.pipe(Object(le.a)(function(l){if(null==l){te.a.info("Buffer: Set no "+d+" Adaptation",_);var e,t=m.get(d);return e=null!=t?(te.a.info("Buffer: Clearing previous "+d+" SourceBuffer"),t.removeBuffer(_.start,null==_.end?1/0:_.end)):Object(Y.a)(null),Object(B.a)(e.pipe(Object($.a)(tn.adaptationChange(d,null,_))),wn(p,y,d,{period:_}))}te.a.info("Buffer: Updating "+d+" adaptation",l,_);var n=p.pipe(Object(L.a)(1),Object(ue.a)(function(e){var r=function(e,t,n,r){var i=e.get(t);if(null!=i)return te.a.info("Buffer: Reusing a previous SourceBuffer for the type",t),i;var a=function(e){var t=e.representations;return null!=t[0]?t[0].getMimeTypeString():""}(n),o="text"===t?r.textTrackOptions:void 0;return e.createSourceBuffer(t,a,o)}(m,d,l,g),t=Tn(r,_,l,e);if("needs-reload"===t.type)return Object(Y.a)(tn.needsMediaSourceReload(e));var n,i,a,o,u="clean-buffer"===t.type?B.a.apply(void 0,t.value.map(function(e){var t=e.start,n=e.end;return r.removeBuffer(t,n)})).pipe(Object(ve.a)()):H.a,s=v.get(r),c=(n=l,i=r,a=h.manifest,o=p.pipe(Object(q.a)(function(e){var t=i.getBufferedRanges();return P()({},e,{bufferGap:Object(re.d)(t,e.currentTime)})})),En({abrManager:f,clock$:o,content:{manifest:a,period:_,adaptation:n},options:g,queuedSourceBuffer:i,segmentPipelinesManager:b,wantedBufferAhead$:y}).pipe(Object(A.a)(function(e){if(nn.isNative(d))throw te.a.error("Buffer: Native "+d+" buffer crashed. Stopping playback.",e),e;te.a.error("Buffer: Custom "+d+" buffer crashed. Aborting it.",e),m.disposeSourceBuffer(d);var t=k(e,{defaultCode:"NONE",defaultReason:"Unknown `AdaptationBuffer` error"});return Object(B.a)(Object(Y.a)(tn.warning(t)),wn(p,y,d,{period:_}))})));return Object(B.a)(u,Object(V.a)(c,s))}));return Object(B.a)(Object(Y.a)(tn.adaptationChange(d,l,_)),n)}),Object(Z.a)(tn.periodBufferReady(d,_,t)))},An=l.a.MAXIMUM_MAX_BUFFER_AHEAD,xn=l.a.MAXIMUM_MAX_BUFFER_BEHIND;var kn=function(e,d,p,h,v,b){var t,n,a,m=e.manifest,c=e.initialPeriod,i=b.maxBufferAhead$,o=b.maxBufferBehind$,g=b.wantedBufferAhead$,y=new Rt(function(e){var t=e.bufferType,n=null!=xn[t]?xn[t]:1/0,r=null!=An[t]?An[t]:1/0;return Mt({queuedSourceBuffer:e,clock$:d.pipe(Object(q.a)(function(e){return e.currentTime})),maxBufferBehind$:o.pipe(Object(q.a)(function(e){return Math.min(e,n)})),maxBufferAhead$:i.pipe(Object(q.a)(function(e){return Math.min(e,r)}))})}),r=d.pipe(Object(ue.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset+t;if(n<m.getMinimumPosition()){var r=new ae.a("MEDIA_TIME_BEFORE_MANIFEST","The current position is behind the earliest time announced in the Manifest.");return Object(Y.a)(tn.warning(r))}if(n>m.getMaximumPosition()){var i=new ae.a("MEDIA_TIME_AFTER_MANIFEST","The current position is after the latest time announced in the Manifest.");return Object(Y.a)(tn.warning(i))}return H.a})),u=(t=["audio","video"],null==oe.a.nativeTextTracksBuffer&&null==oe.a.htmlTextTracksBuffer||t.push("text"),null!=oe.a.imageBuffer&&t.push("image"),t).map(function(e){return(a=e,t=c,o=new kt(function(e,t){return e.start-t.start}),u=new W.a,s=!1,n=d.pipe(Object(Q.a)(function(e){var t,n,r,i=e.currentTime,a=e.wantedTimeOffset;return s&&void 0!==m.getPeriodForTime(a+i)&&(t=a+i,n=o.head(),r=o.last(),null==n||null==r||n.start>t||(null==r.end?1/0:r.end)<t)}),Object(se.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset;te.a.info("BO: Current position out of the bounds of the active periods,re-creating buffers.",a,t+n),s=!1,u.next()}),Object(ue.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset,r=m.getPeriodForTime(t+n);if(null==r)throw new ae.a("MEDIA_TIME_NOT_FOUND","The wanted position is not found in the Manifest.");return i(r)})),r=Object(R.b)(m,"decipherabilityUpdate").pipe(Object(ue.a)(function(e){var r=h.get(a);if(!e.some(function(e){return e.adaptation.type===a})||null==r)return H.a;var t=function(u,s){u.synchronizeInventory();for(var c=[],l=u.getInventory(),e=function(e){var t=l[e];if(s.some(function(e){return t.infos.period.id===e.period.id&&t.infos.adaptation.id===e.adaptation.id&&t.infos.representation.id===e.representation.id})){var n=t.bufferedStart,r=t.bufferedEnd;if(void 0===n||void 0===r){te.a.warn("BO: No buffered start or end found from a segment.");var i=u.getBufferedRanges(),a=i.length;return 0===a?{v:[]}:{v:[{start:i.start(0),end:i.end(a-1)}]}}var o=c[c.length-1];void 0!==o&&o.end===n?o.end=r:c.push({start:n,end:r})}},t=0;t<l.length;t++){var n=e(t);if("object"==typeof n)return n.v}return c}(r,e);return s=!1,u.next(),B.a.apply(void 0,t.map(function(e){var t=e.start,n=e.end;return r.removeBuffer(t,n).pipe(Object(ve.a)())}).concat([Object(Y.a)(tn.needsNudgingSeek()),d.pipe(Object(L.a)(1),Object(ue.a)(function(e){var t=e.currentTime+e.wantedTimeOffset,n=m.getPeriodForTime(t);if(null==n)throw new ae.a("MEDIA_TIME_NOT_FOUND","The wanted position is not found in the Manifest.");return i(n)}))]))})),Object(V.a)(n,r,i(t))).pipe(Object(M.a)(I.a),Object(F.a)());function i(e){return function t(r,i,e){te.a.info("BO: Creating new Buffer for",r,i);var a=new W.a;var o=new W.a;var n=d.pipe(Object(Q.a)(function(e){var t=e.currentTime,n=e.wantedTimeOffset;return null!=i.end&&t+n>=i.end}));var u=a.pipe(St(function(e){return t(r,e,o)}));var s=e.pipe(Object(L.a)(1),Object(se.a)(function(){a.complete(),o.next(),o.complete()}),Object(F.a)());var c=Object(V.a)(n,s);var l=Sn({abrManager:p,bufferType:r,clock$:d,content:{manifest:m,period:i},garbageCollectors:y,segmentPipelinesManager:v,sourceBuffersStore:h,options:b,wantedBufferAhead$:g}).pipe(Object(ue.a)(function(e){var t=e.type;if("full-buffer"===t){var n=m.getPeriodAfter(i);if(null==n)return Object(Y.a)(tn.bufferComplete(r));a.next(n)}else"active-buffer"===t&&o.next();return Object(Y.a)(e)}),Object(F.a)());var f=Object(B.a)(l.pipe(Object(G.a)(c)),Object(Y.a)(tn.periodBufferCleared(r,i)).pipe(Object(se.a)(function(){te.a.info("BO: Destroying buffer for",r,i)})));return Object(V.a)(f,u,s.pipe(Object(ve.a)()))}(a,e,u).pipe(Object(se.a)(function(e){"periodBufferReady"===e.type?(s=!0,o.add(e.value.period)):"periodBufferCleared"===e.type&&o.removeElement(e.value.period)}),Object(F.a)())}var a,t,o,u,s,n,r}),s=(a=(n=u).length,V.a.apply(void 0,n).pipe(Object(Q.a)(function(e){var t=e.type;return"periodBufferCleared"===t||"adaptationChange"===t||"representationChange"===t}),Object(en.a)(function(e,t){switch(t.type){case"periodBufferCleared":var n=t.value,r=n.period,i=n.type,a=e[r.id];null!=a&&a.buffers.has(i)&&(a.buffers.delete(i),0===a.buffers.size&&delete e[r.id]);break;case"adaptationChange":if(null!=t.value.adaptation)return e;case"representationChange":var o=t.value,u=o.period,s=o.type,c=e[u.id];if(null==c||c.buffers.has(s)){var l=new Set;l.add(s),e[u.id]={period:u,buffers:l}}else c.buffers.add(s)}return e},{}),Object(q.a)(function(e){for(var t=Object.keys(e),n=[],r=0;r<t.length;r++){var i=e[t[r]];null!=i&&i.buffers.size===a&&n.push(i.period)}return n.reduce(function(e,t){return null==e?t:t.start<e.start?t:e},null)}),Object(X.a)(function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.id===t.id}))).pipe(Object(Q.a)(function(e){return null!=e}),Object(q.a)(function(e){return te.a.info("Buffer: New active period",e),tn.activePeriodChanged(e)})),l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return e.pipe(Object(Q.a)(function(e){return"complete-buffer"===e.type||"active-buffer"===e.type}),Object(q.a)(function(e){return"complete-buffer"===e.type}),Object(Z.a)(!1),Object(X.a)())});return Object(K.a)(r).pipe(Object(q.a)(function(e){return e.every(function(e){return e})}),Object(X.a)())}.apply(void 0,u).pipe(Object(q.a)(function(e){return e?tn.endOfStream():tn.resumeStream()}));return V.a.apply(void 0,u.concat([s,l,r]))};var Rn=n(220),In=n(101);var Mn=function(){function e(e){if(this.total=e,this.total<0)throw new In.a}return e.prototype.call=function(e,t){return t.subscribe(new Nn(e,this.total))},e}(),Nn=function(r){function e(e,t){var n=r.call(this,e)||this;return n.total=t,n.ring=new Array,n.count=0,n}return a.a(e,r),e.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},e.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()},e}(s.a),Cn=d.a.onRemoveSourceBuffers$,Dn=d.a.onSourceOpen$,Pn=d.a.onUpdate$;function Bn(i){return Object(he.a)(function(){if(te.a.debug("Init: Trying to call endOfStream"),"open"!==i.readyState)return te.a.debug("Init: MediaSource not open, cancel endOfStream"),Object(Y.a)(null);var e=i.sourceBuffers,t=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r.updating&&t.push(r)}return t}(e);if(0===t.length)return te.a.info("Init: Triggering end of stream"),i.endOfStream(),Object(Y.a)(null);te.a.debug("Init: Waiting SourceBuffers to be updated before calling endOfStream.");var n,r=t.map(function(e){return Pn(e).pipe(Object(L.a)(1))});return Object(Rn.a)(V.a.apply(void 0,r).pipe((n=1,function(e){return 0===n?Object(H.b)():e.lift(new Mn(n))})),Cn(e).pipe(Object(L.a)(1))).pipe(Object(ue.a)(function(){return Bn(i)}))})}var Ln=n(161),Un=l.a.BUFFER_DISCONTINUITY_THRESHOLD;var Fn=n(119);function $n(e,t){e<t.currentTime||(te.a.warn("Init: discontinuity seek",t.currentTime,e),t.currentTime=e)}var zn=n(113),Wn=n(118);function Vn(e){var P=e.mediaElement,B=e.manifest,L=e.clock$,U=e.speed$,F=e.bufferOptions,$=e.abrManager,z=e.segmentPipelinesManager;return function(o,e,t){var n,r,i,a=B.isLive?1/0:B.getMaximumPosition();n=o,i=(r=a)===1/0?Number.MAX_VALUE:r,n.duration!==i&&(te.a.info("Init: Setting duration",i),n.duration=i);var u=B.getPeriodForTime(e);if(null==u)throw new ae.a("MEDIA_STARTING_TIME_NOT_FOUND","Wanted starting time not found in the Manifest.");var s,c,l=new nn(P,o);s=l,c=u,Object.keys(c.adaptations).forEach(function(e){if(nn.isNative(e)){var t=c.adaptations[e],n=null!=t&&0<t.length?t[0].representations:[];if(0<n.length){var r=n[0].getMimeTypeString();s.createSourceBuffer(e,r)}}});var f,d,p,h,v,b,m,g,y,_,O,E,w,j,T=Object(zn.a)(L,P,e,t),S=T.seek$,A=T.load$,x=A.pipe(Object(Q.a)(function(e){return"not-loaded-metadata"!==e})),k=(f=L,p=(d={autoPlay:t,initialPlay$:x,initialSeek$:S,manifest:B,speed$:U,startTime:e}).autoPlay,h=d.initialPlay$,v=d.initialSeek$,b=d.manifest,m=d.speed$,g=d.startTime,_=y=!1,O=h.pipe(Object(se.a)(function(){y=!0}),Object(ve.a)()),E=v.pipe(Object(se.a)(function(){_=!0}),Object(ve.a)()),w=Object(K.a)([f,m]).pipe(Object(q.a)(function(e){var t=e[0],n=e[1],r=b.isLive;return{currentTime:t.currentTime,duration:t.duration,isPaused:y?t.paused:!p,isLive:r,liveGap:r?b.getMaximumPosition()-t.currentTime:1/0,readyState:t.readyState,speed:n,stalled:t.stalled,wantedTimeOffset:_?0:g-t.currentTime}})),Object(V.a)(O,E,w)),R=new W.a,I=kn({manifest:B,initialPeriod:u},k,$,l,z,F).pipe(Object(ue.a)(function(e){switch(e.type){case"end-of-stream":return te.a.debug("Init: end-of-stream order received."),Dn(a=o).pipe(Object(Z.a)(null),Object(le.a)(function(){return Bn(a)})).pipe(Object(ve.a)(),Object(G.a)(R));case"resume-stream":return te.a.debug("Init: resume-stream order received."),R.next(null),H.a;case"discontinuity-encountered":var t=e.value,n=t.bufferType,r=t.gap;return nn.isNative(n)&&$n(r[1],P),H.a;case"needs-nudging-seek":var i=P.currentTime;i+.001<P.duration?P.currentTime+=.001:P.currentTime=i;default:return Object(Y.a)(e)}var a})),M=Object(Wn.a)(P,U,L,{pauseWhenStalled:!0}).pipe(Object(q.a)(Ot.a.speedChanged)),N=Object(Fn.a)(L).pipe(Object(q.a)(Ot.a.stalled)),C=(j=B,L.pipe(Object(Q.a)(function(e){return null!==e.stalled}),Object(q.a)(function(e){var t=e.buffered,n=e.currentTime,r=e.currentRange,i=e.state,a=e.stalled,o=Object(re.e)(t,n);if(Object(Ln.a)(n,r,i,null!==a))return te.a.warn("Init: After freeze seek",n,r),[n,n];if(o<Un)return[n,n+o+1/60];var u=j.getPeriodForTime(n);if(null!=u){var s=j.getPeriodAfter(u);if(null!=u&&null!=u.end&&null!=s&&n>u.end-1&&n<=s.start&&s.start-u.end==0)return[u.end,s.start]}}),Object(Q.a)(function(e){return void 0!==e}),Object(X.a)())).pipe(Object(se.a)(function(e){$n(e[1],P)}),Object(ve.a)()),D=A.pipe(Object(ue.a)(function(e){if("autoplay-blocked"===e){var t=new ae.a("MEDIA_ERR_BLOCKED_AUTOPLAY","Cannot trigger auto-play automatically: your browser does not allow it.");return Object(Y.a)(Ot.a.warning(t),Ot.a.loaded(l))}if("not-loaded-metadata"!==e)return te.a.debug("Init: The current content is loaded."),Object(Y.a)(Ot.a.loaded(l));var n=new ae.a("MEDIA_ERR_NOT_LOADED_METADATA","Cannot load automatically: your browser falsely announced having loaded the content.");return Object(Y.a)(Ot.a.warning(n))}));return Object(V.a)(C,D,M,N,I).pipe(ce(function(){l.disposeAll()}))}}function Hn(u,s,c,l){function f(e){var n=e.manifest,r=e.sendingTime,t=null==r?0:performance.now()-r,i=Math.max(1e3*l-t,0),a=s.pipe(Object(ue.a)(function(e){return Object(ze.a)(Math.max(e-t,i))})),o=function(){if(null==n.lifetime||n.lifetime<=0)return H.a;var e=null==r?0:performance.now()-r,t=1e3*n.lifetime-e;return Object(ze.a)(Math.max(t,i))}();return Object(V.a)(o,a).pipe(Object(L.a)(1),Object(ue.a)(function(){return function(n,e){var t=n.getUrl();if(!Object(mt.a)(t))return te.a.warn("Init: Cannot refresh the manifest: no url"),H.a;var r=n.getClockOffset();return e(t,r).pipe(Object(se.a)(function(e){var t=e.manifest;n.update(t)}))}(u.manifest,c)}),Object(ue.a)(f),Object(ve.a)())}return Object(he.a)(function(){return f(u)})}var Kn=n(117),Yn=l.a.OUT_OF_SYNC_MANIFEST_REFRESH_DELAY;var Gn=function(e){var r,i,t=e.adaptiveOptions,d=e.autoPlay,p=e.bufferOptions,h=e.clock$,n=e.keySystems,v=e.lowLatencyMode,b=e.mediaElement,m=e.minimumManifestUpdateInterval,a=e.networkConfig,o=e.pipelines,g=e.speed$,y=e.startAt,_=e.textTrackOptions,u=e.url,s=a.offlineRetry,c=a.segmentRetry,l=a.manifestRetry,f=new W.a,O=et(o,{lowLatencyMode:v,manifestRetry:l,offlineRetry:s},f),E=(i=!(r=function(t,n){return O.fetch(t).pipe(Object(ue.a)(function(e){return O.parse(e.value,t,n)}),Object(F.a)())}),function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return new N.a(function(t){if(!i){i=!0;var e=r.apply(void 0,n).subscribe(function(e){t.next(e)},function(e){i=!1,t.error(e)},function(){i=!1,t.complete()});return function(){e.unsubscribe(),i=!1}}t.complete()})}),w=new pt(o,{lowLatencyMode:v,offlineRetry:s,segmentRetry:c}),j=new Fe(t),T=_t(b).pipe(Object(M.a)(I.a),Object(F.a)()),S=new W.a,A=T.pipe(Object(ue.a)(function(){return Object(ht.a)(b,n,S)}),Object(M.a)(I.a),Object(F.a)()),x=Object(Kn.a)(b),k=Object(K.a)([T,E(u,void 0),A.pipe(Object(Q.a)(wt.a),Object(L.a)(1))]).pipe(Object(ue.a)(function(e){var t=e[0],n=e[1],r=n.manifest,i=n.sendingTime;te.a.debug("Init: Calculating initial time");var a=function(e,t,n){if(te.a.debug("Init: calculating initial time"),null!=n){var r=e.getMinimumPosition(),i=e.getMaximumPosition();if(null!=n.position)return te.a.debug("Init: using startAt.minimumPosition"),Math.max(Math.min(n.position,i),r);if(null!=n.wallClockTime){te.a.debug("Init: using startAt.wallClockTime");var a=null==e.availabilityStartTime?0:e.availabilityStartTime,o=n.wallClockTime-a;return Math.max(Math.min(o,i),r)}if(null!=n.fromFirstPosition){te.a.debug("Init: using startAt.fromFirstPosition");var u=n.fromFirstPosition;return u<=0?r:Math.min(i,r+u)}if(null!=n.fromLastPosition){te.a.debug("Init: using startAt.fromLastPosition");var s=n.fromLastPosition;return 0<=s?i:Math.max(r,i+s)}if(null!=n.percentage){te.a.debug("Init: using startAt.percentage");var c=n.percentage;return 100<c?i:c<0?r:r+(i-r)*(c/100)}}var l=e.getMinimumPosition();if(e.isLive){var f,d=e.suggestedPresentationDelay,p=e.getClockOffset(),h=e.getMaximumPosition();if(null==p)te.a.info("Init: no clock offset found for a live content, starting close to maximum available position"),f=h;else{te.a.info("Init: clock offset found for a live content, checking if we can start close to it");var v=null==e.availabilityStartTime?0:e.availabilityStartTime,b=(performance.now()+p)/1e3-v;f=Math.min(h,b)}if(te.a.debug("Init: "+f+" defined as the live time, applying a live gap of "+d),null!=d)return Math.max(f-d,l);var m=f-(t?Et.LOW_LATENCY:Et.DEFAULT);return Math.max(m,l)}return te.a.info("Init: starting at the minimum available position:",l),l}(r,v,y);te.a.debug("Init: Initial time calculated:",a);var s=Vn({abrManager:j,bufferOptions:P()({textTrackOptions:_},p),clock$:h,manifest:r,mediaElement:b,segmentPipelinesManager:w,speed$:g}),o=function r(e,t,n){var i=new W.a;var a=s(e,t,n).pipe(Object(se.a)(function(e){switch(e.type){case"needs-manifest-refresh":c.next(0);break;case"manifest-might-be-out-of-sync":c.next(Yn);break;case"needs-media-source-reload":i.next(e.value);break;case"protected-segment":S.next(e.value)}}));var o=a.pipe(Object(G.a)(i));var u=i.pipe(Object(le.a)(function(e){var t=e.currentTime,n=e.isPaused;return _t(b).pipe(Object(ue.a)(function(e){return r(e,t,!n)}),Object(Z.a)(Ot.a.reloadingMediaSource()))}));return Object(V.a)(u,o)}(t,a,d),c=new W.a,u=Hn({manifest:r,sendingTime:i},c,E,m),l=Object(V.a)(Object(R.b)(r,"manifestUpdate").pipe(Object($.a)(Ot.a.manifestUpdate())),Object(R.b)(r,"decipherabilityUpdate").pipe(Object(q.a)(Ot.a.decipherabilityUpdate))),f=A.pipe(Object(se.a)(function(e){"blacklist-keys"===e.type?(te.a.info("Init: blacklisting Representations based on keyIDs"),r.addUndecipherableKIDs(e.value)):"blacklist-protection-data"===e.type&&(te.a.info("Init: blacklisting Representations based on protection data."),r.addUndecipherableProtectionData(e.value.type,e.value.data))}));return Object(V.a)(l,u,f,o).pipe(Object(Z.a)(Ot.a.manifestReady(r)),ce(function(){c.complete()}))}));return Object(V.a)(k,x,A,f.pipe(Object(q.a)(Ot.a.warning)))},qn=n(116),Xn=l.a.SAMPLING_INTERVAL_MEDIASOURCE,Qn=l.a.SAMPLING_INTERVAL_LOW_LATENCY,Zn=l.a.SAMPLING_INTERVAL_NO_MEDIASOURCE,Jn=l.a.RESUME_GAP_AFTER_SEEKING,er=l.a.RESUME_GAP_AFTER_NOT_ENOUGH_DATA,tr=l.a.RESUME_GAP_AFTER_BUFFERING,nr=l.a.STALL_GAP,rr=["canplay","play","progress","seeking","seeked","loadedmetadata","ratechange"];function ir(e,t){if(null===e)return 0;var n=t?"LOW_LATENCY":"DEFAULT";switch(e.reason){case"seeking":return Jn[n];case"not-ready":return er[n];default:return tr[n]}}function ar(e,t){var n=e.buffered,r=e.currentTime,i=e.duration,a=e.ended,o=e.paused,u=e.playbackRate,s=e.readyState,c=e.seeking;return{bufferGap:Object(re.d)(n,r),buffered:n,currentRange:Object(re.g)(n,r),currentTime:r,duration:i,ended:a,paused:o,playbackRate:u,readyState:s,seeking:c,state:t}}function or(e,t,n){var r,i,a,o,u,s,c=n.withMediaSource,l=n.lowLatencyMode,f=t.state,d=t.currentTime,p=t.bufferGap,h=t.currentRange,v=t.duration,b=t.paused,m=t.readyState,g=t.ended,y=e.stalled,_=e.state,O=e.currentTime,E=(i=v,a=l?"LOW_LATENCY":"DEFAULT",null!==(r=h)&&i-r.end<=nr[a]),w=1<=m&&"loadedmetadata"!==f&&null===y&&!(E||g);return c?w&&(p<=(l?nr.LOW_LATENCY:nr.DEFAULT)||p===1/0||1===m)?o=!0:null!==y&&1<m&&(p<1/0&&p>ir(y,l)||E||g)&&(u=!0):w&&(!b&&"timeupdate"===f&&"timeupdate"===_&&d===O||"seeking"===f&&p===1/0)?o=!0:null!==y&&("seeking"!==f&&d!==O||"canplay"===f||p<1/0&&(p>ir(y,l)||E||g))&&(u=!0),!0===u?null:!0===o||null!==y?(s="seeking"===f||t.seeking||null!==y&&"seeking"===y.reason?"seeking":1===m?"not-ready":"buffering",null!==y&&y.reason===s?y:{reason:s,timestamp:performance.now()}):null}var ur=function(i,a){return Object(he.a)(function(){var r=P()(ar(i,"init"),{stalled:null});var e=rr.map(function(e){return Object(Ct.a)(i,e).pipe(Object($.a)(e))}),t=a.lowLatencyMode?Qn:a.withMediaSource?Xn:Zn,n=Object(Nt.a)(t).pipe(Object($.a)("timeupdate"));return V.a.apply(void 0,[n].concat(e)).pipe(Object(q.a)(function(e){var t,n;return t=ar(i,e),n=or(r,t,a),r=P()(t,{stalled:n}),te.a.debug("API: new clock tick",r),r}),Object(Z.a)(r))}).pipe(Object(S.a)(function(){return new x.a(1)}),Object(qn.a)())},sr=l.a.FORCED_ENDED_THRESHOLD,cr="STOPPED",lr="LOADED",fr="LOADING",dr="PLAYING",pr="PAUSED",hr="ENDED",vr="BUFFERING",br="SEEKING",mr="RELOADING";var gr=n(92),yr=l.a.DEFAULT_AUTO_PLAY,_r=l.a.DEFAULT_INITIAL_BITRATES,Or=l.a.DEFAULT_LIMIT_VIDEO_WIDTH,Er=l.a.DEFAULT_MANUAL_BITRATE_SWITCHING_MODE,wr=l.a.DEFAULT_MAX_BITRATES,jr=l.a.DEFAULT_MAX_BUFFER_AHEAD,Tr=l.a.DEFAULT_MAX_BUFFER_BEHIND,Sr=l.a.DEFAULT_SHOW_NATIVE_SUBTITLE,Ar=l.a.DEFAULT_STOP_AT_END,xr=l.a.DEFAULT_TEXT_TRACK_MODE,kr=l.a.DEFAULT_THROTTLE_WHEN_HIDDEN,Rr=l.a.DEFAULT_THROTTLE_VIDEO_BITRATE_WHEN_HIDDEN,Ir=l.a.DEFAULT_WANTED_BUFFER_AHEAD;var Mr=n(76);function Nr(e){return e.map(function(e){return null==e?e:{normalized:Object(Mr.a)(e.language),audioDescription:e.audioDescription}})}function Cr(e){return e.map(function(e){return null==e?e:{normalized:Object(Mr.a)(e.language),closedCaption:e.closedCaption}})}var Dr=function(){function e(e){var t=e.preferredAudioTracks,n=e.preferredTextTracks;this._periods=new kt(function(e,t){return e.period.start-t.period.start}),this._audioChoiceMemory=new WeakMap,this._textChoiceMemory=new WeakMap,this._videoChoiceMemory=new WeakMap,this._preferredAudioTracks=t,this._preferredTextTracks=n}var t=e.prototype;return t.addPeriod=function(e,t,n){var r=Lr(this._periods,t),i=t.adaptations[e];if(null==i&&(i=[]),null!=r){if(null!=r[e])return void te.a.warn("TrackManager: "+e+" already added for period",t);r[e]={adaptations:i,adaptation$:n}}else{var a;this._periods.add(((a={period:t})[e]={adaptations:i,adaptation$:n},a))}},t.removePeriod=function(e,t){var n=function(e,t){for(var n=0;n<e.length();n++){if(e.get(n).period.id===t.id)return n}}(this._periods,t);if(null!=n){var r=this._periods.get(n);null!=r[e]?(delete r[e],null==r.audio&&null==r.text&&null==r.video&&this._periods.removeElement(r)):te.a.warn("TrackManager: "+e+" already removed for period",t)}else te.a.warn("TrackManager: "+e+" not found for period",t)},t.resetPeriods=function(){for(;0<this._periods.length();)this._periods.pop()},t.update=function(){this._updateAudioTrackChoices(),this._updateTextTrackChoices(),this._updateVideoTrackChoices()},t.setInitialAudioTrack=function(e){var t=Lr(this._periods,e),n=null!=t?t.audio:null;if(null==n||null==t)throw new Error("TrackManager: Given Period not found.");var r=this._preferredAudioTracks.getValue(),i=void 0===e.adaptations.audio?[]:e.adaptations.audio,a=this._audioChoiceMemory.get(e);if(null===a)n.adaptation$.next(null);else if(void 0!==a&&Object(tt.a)(i,a))n.adaptation$.next(a);else{var o=Pr(i,Nr(r));this._audioChoiceMemory.set(e,o),n.adaptation$.next(o)}},t.setInitialTextTrack=function(e){var t=Lr(this._periods,e),n=null!=t?t.text:null;if(null==n||null==t)throw new Error("TrackManager: Given Period not found.");var r=this._preferredTextTracks.getValue(),i=void 0===e.adaptations.text?[]:e.adaptations.text,a=this._textChoiceMemory.get(e);if(null===a)n.adaptation$.next(null);else if(void 0!==a&&Object(tt.a)(i,a))n.adaptation$.next(a);else{var o=Br(i,Cr(r));this._textChoiceMemory.set(e,o),n.adaptation$.next(o)}},t.setInitialVideoTrack=function(e){var t=Lr(this._periods,e),n=null!=t?t.video:null;if(null==n||null==t)throw new Error("TrackManager: Given Period not found.");var r=void 0===e.adaptations.video?[]:e.adaptations.video,i=this._videoChoiceMemory.get(e);if(null===i)n.adaptation$.next(null);else if(void 0!==i&&Object(tt.a)(r,i))n.adaptation$.next(i);else{var a=r[0];this._videoChoiceMemory.set(e,a),n.adaptation$.next(a)}},t.setAudioTrackByID=function(e,t){var n=Lr(this._periods,e),r=null!=n?n.audio:null;if(null==r)throw new Error("TrackManager: Given Period not found.");var i=Object(je.a)(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Audio Track not found.");this._audioChoiceMemory.get(e)!==i&&(this._audioChoiceMemory.set(e,i),r.adaptation$.next(i))},t.setTextTrackByID=function(e,t){var n=Lr(this._periods,e),r=null!=n?n.text:null;if(null==r)throw new Error("TrackManager: Given Period not found.");var i=Object(je.a)(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Text Track not found.");this._textChoiceMemory.get(e)!==i&&(this._textChoiceMemory.set(e,i),r.adaptation$.next(i))},t.setVideoTrackByID=function(e,t){var n=Lr(this._periods,e),r=null!=n?n.video:null;if(null==r)throw new Error("LanguageManager: Given Period not found.");var i=Object(je.a)(r.adaptations,function(e){return e.id===t});if(void 0===i)throw new Error("Video Track not found.");this._videoChoiceMemory.get(e)!==i&&(this._videoChoiceMemory.set(e,i),r.adaptation$.next(i))},t.disableTextTrack=function(e){var t=Lr(this._periods,e),n=null!=t?t.text:null;if(null==n)throw new Error("TrackManager: Given Period not found.");null!==this._textChoiceMemory.get(e)&&(this._textChoiceMemory.set(e,null),n.adaptation$.next(null))},t.getChosenAudioTrack=function(e){var t=Lr(this._periods,e);if(null==(null!=t?t.audio:null))return null;var n=this._audioChoiceMemory.get(e);if(null==n)return null;var r={language:Object(j.a)(n.language,""),normalized:Object(j.a)(n.normalizedLanguage,""),audioDescription:!0===n.isAudioDescription,id:n.id};return!0===n.isDub&&(r.dub=!0),r},t.getChosenTextTrack=function(e){var t=Lr(this._periods,e);if(null==(null!=t?t.text:null))return null;var n=this._textChoiceMemory.get(e);return null==n?null:{language:Object(j.a)(n.language,""),normalized:Object(j.a)(n.normalizedLanguage,""),closedCaption:!0===n.isClosedCaption,id:n.id}},t.getChosenVideoTrack=function(e){var t=Lr(this._periods,e);if(null==(null!=t?t.video:null))return null;var n=this._videoChoiceMemory.get(e);return null==n?null:{id:n.id,representations:n.representations.map(Ur)}},t.getAvailableAudioTracks=function(e){var t=Lr(this._periods,e),n=null!=t?t.audio:null;if(null==n)return[];var r=this._audioChoiceMemory.get(e),i=null!=r?r.id:null;return n.adaptations.map(function(e){var t={language:Object(j.a)(e.language,""),normalized:Object(j.a)(e.normalizedLanguage,""),audioDescription:!0===e.isAudioDescription,id:e.id,active:null!=i&&i===e.id};return!0===e.isDub&&(t.dub=!0),t})},t.getAvailableTextTracks=function(e){var t=Lr(this._periods,e),n=null!=t?t.text:null;if(null==n)return[];var r=this._textChoiceMemory.get(e),i=null!=r?r.id:null;return n.adaptations.map(function(e){return{language:Object(j.a)(e.language,""),normalized:Object(j.a)(e.normalizedLanguage,""),closedCaption:!0===e.isClosedCaption,id:e.id,active:null!=i&&i===e.id}})},t.getAvailableVideoTracks=function(e){var t=Lr(this._periods,e),n=null!=t?t.video:null;if(null==n)return[];var r=this._videoChoiceMemory.get(e),i=null!=r?r.id:null;return n.adaptations.map(function(e){return{id:e.id,active:null!==i&&i===e.id,representations:e.representations.map(Ur)}})},t._updateAudioTrackChoices=function(){var s=this,c=Nr(this._preferredAudioTracks.getValue());!function e(t){if(!(t>=s._periods.length())){var n=s._periods.get(t);if(null!=n.audio){var r=n.period,i=n.audio,a=void 0===r.adaptations.audio?[]:r.adaptations.audio,o=s._audioChoiceMemory.get(r);if(null===o||void 0!==o&&Object(tt.a)(a,o))e(t+1);else{var u=Pr(a,c);s._audioChoiceMemory.set(r,u),i.adaptation$.next(u),e(0)}}else e(t+1)}}(0)},t._updateTextTrackChoices=function(){var s=this,c=Cr(this._preferredTextTracks.getValue());!function e(t){if(!(t>=s._periods.length())){var n=s._periods.get(t);if(null!=n.text){var r=n.period,i=n.text,a=void 0===r.adaptations.text?[]:r.adaptations.text,o=s._textChoiceMemory.get(r);if(null===o||void 0!==o&&Object(tt.a)(a,o))e(t+1);else{var u=Br(a,c);s._textChoiceMemory.set(r,u),i.adaptation$.next(u),e(0)}}else e(t+1)}}(0)},t._updateVideoTrackChoices=function(){var s=this;!function e(t){if(!(t>=s._periods.length())){var n=s._periods.get(t);if(null!=n.video){var r=n.period,i=n.video,a=void 0===r.adaptations.video?[]:r.adaptations.video,o=s._videoChoiceMemory.get(r);if(null===o||void 0!==o&&Object(tt.a)(a,o))e(t+1);else{var u=a[0];s._videoChoiceMemory.set(r,u),i.adaptation$.next(u),e(0)}}else e(t+1)}}(0)},e}();function Pr(r,i){if(0===r.length)return null;for(var e=function(e){var t=i[e];if(null===t)return{v:null};var n=Object(je.a)(r,function(e){return Object(j.a)(e.normalizedLanguage,"")===t.normalized&&(t.audioDescription?!0===e.isAudioDescription:!0!==e.isAudioDescription)});return void 0!==n?{v:n}:void 0},t=0;t<i.length;t++){var n=e(t);if("object"==typeof n)return n.v}return r[0]}function Br(r,i){if(0===r.length)return null;for(var e=function(e){var t=i[e];if(null===t)return{v:null};var n=Object(je.a)(r,function(e){return Object(j.a)(e.normalizedLanguage,"")===t.normalized&&(t.closedCaption?!0===e.isClosedCaption:!0!==e.isClosedCaption)});return void 0!==n?{v:n}:void 0},t=0;t<i.length;t++){var n=e(t);if("object"==typeof n)return n.v}return null}function Lr(e,t){for(var n=0;n<e.length();n++){var r=e.get(n);if(r.period.id===t.id)return r}}function Ur(e){return{id:e.id,bitrate:e.bitrate,frameRate:e.frameRate,width:e.width,height:e.height,codec:e.codec}}function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $r=l.a.DEFAULT_UNMUTED_VOLUME,zr=d.a.isActive,Wr=d.a.isVideoVisible,Vr=d.a.onEnded$,Hr=d.a.onFullscreenChange$,Kr=d.a.onPlayPause$,Yr=d.a.onPictureInPictureEvent$,Gr=d.a.onSeeking$,qr=d.a.onTextTrackChanges$,Xr=d.a.videoWidth$,Qr=function(m){var e,t;function n(e){var t;void 0===e&&(e={}),t=m.call(this)||this;var n=function(e){var t,n,r,i,a,o,u,s,c,l,f,d,p;if(null==e.maxBufferAhead)t=jr;else if(t=Number(e.maxBufferAhead),isNaN(t))throw new Error("Invalid maxBufferAhead parameter. Should be a number.");if(null==e.maxBufferBehind)n=Tr;else if(n=Number(e.maxBufferBehind),isNaN(n))throw new Error("Invalid maxBufferBehind parameter. Should be a number.");if(null==e.wantedBufferAhead)r=Ir;else if(r=Number(e.wantedBufferAhead),isNaN(r))throw new Error("Invalid wantedBufferAhead parameter. Should be a number.");if(i=null==e.limitVideoWidth?Or:!!e.limitVideoWidth,o=!(a=null!=e.throttleWhenHidden?(Object(ie.a)("`throttleWhenHidden` API is deprecated. Consider using `throttleVideoBitrateWhenHidden` instead."),!!e.throttleWhenHidden):kr)&&(null==e.throttleVideoBitrateWhenHidden?Rr:!!e.throttleVideoBitrateWhenHidden),s=void 0!==e.preferredTextTracks?Array.isArray(e.preferredTextTracks)?e.preferredTextTracks:(Object(ie.a)("Invalid `preferredTextTracks` option, it should be an Array"),[]):[],u=void 0!==e.preferredAudioTracks?Array.isArray(e.preferredAudioTracks)?e.preferredAudioTracks:(Object(ie.a)("Invalid `preferredAudioTracks` option, it should be an Array"),[]):[],null==e.videoElement)c=document.createElement("video");else{if(!(e.videoElement instanceof HTMLMediaElement))throw new Error("Invalid videoElement parameter. Should be a HTMLMediaElement.");c=e.videoElement}if(null==e.initialVideoBitrate)l=_r.video;else if(l=Number(e.initialVideoBitrate),isNaN(l))throw new Error("Invalid initialVideoBitrate parameter. Should be a number.");if(null==e.initialAudioBitrate)f=_r.audio;else if(f=Number(e.initialAudioBitrate),isNaN(f))throw new Error("Invalid initialAudioBitrate parameter. Should be a number.");if(null==e.maxVideoBitrate)p=wr.video;else if(p=Number(e.maxVideoBitrate),isNaN(p))throw new Error("Invalid maxVideoBitrate parameter. Should be a number.");if(null==e.maxAudioBitrate)d=wr.audio;else if(d=Number(e.maxAudioBitrate),isNaN(d))throw new Error("Invalid maxAudioBitrate parameter. Should be a number.");return{maxBufferAhead:t,maxBufferBehind:n,limitVideoWidth:i,videoElement:c,wantedBufferAhead:r,throttleWhenHidden:a,throttleVideoBitrateWhenHidden:o,preferredAudioTracks:u,preferredTextTracks:s,initialAudioBitrate:f,initialVideoBitrate:l,maxAudioBitrate:d,maxVideoBitrate:p,stopAtEnd:null==e.stopAtEnd?Ar:!!e.stopAtEnd}}(e),r=n.initialAudioBitrate,i=n.initialVideoBitrate,a=n.limitVideoWidth,o=n.maxAudioBitrate,u=n.maxBufferAhead,s=n.maxBufferBehind,c=n.maxVideoBitrate,l=n.preferredAudioTracks,f=n.preferredTextTracks,d=n.throttleWhenHidden,p=n.throttleVideoBitrateWhenHidden,h=n.videoElement,v=n.wantedBufferAhead,b=n.stopAtEnd;return h.preload="auto",t.version="3.17.0",t.log=te.a,t.state="STOPPED",t.videoElement=h,t._priv_destroy$=new W.a,t._priv_pictureInPictureEvent$=new x.a(1),Yr(h).pipe(Object(G.a)(t._priv_destroy$)).subscribe(t._priv_pictureInPictureEvent$),Hr(h).pipe(Object(G.a)(t._priv_destroy$)).subscribe(function(){return t.trigger("fullscreenChange",t.isFullscreen())}),qr(h.textTracks).pipe(Object(G.a)(t._priv_destroy$),Object(q.a)(function(e){for(var t=e.target,n=[],r=0;r<t.length;r++){var i=t[r];n.push(i)}return n}),Object(X.a)(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0})).subscribe(function(e){return t._priv_onNativeTextTracksNext(e)}),t._priv_playing$=new x.a(1),t._priv_speed$=new g(h.playbackRate),t._priv_stopCurrentContent$=new W.a,t._priv_contentLock$=new g(!1),t._priv_bufferOptions={wantedBufferAhead$:new g(v),maxBufferAhead$:new g(u),maxBufferBehind$:new g(s)},t._priv_bitrateInfos={lastBitrates:{audio:r,video:i},maxAutoBitrates:{audio:new g(o),video:new g(c)},manualBitrates:{audio:new g(-1),video:new g(-1)}},t._priv_throttleWhenHidden=d,t._priv_throttleVideoBitrateWhenHidden=p,t._priv_limitVideoWidth=a,t._priv_mutedMemory=$r,t._priv_trackManager=null,t._priv_currentError=null,t._priv_contentInfos=null,t._priv_contentEventsMemory={},t._priv_stopAtEnd=b,t._priv_setPlayerState(cr),t._priv_preferredAudioTracks=new g(l),t._priv_preferredTextTracks=new g(f),t}t=m,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r,i,a,o=n.prototype;return o.stop=function(){this.state!==cr&&(this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(cr))},o.dispose=function(){this.stop(),null!==this.videoElement&&Object(y.a)(this.videoElement),this._priv_destroy$.next(),this._priv_destroy$.complete(),this._priv_stopCurrentContent$.complete(),this._priv_playing$.complete(),this._priv_speed$.complete(),this._priv_contentLock$.complete(),this._priv_bufferOptions.wantedBufferAhead$.complete(),this._priv_bufferOptions.maxBufferAhead$.complete(),this._priv_bufferOptions.maxBufferBehind$.complete(),this._priv_pictureInPictureEvent$.complete(),this._priv_bitrateInfos.manualBitrates.video.complete(),this._priv_bitrateInfos.manualBitrates.audio.complete(),this._priv_bitrateInfos.maxAutoBitrates.video.complete(),this._priv_bitrateInfos.maxAutoBitrates.audio.complete(),this.videoElement=null},o.loadVideo=function(e){var t=this,n=function(e){var t,n,r,i,a,o;if(null==e)throw new Error("No option set on loadVideo");if(null!=e.url)t=String(e.url);else if(null==e.transportOptions||null==e.transportOptions.manifestLoader)throw new Error("No url set on loadVideo");if(null==e.transport)throw new Error("No transport set on loadVideo");n=String(e.transport);var u=null==e.autoPlay?yr:!!e.autoPlay;if(null==e.keySystems)r=[];else{var s=r=Array.isArray(e.keySystems)?e.keySystems:[e.keySystems],c=Array.isArray(s),l=0;for(s=c?s:s[Symbol.iterator]();;){var f;if(c){if(l>=s.length)break;f=s[l++]}else{if((l=s.next()).done)break;f=l.value}if("string"!=typeof f.type||"function"!=typeof f.getLicense)throw new Error("Invalid key system given: Missing type string or getLicense callback")}}var d=void 0!==e.lowLatencyMode&&!!e.lowLatencyMode,p="object"==typeof e.transportOptions&&null!==e.transportOptions?e.transportOptions:{},h={aggressiveMode:p.aggressiveMode,checkMediaSegmentIntegrity:p.checkMediaSegmentIntegrity,lowLatencyMode:d,manifestLoader:p.manifestLoader,referenceDateTime:p.referenceDateTime,representationFilter:p.representationFilter,segmentLoader:p.segmentLoader,serverSyncInfos:p.serverSyncInfos,supplementaryImageTracks:[],supplementaryTextTracks:[]};if(void 0!==e.supplementaryTextTracks){var v=Array.isArray(e.supplementaryTextTracks)?e.supplementaryTextTracks:[e.supplementaryTextTracks],b=v,m=Array.isArray(b),g=0;for(b=m?b:b[Symbol.iterator]();;){var y;if(m){if(g>=b.length)break;y=b[g++]}else{if((g=b.next()).done)break;y=g.value}if("string"!=typeof y.language||"string"!=typeof y.mimeType||"string"!=typeof y.url)throw new Error("Invalid supplementary text track given. Missing either language, mimetype or url")}h.supplementaryTextTracks=v}if(void 0!==e.supplementaryImageTracks){var _=Array.isArray(e.supplementaryImageTracks)?e.supplementaryImageTracks:[e.supplementaryImageTracks],O=_,E=Array.isArray(O),w=0;for(O=E?O:O[Symbol.iterator]();;){var j;if(E){if(w>=O.length)break;j=O[w++]}else{if((w=O.next()).done)break;j=w.value}if("string"!=typeof j.mimeType||"string"!=typeof j.url)throw new Error("Invalid supplementary image track given. Missing either mimetype or url")}h.supplementaryImageTracks=_}if(null==e.textTrackMode)i=xr;else{if("native"!==e.textTrackMode&&"html"!==e.textTrackMode)throw new Error("Invalid textTrackMode.");i=e.textTrackMode}null!=e.defaultAudioTrack&&Object(ie.a)("The `defaultAudioTrack` loadVideo option is deprecated.\nPlease use the `preferredAudioTracks` constructor option or the`setPreferredAudioTracks` method instead");var T=Object(gr.b)(e.defaultAudioTrack);null!=e.defaultTextTrack&&Object(ie.a)("The `defaultTextTrack` loadVideo option is deprecated.\nPlease use the `preferredTextTracks` constructor option or the`setPreferredTextTracks` method instead");var S=Object(gr.c)(e.defaultTextTrack),A=null==e.hideNativeSubtitle?!Sr:!!e.hideNativeSubtitle,x=null==e.manualBitrateSwitchingMode?Er:e.manualBitrateSwitchingMode;if("html"===i){if(null==e.textTrackElement)throw new Error('You have to provide a textTrackElement in "html" textTrackMode.');if(!(e.textTrackElement instanceof HTMLElement))throw new Error("textTrackElement should be an HTMLElement.");a=e.textTrackElement}else null!=e.textTrackElement&&te.a.warn('API: You have set a textTrackElement without being in an "html" textTrackMode. It will be ignored.');if(null!=e.startAt)if(e.startAt.wallClockTime instanceof Date){var k=e.startAt.wallClockTime.getTime()/1e3;o=P()({},e.startAt,{wallClockTime:k})}else o=e.startAt;return{autoPlay:u,defaultAudioTrack:T,defaultTextTrack:S,hideNativeSubtitle:A,keySystems:r,lowLatencyMode:d,manualBitrateSwitchingMode:x,minimumManifestUpdateInterval:void 0!==e.transportOptions&&void 0!==e.transportOptions.minimumManifestUpdateInterval?e.transportOptions.minimumManifestUpdateInterval:0,networkConfig:null==e.networkConfig?{}:{manifestRetry:e.networkConfig.manifestRetry,offlineRetry:e.networkConfig.offlineRetry,segmentRetry:e.networkConfig.segmentRetry},startAt:o,textTrackElement:a,textTrackMode:i,transport:n,transportOptions:h,url:t}}(e);te.a.info("API: Calling loadvideo",n);var r=n.autoPlay,i=n.defaultAudioTrack,a=n.defaultTextTrack,o=n.keySystems,u=n.lowLatencyMode,s=n.manualBitrateSwitchingMode,c=n.minimumManifestUpdateInterval,l=n.networkConfig,f=n.startAt,d=n.transport,p=n.transportOptions,h=n.url;if(null===this.videoElement)throw new Error("the attached video element is disposed");this.stop();var v="directfile"===d;this._priv_currentError=null,this._priv_contentInfos={url:h,isDirectFile:v,sourceBuffersStore:null,thumbnails:null,manifest:null,currentPeriod:null,activeAdaptations:null,activeRepresentations:null,initialAudioTrack:i,initialTextTrack:a},this._priv_playing$.next(!1);var b,m=this.videoElement,g=ur(m,{withMediaSource:!v,lowLatencyMode:u}),y=Object(V.a)(this._priv_stopCurrentContent$,this._priv_stopAtEnd?Vr(m):H.a).pipe(Object(L.a)(1));if(v){if(null==oe.a.directfile)throw new Error("DirectFile feature not activated in your build.");var _=oe.a.directfile({autoPlay:r,clock$:g,keySystems:o,mediaElement:m,speed$:this._priv_speed$,startAt:f,url:h}).pipe(Object(G.a)(y));b=U()(_)}else{var O=oe.a.transports[d];if("function"!=typeof O)throw new Error('transport "'+d+'" not supported');var E=O(p),w={initialBitrates:this._priv_bitrateInfos.lastBitrates,lowLatencyMode:u,manualBitrates:this._priv_bitrateInfos.manualBitrates,maxAutoBitrates:this._priv_bitrateInfos.maxAutoBitrates,throttlers:{throttle:this._priv_throttleWhenHidden?{video:zr().pipe(Object(q.a)(function(e){return e?1/0:0}),Object(G.a)(this._priv_stopCurrentContent$))}:{},throttleBitrate:this._priv_throttleVideoBitrateWhenHidden?{video:Wr(this._priv_pictureInPictureEvent$).pipe(Object(q.a)(function(e){return e?1/0:0}),Object(G.a)(this._priv_stopCurrentContent$))}:{},limitWidth:this._priv_limitVideoWidth?{video:Xr(m,this._priv_pictureInPictureEvent$).pipe(Object(G.a)(this._priv_stopCurrentContent$))}:{}}},j="native"===n.textTrackMode?{textTrackMode:"native",hideNativeSubtitle:n.hideNativeSubtitle}:{textTrackMode:"html",textTrackElement:n.textTrackElement},T=P()({manualBitrateSwitchingMode:s},this._priv_bufferOptions),S=Gn({adaptiveOptions:w,autoPlay:r,bufferOptions:T,clock$:g,keySystems:o,lowLatencyMode:u,mediaElement:m,minimumManifestUpdateInterval:c,networkConfig:l,pipelines:E,speed$:this._priv_speed$,startAt:f,textTrackOptions:j,url:h}).pipe(Object(G.a)(y));b=U()(S)}var A,x,k=b.pipe(Object(Q.a)(function(e){return"stalled"===e.type}),Object(q.a)(function(e){return e.value})),R=b.pipe(Object(Q.a)(function(e){return"loaded"===e.type}),Object(F.a)()),I=b.pipe(Object(Q.a)(function(e){return"reloading-media-source"===e.type}),Object(F.a)()),M=Vr(m),N=Gr(m),C=Object(K.a)([this._priv_playing$,k.pipe(Object(Z.a)(null)),M.pipe(Object(Z.a)(null)),N.pipe(Object(Z.a)(null))]).pipe(Object(G.a)(this._priv_stopCurrentContent$),Object(q.a)(function(e){var t=e[0],n=e[1];return function(e,t,n){if(e.ended)return hr;if(null===n)return t?dr:pr;var r=Math.abs(e.duration-e.currentTime);return null!=sr&&r<sr?hr:"seeking"===n.reason?br:vr}(m,t,n)})),D=Object(B.a)(Object(Y.a)(fr),R.pipe(Object(L.a)(1),Object($.a)(lr)),Object(V.a)(C.pipe(Object(G.a)(I),(A=function(e){return e===pr},function(e){return e.lift(new z(A))})),I.pipe(Object(J.a)(R.pipe(Object(L.a)(1),Object(ee.a)(C),Object(Z.a)(mr)))))).pipe(Object(X.a)());this._priv_stopCurrentContent$.pipe(Object(L.a)(1)).subscribe(function(){void 0!==x&&x.unsubscribe()}),Kr(m).pipe(Object(G.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_onPlayPauseNext("play"===e.type)},ne.a),g.pipe(Object(G.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_triggerTimeChange(e)},ne.a),D.pipe(Object(G.a)(this._priv_stopCurrentContent$)).subscribe(function(e){return t._priv_setPlayerState(e)},ne.a),b.subscribe(function(e){return t._priv_onPlaybackEvent(e)},function(e){return t._priv_onPlaybackError(e)},function(){return t._priv_onPlaybackFinished()}),this._priv_contentLock$.pipe(Object(Q.a)(function(e){return!e}),Object(L.a)(1),Object(G.a)(this._priv_stopCurrentContent$)).subscribe(function(){x=b.connect()})},o.getError=function(){return this._priv_currentError},o.getManifest=function(){return null===this._priv_contentInfos?null:this._priv_contentInfos.manifest},o.getCurrentAdaptations=function(){if(null===this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;return null===t||null===n||null==n[t.id]?null:n[t.id]},o.getCurrentRepresentations=function(){if(null===this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeRepresentations;return null===t||null===n||null==n[t.id]?null:n[t.id]},o.getVideoElement=function(){return this.videoElement},o.getNativeTextTrack=function(){if(Object(ie.a)("getNativeTextTrack is deprecated. Please open an issue if you used this API."),null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return 0<e.textTracks.length?e.textTracks[0]:null},o.getPlayerState=function(){return this.state},o.isLive=function(){if(null===this._priv_contentInfos)return!1;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;return!t&&null!==n&&n.isLive},o.getUrl=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest,r=e.url;return t?r:null!=n?n.getUrl():void 0}},o.getVideoDuration=function(){if(null===this.videoElement)throw new Error("Disposed player");return this.videoElement.duration},o.getVideoBufferGap=function(){if(null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(re.d)(e.buffered,e.currentTime)},o.getVideoLoadedTime=function(){if(null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(re.h)(e.buffered,e.currentTime)},o.getVideoPlayedTime=function(){if(null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement;return Object(re.f)(e.buffered,e.currentTime)},o.getWallClockTime=function(){if(null===this.videoElement)throw new Error("Disposed player");if(null===this._priv_contentInfos)return this.videoElement.currentTime;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;return t?this.videoElement.currentTime:null==n?0:this.videoElement.currentTime+(void 0!==n.availabilityStartTime?n.availabilityStartTime:0)},o.getPosition=function(){if(null===this.videoElement)throw new Error("Disposed player");return this.videoElement.currentTime},o.getPlaybackRate=function(){return this._priv_speed$.getValue()},o.setPlaybackRate=function(e){this._priv_speed$.next(e)},o.getAvailableVideoBitrates=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;if(null===t||null===n)return[];var r=n[t.id];return void 0===r||null==r.video?[]:r.video.getAvailableBitrates()},o.getAvailableAudioBitrates=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos,t=e.currentPeriod,n=e.activeAdaptations;if(null===t||null===n)return[];var r=n[t.id];return void 0===r||null==r.audio?[]:r.audio.getAvailableBitrates()},o.getManualAudioBitrate=function(){return this._priv_bitrateInfos.manualBitrates.audio.getValue()},o.getManualVideoBitrate=function(){return this._priv_bitrateInfos.manualBitrates.video.getValue()},o.getVideoBitrate=function(){var e=this.getCurrentRepresentations();if(null!==e&&null!=e.video)return e.video.bitrate},o.getAudioBitrate=function(){var e=this.getCurrentRepresentations();if(null!==e&&null!=e.audio)return e.audio.bitrate},o.getMaxVideoBitrate=function(){return this._priv_bitrateInfos.maxAutoBitrates.video.getValue()},o.getMaxAudioBitrate=function(){return this._priv_bitrateInfos.maxAutoBitrates.audio.getValue()},o.play=function(){var n=this;if(null===this.videoElement)throw new Error("Disposed player");var e=this.videoElement.play();return null==e||"function"!=typeof e.catch?f.a.resolve():e.catch(function(e){if("NotAllowedError"===e.name){var t=new ae.a("MEDIA_ERR_PLAY_NOT_ALLOWED",e.toString());n.trigger("warning",t)}throw e})},o.pause=function(){if(null===this.videoElement)throw new Error("Disposed player");this.videoElement.pause()},o.seekTo=function(e){if(null===this.videoElement)throw new Error("Disposed player");if(null===this._priv_contentInfos)throw new Error("player: no content loaded");var t,n=this._priv_contentInfos,r=n.isDirectFile,i=n.manifest;if(!r&&null===i)throw new Error("player: the content did not load yet");if("number"==typeof e)t=e;else if("object"==typeof e){var a=e,o=this.videoElement.currentTime;if(null!=a.relative)t=o+a.relative;else if(null!=a.position)t=a.position;else{if(null==a.wallClockTime)throw new Error('invalid time object. You must set one of the following properties: "relative", "position" or "wallClockTime"');t=r||null===i?a.wallClockTime:a.wallClockTime-(void 0!==i.availabilityStartTime?i.availabilityStartTime:0)}}if(void 0===t)throw new Error("invalid time given");return this.videoElement.currentTime=t},o.isFullscreen=function(){return Object(ie.a)("isFullscreen is deprecated. Fullscreen management should now be managed by the application"),Object(p.b)()},o.setFullscreen=function(e){if(void 0===e&&(e=!0),Object(ie.a)("setFullscreen is deprecated. Fullscreen management should now be managed by the application"),null===this.videoElement)throw new Error("Disposed player");e?Object(p.c)(this.videoElement):Object(p.a)()},o.exitFullscreen=function(){Object(ie.a)("exitFullscreen is deprecated. Fullscreen management should now be managed by the application"),Object(p.a)()},o.getVolume=function(){if(null===this.videoElement)throw new Error("Disposed player");return this.videoElement.volume},o.setVolume=function(e){if(null===this.videoElement)throw new Error("Disposed player");var t=this.videoElement;e!==t.volume&&(t.volume=e,this.trigger("volumeChange",e))},o.isMute=function(){return 0===this.getVolume()},o.mute=function(){this._priv_mutedMemory=this.getVolume(),this.setVolume(0)},o.unMute=function(){0===this.getVolume()&&this.setVolume(0===this._priv_mutedMemory?$r:this._priv_mutedMemory)},o.setVideoBitrate=function(e){this._priv_bitrateInfos.manualBitrates.video.next(e)},o.setAudioBitrate=function(e){this._priv_bitrateInfos.manualBitrates.audio.next(e)},o.setMaxVideoBitrate=function(e){this._priv_bitrateInfos.maxAutoBitrates.video.next(e)},o.setMaxAudioBitrate=function(e){this._priv_bitrateInfos.maxAutoBitrates.audio.next(e)},o.setMaxBufferBehind=function(e){this._priv_bufferOptions.maxBufferBehind$.next(e)},o.setMaxBufferAhead=function(e){this._priv_bufferOptions.maxBufferAhead$.next(e)},o.setWantedBufferAhead=function(e){this._priv_bufferOptions.wantedBufferAhead$.next(e)},o.getMaxBufferBehind=function(){return this._priv_bufferOptions.maxBufferBehind$.getValue()},o.getMaxBufferAhead=function(){return this._priv_bufferOptions.maxBufferAhead$.getValue()},o.getWantedBufferAhead=function(){return this._priv_bufferOptions.wantedBufferAhead$.getValue()},o.getCurrentKeySystem=function(){if(null===this.videoElement)throw new Error("Disposed player");return Object(_.a)(this.videoElement)},o.getAvailableAudioTracks=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return null===this._priv_trackManager||null===e?[]:this._priv_trackManager.getAvailableAudioTracks(e)},o.getAvailableTextTracks=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return null===this._priv_trackManager||null===e?[]:this._priv_trackManager.getAvailableTextTracks(e)},o.getAvailableVideoTracks=function(){if(null===this._priv_contentInfos)return[];var e=this._priv_contentInfos.currentPeriod;return null===this._priv_trackManager||null===e?[]:this._priv_trackManager.getAvailableVideoTracks(e)},o.getAudioTrack=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(null!==this._priv_trackManager&&null!==e)return this._priv_trackManager.getChosenAudioTrack(e)}},o.getTextTrack=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(null!==this._priv_trackManager&&null!==e)return this._priv_trackManager.getChosenTextTrack(e)}},o.getVideoTrack=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(null!==this._priv_trackManager&&null!==e)return this._priv_trackManager.getChosenVideoTrack(e)}},o.setAudioTrack=function(e){if(null===this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(null===this._priv_trackManager||null===t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setAudioTrackByID(t,e)}catch(e){throw new Error("player: unknown audio track")}},o.setTextTrack=function(e){if(null===this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(null===this._priv_trackManager||null===t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setTextTrackByID(t,e)}catch(e){throw new Error("player: unknown text track")}},o.disableTextTrack=function(){if(null!==this._priv_contentInfos){var e=this._priv_contentInfos.currentPeriod;if(null!==this._priv_trackManager&&null!==e)return this._priv_trackManager.disableTextTrack(e)}},o.setVideoTrack=function(e){if(null===this._priv_contentInfos)throw new Error("No content loaded");var t=this._priv_contentInfos.currentPeriod;if(null===this._priv_trackManager||null===t)throw new Error("No compatible content launched.");try{this._priv_trackManager.setVideoTrackByID(t,e)}catch(e){throw new Error("player: unknown video track")}},o.getPreferredAudioTracks=function(){return this._priv_preferredAudioTracks.getValue()},o.getPreferredTextTracks=function(){return this._priv_preferredTextTracks.getValue()},o.setPreferredAudioTracks=function(e){if(!Array.isArray(e))throw new Error("Invalid `setPreferredAudioTracks` argument. Should have been an Array.");return this._priv_preferredAudioTracks.next(e)},o.setPreferredTextTracks=function(e){if(!Array.isArray(e))throw new Error("Invalid `setPreferredTextTracks` argument. Should have been an Array.");return this._priv_preferredTextTracks.next(e)},o.getImageTrackData=function(){return null===this._priv_contentInfos?null:this._priv_contentInfos.thumbnails},o.getMinimumPosition=function(){if(null===this._priv_contentInfos)return null;if(this._priv_contentInfos.isDirectFile)return 0;var e=this._priv_contentInfos.manifest;return null!=e?e.getMinimumPosition():null},o.getMaximumPosition=function(){if(null===this._priv_contentInfos)return null;var e=this._priv_contentInfos,t=e.isDirectFile,n=e.manifest;if(t){if(null===this.videoElement)throw new Error("Disposed player");return this.videoElement.duration}return null!=n?n.getMaximumPosition():null},o.__priv_getSourceBufferContent=function(e){if(null===this._priv_contentInfos||null===this._priv_contentInfos.sourceBuffersStore)return null;var t=this._priv_contentInfos.sourceBuffersStore.get(e);return null===t?null:t.getInventory()},o._priv_cleanUpCurrentContentState=function(){var e=this;this._priv_contentLock$.next(!0),this._priv_contentInfos=null,this._priv_trackManager=null,this._priv_contentEventsMemory={};function t(){e._priv_contentLock$.next(!1)}null!=this.videoElement?Object(O.a)(this.videoElement).pipe(Object(A.a)(function(){return H.a})).subscribe(ne.a,t,t):t()},o._priv_triggerContentEvent=function(e,t){var n=this._priv_contentEventsMemory[e];u()(n,t)||(this._priv_contentEventsMemory[e]=t,this.trigger(e,t))},o._priv_onPlaybackEvent=function(e){switch(e.type){case"activePeriodChanged":this._priv_onActivePeriodChanged(e.value);break;case"periodBufferReady":this._priv_onPeriodBufferReady(e.value);break;case"periodBufferCleared":this._priv_onPeriodBufferCleared(e.value);break;case"reloading-media-source":this._priv_onReloadingMediaSource();break;case"representationChange":this._priv_onRepresentationChange(e.value);break;case"adaptationChange":this._priv_onAdaptationChange(e.value);break;case"bitrateEstimationChange":this._priv_onBitrateEstimationChange(e.value);break;case"manifestReady":this._priv_onManifestReady(e.value);break;case"warning":this._priv_onPlaybackWarning(e.value);break;case"loaded":if(null===this._priv_contentInfos)return void te.a.error("API: Loaded event while no content is loaded");this._priv_contentInfos.sourceBuffersStore=e.value.sourceBuffersStore;break;case"decipherabilityUpdate":this._priv_triggerContentEvent("decipherabilityUpdate",e.value);break;case"added-segment":if(null===this._priv_contentInfos)return void te.a.error("API: Added segment while no content is loaded");var t=e.value,n=t.content,r=t.segmentData;if("image"===n.adaptation.type&&null!=r&&"bif"===r.type){var i=r.data;this._priv_contentInfos.thumbnails=i,this.trigger("imageTrackUpdate",{data:this._priv_contentInfos.thumbnails})}}},o._priv_onPlaybackError=function(e){var t=k(e,{defaultCode:"NONE",defaultReason:"An unknown error stopped content playback."});t.fatal=!0,this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_currentError=t,te.a.error("API: The player stopped because of an error:",e),this._priv_setPlayerState(cr),this._priv_currentError===t&&this.trigger("error",t)},o._priv_onPlaybackFinished=function(){this._priv_stopCurrentContent$.next(),this._priv_cleanUpCurrentContentState(),this._priv_setPlayerState(hr)},o._priv_onPlaybackWarning=function(e){var t=k(e,{defaultCode:"NONE",defaultReason:"An unknown error happened."});te.a.warn("API: Sending warning:",t),this.trigger("warning",t)},o._priv_onManifestReady=function(e){var t=this,n=e.manifest;if(null!==this._priv_contentInfos){this._priv_contentInfos.manifest=n;var r=this._priv_contentInfos,i=r.initialAudioTrack,a=r.initialTextTrack;this._priv_trackManager=new Dr({preferredAudioTracks:void 0===i?this._priv_preferredAudioTracks:new g([i]),preferredTextTracks:void 0===a?this._priv_preferredTextTracks:new g([a])}),Object(R.b)(n,"manifestUpdate").pipe(Object(G.a)(this._priv_stopCurrentContent$)).subscribe(function(){null!=t._priv_trackManager&&t._priv_trackManager.update()})}else te.a.error("API: The manifest is loaded but no content is.")},o._priv_onActivePeriodChanged=function(e){var t=e.period;if(null!==this._priv_contentInfos){if(this._priv_contentInfos.currentPeriod=t,this._priv_triggerContentEvent("periodChange",t),this._priv_triggerContentEvent("availableAudioTracksChange",this.getAvailableAudioTracks()),this._priv_triggerContentEvent("availableTextTracksChange",this.getAvailableTextTracks()),this._priv_triggerContentEvent("availableVideoTracksChange",this.getAvailableVideoTracks()),null!=this._priv_trackManager){var n=this._priv_trackManager.getChosenAudioTrack(t),r=this._priv_trackManager.getChosenTextTrack(t),i=this._priv_trackManager.getChosenVideoTrack(t);this._priv_triggerContentEvent("audioTrackChange",n),this._priv_triggerContentEvent("textTrackChange",r),this._priv_triggerContentEvent("videoTrackChange",i)}else this._priv_triggerContentEvent("audioTrackChange",null),this._priv_triggerContentEvent("textTrackChange",null),this._priv_triggerContentEvent("videoTrackChange",null);this._priv_triggerContentEvent("availableAudioBitratesChange",this.getAvailableAudioBitrates()),this._priv_triggerContentEvent("availableVideoBitratesChange",this.getAvailableVideoBitrates());var a=this.getCurrentRepresentations();if(null!=a&&null!=a.audio){var o=a.audio.bitrate;this._priv_triggerContentEvent("audioBitrateChange",null!=o?o:-1)}else this._priv_triggerContentEvent("audioBitrateChange",-1);var u=this.getCurrentRepresentations();if(null!=u&&null!=u.video){var s=u.video.bitrate;this._priv_triggerContentEvent("videoBitrateChange",null!=s?s:-1)}else this._priv_triggerContentEvent("videoBitrateChange",-1)}else te.a.error("API: The active period changed but no content is loaded")},o._priv_onPeriodBufferReady=function(e){var t=e.type,n=e.period,r=e.adaptation$;switch(t){case"video":null===this._priv_trackManager?(te.a.error("API: TrackManager not instanciated for a new video period"),r.next(null)):(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialVideoTrack(n));break;case"audio":null===this._priv_trackManager?(te.a.error("API: TrackManager not instanciated for a new "+t+" period"),r.next(null)):(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialAudioTrack(n));break;case"text":null===this._priv_trackManager?(te.a.error("API: TrackManager not instanciated for a new "+t+" period"),r.next(null)):(this._priv_trackManager.addPeriod(t,n,r),this._priv_trackManager.setInitialTextTrack(n));break;default:var i=n.adaptations[t];null!=i&&0<i.length?r.next(i[0]):r.next(null)}},o._priv_onPeriodBufferCleared=function(e){var t=e.type,n=e.period;switch(t){case"audio":case"text":case"video":null!=this._priv_trackManager&&this._priv_trackManager.removePeriod(t,n)}if(null!==this._priv_contentInfos){var r=this._priv_contentInfos,i=r.activeAdaptations,a=r.activeRepresentations;if(null!=i&&null!=i[n.id]){var o=i[n.id];delete o[t],0===Object.keys(o).length&&delete i[n.id]}if(null!=a&&null!=a[n.id]){var u=a[n.id];delete u[t],0===Object.keys(u).length&&delete a[n.id]}}},o._priv_onReloadingMediaSource=function(){null!==this._priv_contentInfos&&(this._priv_contentInfos.sourceBuffersStore=null),null!==this._priv_trackManager&&this._priv_trackManager.resetPeriods()},o._priv_onAdaptationChange=function(e){var t=e.type,n=e.adaptation,r=e.period;if(null!==this._priv_contentInfos){null===this._priv_contentInfos.activeAdaptations&&(this._priv_contentInfos.activeAdaptations={});var i,a=this._priv_contentInfos,o=a.activeAdaptations,u=a.currentPeriod,s=o[r.id];if(null==s)o[r.id]=((i={})[t]=n,i);else s[t]=n;if(null!=this._priv_trackManager&&null!=u&&null!=r&&r.id===u.id)switch(t){case"audio":var c=this._priv_trackManager.getChosenAudioTrack(u);this._priv_triggerContentEvent("audioTrackChange",c),this._priv_triggerContentEvent("availableAudioBitratesChange",this.getAvailableVideoBitrates());break;case"text":var l=this._priv_trackManager.getChosenTextTrack(u);this._priv_triggerContentEvent("textTrackChange",l);break;case"video":var f=this._priv_trackManager.getChosenVideoTrack(u);this._priv_triggerContentEvent("videoTrackChange",f),this._priv_triggerContentEvent("availableVideoBitratesChange",this.getAvailableVideoBitrates())}}else te.a.error("API: The adaptations changed but no content is loaded")},o._priv_onRepresentationChange=function(e){var t=e.type,n=e.period,r=e.representation;if(null!==this._priv_contentInfos){null===this._priv_contentInfos.activeRepresentations&&(this._priv_contentInfos.activeRepresentations={});var i,a=this._priv_contentInfos,o=a.activeRepresentations,u=a.currentPeriod,s=o[n.id];if(null==s)o[n.id]=((i={})[t]=r,i);else s[t]=r;var c=null==r?null:r.bitrate;null!=n&&null!=u&&u.id===n.id&&("video"===t?this._priv_triggerContentEvent("videoBitrateChange",null!=c?c:-1):"audio"===t&&this._priv_triggerContentEvent("audioBitrateChange",null!=c?c:-1))}else te.a.error("API: The representations changed but no content is loaded")},o._priv_onBitrateEstimationChange=function(e){var t=e.type,n=e.bitrate;null!=n&&(this._priv_bitrateInfos.lastBitrates[t]=n),this._priv_triggerContentEvent("bitrateEstimationChange",{type:t,bitrate:n})},o._priv_onPlayPauseNext=function(e){if(null===this.videoElement)throw new Error("Disposed player");this._priv_playing$.next(e)},o._priv_onNativeTextTracksNext=function(e){this.trigger("nativeTextTracksChange",e)},o._priv_setPlayerState=function(e){this.state!==e&&(this.state=e,te.a.info("API: playerStateChange event",e),this.trigger("playerStateChange",e))},o._priv_triggerTimeChange=function(e){if(null!==this._priv_contentInfos){if(this.state!==mr){var t=this._priv_contentInfos,n=t.isDirectFile,r=t.manifest;if((n||null!==r)&&null!=e){var i=null!==r?r.getMaximumPosition():void 0,a={position:e.currentTime,duration:e.duration,playbackRate:e.playbackRate,maximumBufferTime:i,bufferGap:isFinite(e.bufferGap)?e.bufferGap:0};if(null!==r&&null!=i&&r.isLive&&0<e.currentTime){var o=null==r.availabilityStartTime?0:r.availabilityStartTime;a.wallClockTime=e.currentTime+o,a.liveGap=i-e.currentTime}this.trigger("positionUpdate",a)}}}else te.a.warn("API: Cannot perform time update: no content loaded.")},r=n,a=[{key:"ErrorTypes",get:function(){return b.b}},{key:"ErrorCodes",get:function(){return b.a}},{key:"LogLevel",get:function(){return te.a.getLevel()},set:function(e){te.a.setLevel(e)}}],(i=null)&&Fr(r.prototype,i),a&&Fr(r,a),n}(R.a);Qr.version="3.17.0";var Zr=Qr;oe.a.emeManager=n(162).default,oe.a.imageBuffer=n(208).default,oe.a.imageParser=n(183).default,oe.a.transports.smooth=n(202).default,oe.a.transports.dash=n(201).default,oe.a.nativeTextTracksBuffer=n(206).default,oe.a.nativeTextTracksParsers.vtt=n(207).default,oe.a.nativeTextTracksParsers.ttml=n(209).default,oe.a.nativeTextTracksParsers.sami=n(185).default,oe.a.nativeTextTracksParsers.srt=n(186).default,oe.a.htmlTextTracksBuffer=n(205).default,oe.a.htmlTextTracksParsers.sami=n(187).default,oe.a.htmlTextTracksParsers.ttml=n(203).default,oe.a.htmlTextTracksParsers.srt=n(188).default,oe.a.htmlTextTracksParsers.vtt=n(204).default,oe.a.directfile=n(189).default;t.default=Zr},function(e,t,n){"use strict";n.r(t);var f=n(124),T=n(26),s=n(10),d=n(22),E=n(15);function p(e){var t=e.segment;if(t.isInit||null==t.mediaURL)return Object(T.a)({type:"data-created",value:{responseData:null}});var n=t.mediaURL;return Object(d.a)({url:n,responseType:"arraybuffer",sendProgressEvents:!0})}function h(e){var t=e.response,n=e.content,r=n.segment,i=n.period,a=t.data;if(t.isChunked)throw new Error("Image data should not be downloaded in chunks");if(null===a||null==s.a.imageParser)return Object(T.a)({chunkData:null,chunkInfos:0<r.timescale?{duration:r.isInit?0:r.duration,time:r.isInit?-1:r.time,timescale:r.timescale}:null,chunkOffset:Object(E.a)(r.timestampOffset,0),segmentProtections:[],appendWindow:[i.start,i.end]});var o=s.a.imageParser(new Uint8Array(a)),u=o.thumbs;return Object(T.a)({chunkData:{data:u,start:0,end:Number.MAX_VALUE,timescale:1,type:"bif"},chunkInfos:{time:0,duration:Number.MAX_VALUE,timescale:o.timescale},chunkOffset:Object(E.a)(r.timestampOffset,0),segmentProtections:[],appendWindow:[i.start,i.end]})}var r=n(12),b=n.n(r),v=n(219),m=n(175),g=n(31),y=n(47),_=n(86),C=n(11),i=n(53),D=n(41),A=n(108),P=n(0);function O(e){var t=Date.parse(e)-performance.now();if(!isNaN(t))return t;P.a.warn("DASH Parser: Invalid clock received: ",e)}function c(e){for(var t=e.representations,n=null,r=0;r<t.length;r++){var i=t[r].index.getLastPosition();if(void 0===i)return;null!==i&&(n=null==n?i:Math.min(n,i))}return null===n?null:n}function l(e){for(var t=e.representations,n=null,r=0;r<t.length;r++){var i=t[r].index.getFirstPosition();if(void 0===i)return;null!==i&&(n=null==n?i:Math.max(n,i))}return null===n?null:n}function x(e){if(0===e.periods.length)throw new Error("DASH Parser: no period available for a dynamic content");return[function(e){for(var t=0;t<=e.periods.length-1;t++){var n=e.periods[t].adaptations,r=null==n.audio?void 0:n.audio[0],i=null==n.video?void 0:n.video[0];if(null!=r||null!=i){var a=null,o=null;if(null!=r){var u=l(r);if(void 0===u)return;a=u}if(null!=i){var s=l(i);if(void 0===s)return;o=s}if(null!=r&&null===a||null!=i&&null===o)return void P.a.info("DASH Parser: found Period with no segment. ","Going to next one to calculate first position");if(null!=o)return null!=a?Math.max(a,o):o;if(null!=a)return a}}}(e),function(e){for(var t=e.periods.length-1;0<=t;t--){var n=e.periods[t].adaptations,r=null==n.audio?void 0:n.audio[0],i=null==n.video?void 0:n.video[0];if(null!=r||null!=i){var a=null,o=null;if(null!=r){var u=c(r);if(void 0===u)return;a=u}if(null!=i){var s=c(i);if(void 0===s)return;o=s}if(null!=r&&null===a||null!=i&&null===o)return void P.a.info("DASH Parser: found Period with no segment. ","Going to previous one to calculate last position");if(null!=o)return null!=a?Math.min(a,o):o;if(null!=a)return a}}}(e)]}function w(e){var t={},n=e.textContent;if(null!==n&&0!==n.length){for(var r=0;r<e.attributes.length;r++){var i=e.attributes[r];switch(i.name){case"availabilityTimeOffset":t.availabilityTimeOffset="INF"===i.value?1/0:parseInt(i.value,10)}}return{value:n,attributes:t}}}function u(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"lang":t.language=r.value;break;case"contentType":t.contentType=r.value;break;case"par":t.par=r.value}}return t}function a(e){for(var t,n,r,i=e.replace(/[^A-Za-z0-9\+\/]/g,""),a=i.length,o=3*a+1>>>2,u=new Uint8Array(o),s=0,c=0,l=0;l<a;l++)if(n=3&l,s|=(64<(r=i.charCodeAt(l))&&r<91?r-65:96<r&&r<123?r-71:47<r&&r<58?r+4:43===r?62:47===r?63:0)<<18-6*n,3==n||a-l==1){for(t=0;t<3&&c<o;t++,c++)u[c]=s>>>(16>>>t&24)&255;s=0}return u}var S=n(1);function j(e){return{children:function(e){for(var t=[],n=0;n<e.length;n++)if(e[n].nodeType===Node.ELEMENT_NODE){var r=e[n];if("cenc:pssh"===r.nodeName){var i=r.textContent;null!==i&&0<i.length&&t.push(a(i))}}return{cencPssh:t}}(e.childNodes),attributes:function(e){for(var t,n,r,i=0;i<e.attributes.length;i++){var a=e.attributes[i];switch(a.name){case"schemeIdUri":t=a.value;break;case"value":n=a.value;break;case"cenc:default_KID":r=Object(S.k)(a.value.replace(/-/g,""))}}return{schemeIdUri:t,value:n,keyId:r}}(e)}}var B=n(2),o=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,k=/([0-9]+)-([0-9]+)/;function R(e){return"true"===e}function I(e){return"true"===e||"false"!==e&&parseInt(e,10)}function M(e){return new Date(Date.parse(e)).getTime()/1e3}function N(e){if(!Object(B.a)(e))return 0;var t=o.exec(e);if(null==t)throw new Error(e+" is not a valid ISO8601 duration");return 365*parseFloat(Object(B.a)(t[2])?t[2]:"0")*24*60*60+30*parseFloat(Object(B.a)(t[4])?t[4]:"0")*24*60*60+24*parseFloat(Object(B.a)(t[6])?t[6]:"0")*60*60+60*parseFloat(Object(B.a)(t[8])?t[8]:"0")*60+60*parseFloat(Object(B.a)(t[10])?t[10]:"0")+parseFloat(Object(B.a)(t[12])?t[12]:"0")}function L(e){var t=k.exec(e);return null==t?null:[+t[1],+t[2]]}function U(e){for(var t,n,r=0;r<e.attributes.length;r++){var i=e.attributes[r];switch(i.name){case"schemeIdUri":t=i.value;break;case"value":n=i.value}}return{schemeIdUri:t,value:n}}function F(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"range":var i=L(r.value);null==i?P.a.warn('DASH: invalid range ("'+r.value+'")'):t.range=i;break;case"sourceURL":t.media=r.value}}return t}function $(e){for(var t={},n=e.childNodes,r=0;r<n.length;r++)if(n[r].nodeType===Node.ELEMENT_NODE){var i=n[r];"Initialization"===i.nodeName&&(t.initialization=F(i))}for(var a=0;a<e.attributes.length;a++){var o=e.attributes[a];switch(o.name){case"timescale":var u=parseInt(o.value,10);isNaN(u)?P.a.warn('DASH: invalid timescale ("'+o.value+'")'):t.timescale=u;break;case"presentationTimeOffset":var s=parseFloat(o.value);isNaN(s)?P.a.warn('DASH: invalid presentationTimeOffset ("'+o.value+'")'):t.presentationTimeOffset=s;break;case"indexRange":var c=L(o.value);Array.isArray(c)?t.indexRange=c:P.a.warn('DASH: invalid indexRange ("'+o.value+'")');break;case"indexRangeExact":t.indexRangeExact=R(o.value);break;case"availabilityTimeOffset":var l=parseFloat(o.value);isNaN(l)?P.a.warn('DASH: invalid availabilityTimeOffset ("'+o.value+'")'):t.availabilityTimeOffset=l;break;case"availabilityTimeComplete":t.availabilityTimeComplete=R(o.value);break;case"duration":var f=parseInt(o.value,10);isNaN(f)?P.a.warn('DASH: invalid duration ("'+o.value+'")'):t.duration=f;break;case"startNumber":var d=parseInt(o.value,10);isNaN(d)?P.a.warn('DASH: invalid startNumber ("'+o.value+'")'):t.startNumber=d}}var p=null==t.timescale?1:t.timescale,h=!0===t.indexRangeExact,v=null==t.availabilityTimeComplete||t.availabilityTimeComplete;return b()(t,{availabilityTimeComplete:v,indexRangeExact:h,timeline:[],timescale:p})}function z(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"media":t.media=r.value;break;case"indexRange":var i=L(r.value);Array.isArray(i)?t.indexRange=i:P.a.warn('DASH: invalid indexRange ("'+r.value+'")');break;case"index":t.index=r.value;break;case"mediaRange":var a=L(r.value);Array.isArray(a)?t.mediaRange=a:P.a.warn('DASH: invalid mediaRange ("'+r.value+'")')}}return t}function W(e){for(var t=$(e),n=[],r=e.childNodes,i=0;i<r.length;i++)if(r[i].nodeType===Node.ELEMENT_NODE){var a=r[i];if("SegmentURL"===a.nodeName){var o=z(a);n.push(o)}}var u=t.duration;if(null==u)throw new Error("Invalid SegmentList: no duration");return b()(t,{list:n,duration:u})}function V(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"t":var i=parseInt(r.value,10);isNaN(i)?P.a.warn('DASH: invalid t ("'+r.value+'")'):t.start=i;break;case"d":var a=parseInt(r.value,10);isNaN(a)?P.a.warn('DASH: invalid d ("'+r.value+'")'):t.duration=a;break;case"r":var o=parseInt(r.value,10);isNaN(o)?P.a.warn('DASH: invalid r ("'+r.value+'")'):t.repeatCount=o}}return t}function H(e){for(var t=[],n=e.childNodes,r=0;r<n.length;r++)if(n[r].nodeType===Node.ELEMENT_NODE){var i=n[r];if("S"===i.nodeName){var a=V(i);t.push(a)}}return t}function K(e){for(var t,n,r,i,a,o,u=$(e),s=0;s<e.childNodes.length;s++)if(e.childNodes[s].nodeType===Node.ELEMENT_NODE){var c=e.childNodes[s];"SegmentTimeline"===c.nodeName&&(o=H(c))}for(var l=0;l<e.attributes.length;l++){var f=e.attributes[l];switch(f.nodeName){case"initialization":null==u.initialization&&(u.initialization={media:f.value});break;case"index":n=f.value;break;case"availabilityTimeOffset":r=f.value;break;case"media":i=f.value;break;case"bitstreamSwitching":a=R(f.value)}}if(null!=o)t=b()({},u,{indexType:"timeline",timeline:o});else{var d=u.duration;if(null==d)throw new Error("Invalid SegmentTemplate: no duration");t=b()({},u,{indexType:"template",duration:d})}return null!=n&&(t.index=n),null!=i&&(t.media=i),null!=a&&(t.bitstreamSwitching=a),null!=r&&(t.availabilityTimeOffset="INF"===r?1/0:parseInt(r,10)),t}function Y(e){return{children:function(e){for(var t={baseURL:void 0},n=0;n<e.length;n++)if(e[n].nodeType===Node.ELEMENT_NODE){var r=e[n];switch(r.nodeName){case"BaseURL":t.baseURL=w(r);break;case"SegmentBase":t.segmentBase=$(r);break;case"SegmentList":t.segmentList=W(r);break;case"SegmentTemplate":t.segmentTemplate=K(r)}}return t}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"audioSamplingRate":t.audioSamplingRate=r.value;break;case"bandwidth":var i=parseInt(r.value,10);isNaN(i)?P.a.warn('DASH: invalid bandwidth ("'+r.value+'")'):t.bitrate=i;break;case"codecs":t.codecs=r.value;break;case"codingDependency":t.codingDependency=R(r.value);break;case"frameRate":t.frameRate=r.value;break;case"height":var a=parseInt(r.value,10);isNaN(a)?P.a.warn('DASH: invalid height ("'+r.value+'")'):t.height=a;break;case"id":t.id=r.value;break;case"maxPlayoutRate":var o=parseFloat(r.value);isNaN(o)?P.a.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):t.maxPlayoutRate=o;break;case"maximumSAPPeriod":var u=parseFloat(r.value);isNaN(u)?P.a.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):t.maximumSAPPeriod=u;break;case"mimeType":t.mimeType=r.value;break;case"profiles":t.profiles=r.value;break;case"qualityRanking":var s=parseInt(r.value,10);isNaN(s)?P.a.warn('DASH: invalid qualityRanking ("'+r.value+'")'):t.qualityRanking=s;break;case"segmentProfiles":t.segmentProfiles=r.value;break;case"width":var c=parseInt(r.value,10);isNaN(c)?P.a.warn('DASH: invalid width ("'+r.value+'")'):t.width=c}}return t}(e)}}function G(e){return{children:function(e){for(var t={baseURL:void 0,representations:[]},n=[],r=0;r<e.length;r++)if(e[r].nodeType===Node.ELEMENT_NODE){var i=e[r];switch(i.nodeName){case"Accessibility":t.accessibility=U(i);break;case"BaseURL":t.baseURL=w(i);break;case"ContentComponent":t.contentComponent=u(i);break;case"EssentialProperty":null==t.essentialProperties?t.essentialProperties=[U(i)]:t.essentialProperties.push(U(i));break;case"Representation":var a=Y(i);t.representations.push(a);break;case"Role":null==t.roles?t.roles=[U(i)]:t.roles.push(U(i));break;case"SupplementalProperty":null==t.supplementalProperties?t.supplementalProperties=[U(i)]:t.supplementalProperties.push(U(i));break;case"SegmentBase":t.segmentBase=$(i);break;case"SegmentList":t.segmentList=W(i);break;case"SegmentTemplate":t.segmentTemplate=K(i);break;case"ContentProtection":var o=j(i);void 0!==o&&n.push(o)}}return 0<n.length&&(t.contentProtections=n),t}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"group":var i=parseInt(r.value,10);isNaN(i)?P.a.warn('DASH: invalid group ("'+r.value+'")'):t.group=i;break;case"lang":t.language=r.value;break;case"contentType":t.contentType=r.value;break;case"par":t.par=r.value;break;case"minBandwidth":var a=parseInt(r.value,10);isNaN(a)?P.a.warn('DASH: invalid minBandwidth ("'+r.value+'")'):t.minBitrate=a;break;case"maxBandwidth":var o=parseInt(r.value,10);isNaN(o)?P.a.warn('DASH: invalid maxBandwidth ("'+r.value+'")'):t.maxBitrate=o;break;case"minWidth":var u=parseInt(r.value,10);isNaN(u)?P.a.warn('DASH: invalid minWidth ("'+r.value+'")'):t.minWidth=u;break;case"maxWidth":var s=parseInt(r.value,10);isNaN(s)?P.a.warn('DASH: invalid maxWidth ("'+r.value+'")'):t.maxWidth=s;break;case"minHeight":var c=parseInt(r.value,10);isNaN(c)?P.a.warn('DASH: invalid minHeight ("'+r.value+'")'):t.minHeight=c;break;case"maxHeight":var l=parseInt(r.value,10);isNaN(l)?P.a.warn('DASH: invalid maxHeight ("'+r.value+'")'):t.maxHeight=l;break;case"minFrameRate":t.minFrameRate=r.value;break;case"maxFrameRate":t.maxFrameRate=r.value;break;case"segmentAlignment":var f=I(r.value);"number"==typeof f&&isNaN(f)?P.a.warn('DASH: invalid segmentAlignment ("'+r.value+'")'):t.segmentAlignment=f;break;case"subsegmentAlignment":var d=I(r.value);"number"==typeof d&&isNaN(d)?P.a.warn('DASH: invalid subsegmentAlignment ("'+r.value+'")'):t.subsegmentAlignment=d;break;case"bitstreamSwitching":t.bitstreamSwitching=R(r.value);break;case"audioSamplingRate":t.audioSamplingRate=r.value;break;case"codecs":t.codecs=r.value;break;case"codingDependency":t.codingDependency=R(r.value);break;case"frameRate":t.frameRate=r.value;break;case"height":var p=parseInt(r.value,10);isNaN(p)?P.a.warn('DASH: invalid height ("'+r.value+'")'):t.height=p;break;case"maxPlayoutRate":var h=parseFloat(r.value);isNaN(h)?P.a.warn('DASH: invalid maxPlayoutRate ("'+r.value+'")'):t.maxPlayoutRate=h;break;case"maximumSAPPeriod":var v=parseFloat(r.value);isNaN(v)?P.a.warn('DASH: invalid maximumSAPPeriod ("'+r.value+'")'):t.maximumSAPPeriod=v;break;case"mimeType":t.mimeType=r.value;break;case"profiles":t.profiles=r.value;break;case"segmentProfiles":t.segmentProfiles=r.value;break;case"width":var b=parseInt(r.value,10);isNaN(b)?P.a.warn('DASH: invalid width ("'+r.value+'")'):t.width=b}}return t}(e)}}function q(e){return{children:function(e){for(var t,n=[],r=0;r<e.length;r++)if(e[r].nodeType===Node.ELEMENT_NODE){var i=e[r];switch(i.nodeName){case"BaseURL":t=w(i);break;case"AdaptationSet":var a=G(i);n.push(a)}}return{baseURL:t,adaptations:n}}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"start":var i=N(r.value);isNaN(i)?P.a.warn("DASH: Unrecognized start in the mpd:",r.value):t.start=i;break;case"duration":var a=N(r.value);isNaN(a)?P.a.warn("DASH: Unrecognized duration in the mpd:",r.value):t.duration=a;break;case"bitstreamSwitching":t.bitstreamSwitching=R(r.value);break;case"xlink:href":t.xlinkHref=r.value;break;case"xlink:actuate":t.xlinkActuate=r.value}}return t}(e)}}function X(e){return{children:function(e){for(var t,n=[],r=[],i=[],a=0;a<e.length;a++)if(e[a].nodeType===Node.ELEMENT_NODE){var o=e[a];switch(o.nodeName){case"BaseURL":t=w(o);break;case"Location":n.push(null===o.textContent?"":o.textContent);break;case"Period":var u=q(o);r.push(u);break;case"UTCTiming":var s=U(o);i.push(s)}}return{baseURL:t,locations:n,periods:r,utcTimings:i}}(e.childNodes),attributes:function(e){for(var t={},n=0;n<e.attributes.length;n++){var r=e.attributes[n];switch(r.name){case"id":t.id=r.value;break;case"profiles":t.profiles=r.value;break;case"type":t.type=r.value;break;case"availabilityStartTime":t.availabilityStartTime=M(r.value);break;case"availabilityEndTime":t.availabilityEndTime=M(r.value);break;case"publishTime":t.publishTime=M(r.value);break;case"mediaPresentationDuration":t.duration=N(r.value);break;case"minimumUpdatePeriod":t.minimumUpdatePeriod=N(r.value);break;case"minBufferTime":t.minBufferTime=N(r.value);break;case"timeShiftBufferDepth":t.timeShiftBufferDepth=N(r.value);break;case"suggestedPresentationDelay":t.suggestedPresentationDelay=N(r.value);break;case"maxSegmentDuration":t.maxSegmentDuration=N(r.value);break;case"maxSubsegmentDuration":t.maxSubsegmentDuration=N(r.value)}}return t}(e)}}var Q=n(87),Z=n(77);var J=function(){function e(e){this._isDynamic=e.isDynamic,this._timeShiftBufferDepth=e.isDynamic&&null!=e.timeShiftBufferDepth?e.timeShiftBufferDepth:null}var t=e.prototype;return t.setLastPosition=function(e,t){this._lastPosition=e,this._positionTime=t},t.lastPositionIsKnown=function(){return this._isDynamic?null!=this._positionTime&&null!=this._lastPosition:null!=this._lastPosition},t.getMinimumBound=function(){if(!this._isDynamic||null===this._timeShiftBufferDepth)return 0;var e=this.getMaximumBound();return void 0!==e?e-this._timeShiftBufferDepth:void 0},t.getMaximumBound=function(){return this._isDynamic&&null!=this._positionTime&&null!=this._lastPosition?Math.max(this._lastPosition-this._positionTime+performance.now()/1e3,0):this._lastPosition},e}(),ee=n(13),te=["audio","video","text","image"],ne=["subtitle","caption"];var re=function(e,t,n){var r,i;return e+(null!=(i=null===(r=t)||void 0===r?void 0:r.attributes.availabilityTimeOffset)?i:0)+(null!=n?n:0)},ie=n(17);function ae(e){var t=e.initialization;return{id:"init",isInit:!0,time:0,duration:0,range:null!=t?t.range:void 0,indexRange:e.indexRange,mediaURL:null!=t?t.mediaURL:null,timescale:e.timescale,timestampOffset:-e.indexTimeOffset/e.timescale}}function oe(u){return function(e,t,n){var r,i,a,o=Object(B.a)(n)?parseInt(n,10):1;return r=String(u),i=o,(a=r.toString()).length>=i?a:(new Array(i+1).join("0")+a).slice(-i)}}function ue(e,t,n,r){return i=Object(D.a)(e,t),a=n,o=r,-1===i.indexOf("$")?i:i.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,String(a)).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,oe(void 0===o?0:o));var i,a,o}function se(e,r,i){return-1===e.indexOf("$")?e:e.replace(/\$\$/g,"$").replace(/\$Number(|\%0(\d+)d)\$/g,function(e,t,n){if(null==i)throw new Error("Segment number not defined in a $Number$ scheme");return oe(i)(e,t,n)}).replace(/\$Time(|\%0(\d+)d)\$/g,function(e,t,n){if(null==r)throw new Error("Segment time not defined in a $Time$ scheme");return oe(r)(e,t,n)})}function ce(e,t,n,r){for(var i,a,o=Object(ie.e)(t,e),u=Object(ie.e)(t+n,e),s=e.timeline,c=e.timescale,l=e.mediaURL,f=e.startNumber,d=null!=f?f:void 0,p=[],h=s.length,v=0<s.length&&null!=s[0].duration?s[0].duration:0,b=0;b<h;b++){var m=s[b],g=m.duration,y=m.start,_=m.range;v=Math.max(v,g);for(var O=Object(ie.a)(m,s[b+1],r),E=(i=g,0<(a=o-y)?Math.floor(a/i):0),w=y+E*g;w<u&&E<=O;){var j=null!=d?d+E:void 0,T={id:String(w),time:w-e.indexTimeOffset,isInit:!1,range:_,duration:g,timescale:c,mediaURL:se(l,w,j),number:j,timestampOffset:-e.indexTimeOffset/c};p.push(T),w=y+ ++E*g}if(u<=w)return p;null!=d&&(d+=O+1)}return p}function le(e,t){if(t.timescale!==e.timescale){var n=e.timescale;e.timeline.push({start:t.time/t.timescale*n,duration:t.duration/t.timescale*n,repeatCount:void 0===t.count?0:t.count,range:t.range})}else e.timeline.push({start:t.time,duration:t.duration,repeatCount:void 0===t.count?0:t.count,range:t.range});return!0}var fe=function(){function e(e,t){var n=t.periodStart,r=t.periodEnd,i=t.representationBaseURL,a=t.representationId,o=t.representationBitrate,u=e.timescale,s=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-n*u,c=ue(i,void 0!==e.initialization?e.initialization.media:void 0,a,o),l=void 0!==e.initialization?e.initialization.range:void 0!==e.indexRange?[0,e.indexRange[0]-1]:void 0;this._index={indexRange:e.indexRange,indexTimeOffset:s,initialization:{mediaURL:c,range:l},mediaURL:ue(i,e.media,a,o),startNumber:e.startNumber,timeline:e.timeline,timescale:u},this._scaledPeriodEnd=null==r?void 0:Object(ie.e)(r,this._index)}var t=e.prototype;return t.getInitSegment=function(){return ae(this._index)},t.getSegments=function(e,t){return ce(this._index,e,t,this._scaledPeriodEnd)},t.shouldRefresh=function(){return!1},t.getFirstPosition=function(){var e=this._index;return 0===e.timeline.length?null:Object(ie.b)(e.timeline[0].start,e)},t.getLastPosition=function(){var e=this._index.timeline;if(0===e.length)return null;var t=e[e.length-1],n=Object(ie.c)(t,null,this._scaledPeriodEnd);return Object(ie.b)(n,this._index)},t.isSegmentStillAvailable=function(){return!0},t.checkDiscontinuity=function(){return-1},t._addSegments=function(e){for(var t=0;t<e.length;t++)le(this._index,e[t])},t.canBeOutOfSyncError=function(){return!1},t.isFinished=function(){return!0},t._update=function(e){this._index=e._index},e}(),de=function(){function e(e,t){var n=t.periodStart,r=t.representationBaseURL,i=t.representationId,a=t.representationBitrate;this._periodStart=n;var o=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-n*e.timescale,u=e.list.map(function(e){return{mediaURL:ue(r,e.media,i,a),mediaRange:e.mediaRange}});this._index={list:u,timescale:e.timescale,duration:e.duration,indexTimeOffset:o,indexRange:e.indexRange,initialization:null==e.initialization?void 0:{mediaURL:ue(r,e.initialization.media,i,a),range:e.initialization.range}}}var t=e.prototype;return t.getInitSegment=function(){return ae(this._index)},t.getSegments=function(e,t){for(var n=this._index,r=n.duration,i=n.list,a=n.timescale,o=e-this._periodStart,u=Object(ie.d)(o,t,a),s=u[0],c=u[1],l=this._periodStart*a,f=Math.min(i.length-1,Math.floor(c/r)),d=[],p=Math.floor(s/r);p<=f;){var h=i[p].mediaRange,v=i[p].mediaURL,b={id:String(p),time:p*r+l,isInit:!1,range:h,duration:r,timescale:a,mediaURL:v,timestampOffset:-n.indexTimeOffset/a};d.push(b),p++}return d},t.shouldRefresh=function(e,t){var n=this._index,r=n.timescale,i=n.duration,a=n.list,o=t*r,u=Math.floor(o/i);return u<0||u>=a.length},t.getFirstPosition=function(){return this._periodStart},t.getLastPosition=function(){var e=this._index,t=e.duration;return e.list.length*t/e.timescale+this._periodStart},t.isSegmentStillAvailable=function(e){if(e.isInit)return!0;var t=this._index,n=this._periodStart*t.timescale,r=(e.timescale!==t.timescale?e.time*t.timescale/e.timescale+n:e.time-n)/t.duration;return 0<r&&r%1==0},t.checkDiscontinuity=function(){return-1},t.canBeOutOfSyncError=function(){return!1},t.isFinished=function(){return!0},t._update=function(e){this._index=e._index},t._addSegments=function(){0},e}(),pe=n(3).a.MINIMUM_SEGMENT_SIZE,he=function(){function e(e,t){var n=e.timescale,r=t.aggressiveMode,i=t.availabilityTimeOffset,a=t.manifestBoundsCalculator,o=t.isDynamic,u=t.periodEnd,s=t.periodStart,c=t.representationBaseURL,l=t.representationId,f=t.representationBitrate;this._availabilityTimeOffset=i,this._manifestBoundsCalculator=a,this._aggressiveMode=r;var d=null!=e.presentationTimeOffset?e.presentationTimeOffset:0,p=d-s*n;this._index={duration:e.duration,timescale:n,indexRange:e.indexRange,indexTimeOffset:p,initialization:null==e.initialization?void 0:{mediaURL:ue(c,e.initialization.media,l,f),range:e.initialization.range},mediaURL:ue(c,e.media,l,f),presentationTimeOffset:d,startNumber:e.startNumber},this._isDynamic=o,this._periodStart=s,this._relativePeriodEnd=null==u?void 0:u-s}var t=e.prototype;return t.getInitSegment=function(){return ae(this._index)},t.getSegments=function(e,t){var n=this._index,r=n.duration,i=n.startNumber,a=n.timescale,o=n.mediaURL,u=this._periodStart*a,s=null==this._relativePeriodEnd?void 0:this._relativePeriodEnd*a,c=e*a-u,l=(e+t)*a-u,f=this._getFirstSegmentStart(),d=this._getLastSegmentStart();if(null==f||null==d)return[];var p=Math.max(f,c),h=Math.min(d,l);if(h+r<=p)return[];for(var v=[],b=null==i?1:i,m=Math.floor(p/r),g=m*r;g<=h;g+=r){var y=m+b,_=null!=s&&s<g+r?s-g:r,O=g+u,E=se(o,g+this._index.presentationTimeOffset,y),w={id:String(y),number:y,time:O,isInit:!1,duration:_,timescale:a,mediaURL:E,timestampOffset:-n.indexTimeOffset/a};v.push(w),m++}return v},t.getFirstPosition=function(){var e=this._getFirstSegmentStart();return null==e?e:e/this._index.timescale+this._periodStart},t.getLastPosition=function(){var e=this._getLastSegmentStart();return null==e?e:(e+this._index.duration)/this._index.timescale+this._periodStart},t.shouldRefresh=function(){return!1},t.checkDiscontinuity=function(){return-1},t.isSegmentStillAvailable=function(e){if(e.isInit)return!0;if(e.timescale===this._index.timescale){var t=e.timescale,n=e.time-this._periodStart*t,r=this._getFirstSegmentStart(),i=this._getLastSegmentStart();if(void 0!==r&&void 0!==i)return null!==r&&null!==i&&(!(n<r)&&(!(i<n||e.duration!==this._index.duration)&&n/this._index.duration%1==0))}},t.canBeOutOfSyncError=function(){return!1},t.isFinished=function(){if(!this._isDynamic)return!0;if(null==this._relativePeriodEnd)return!1;var e=this._index.timescale,t=this._getLastSegmentStart();return null!=t&&t+this._index.duration+1/60*e>=this._relativePeriodEnd*e},t._addSegments=function(){P.a.warn("Tried to add Segments to a template RepresentationIndex")},t._update=function(e){this._index=e._index,this._aggressiveMode=e._aggressiveMode,this._isDynamic=e._isDynamic,this._periodStart=e._periodStart,this._relativePeriodEnd=e._relativePeriodEnd,this._manifestBoundsCalculator=e._manifestBoundsCalculator},t._getFirstSegmentStart=function(){if(!this._isDynamic)return 0;if(0===this._relativePeriodEnd||null==this._relativePeriodEnd){var e=this._manifestBoundsCalculator.getMaximumBound();if(void 0!==e&&e<this._periodStart)return null}var t=this._index,n=t.duration,r=t.timescale,i=this._manifestBoundsCalculator.getMinimumBound();if(void 0!==i){var a=i>this._periodStart?(i-this._periodStart)*r:0;return Math.floor(a/n)*n}},t._getLastSegmentStart=function(){var e=this._index,t=e.duration,n=e.timescale;if(this._isDynamic){var r=this._manifestBoundsCalculator.getMaximumBound();if(void 0===r)return;var i=this._aggressiveMode?t/n:0;if(null!=this._relativePeriodEnd&&this._relativePeriodEnd<r+i-this._periodStart){var a=this._relativePeriodEnd*n;return a<t?null:(Math.floor(a/t)-1)*t}var o=(r-this._periodStart)*n;if(o<0)return null;var u=((void 0!==this._availabilityTimeOffset?this._availabilityTimeOffset:0)+i)*n,s=Math.floor((o+u)/t);return s<=0?null:(s-1)*t}var c=(void 0===this._relativePeriodEnd?0:this._relativePeriodEnd)*n,l=Math.ceil(c/t)-1,f=l*t;return pe*n<c-f||0==l?f:(l-1)*t},e}(),ve=n(166),be=n(107),me=n(106);var ge=function(){function e(e,t){for(var n,r,i,a,o,u,s,c=t.manifestBoundsCalculator,l=t.isDynamic,f=t.representationBaseURL,d=t.representationId,p=t.representationBitrate,h=t.periodStart,v=t.periodEnd,b=e.timescale,m=h*b,g=(null!=e.presentationTimeOffset?e.presentationTimeOffset:0)-m,y=e.timeline,_=[],O=0;O<y.length;O++){var E=y[O],w=void 0===_[_.length-1]?null:_[_.length-1],j=void 0===y[O+1]?null:y[O+1],T=(r=w,i=j,a=m,u=o=void 0,o=(n=E).start,u=n.duration,s=n.repeatCount,null==o&&(null==r?o=a:null!=r.duration&&(o=r.start+r.duration*(r.repeatCount+1))),null!=u&&!isNaN(u)||null==i||null==i.start||isNaN(i.start)||null==o||isNaN(o)||(u=i.start-o),null==o||isNaN(o)||null==u||isNaN(u)||null!=s&&isNaN(s)?(P.a.warn('DASH: A "S" Element could not have been parsed.'),null):{start:o,duration:u,repeatCount:void 0===s?0:s});null!=T&&_.push(T)}this._manifestBoundsCalculator=c,this._lastUpdate=null==t.receivedTime?performance.now():t.receivedTime,this._isDynamic=l,this._index={indexRange:e.indexRange,indexTimeOffset:g,initialization:null==e.initialization?void 0:{mediaURL:ue(f,e.initialization.media,d,p),range:e.initialization.range},mediaURL:ue(f,e.media,d,p),startNumber:e.startNumber,timeline:_,timescale:b},this._scaledPeriodStart=Object(ie.e)(h,this._index),this._scaledPeriodEnd=null==v?void 0:Object(ie.e)(v,this._index)}var t=e.prototype;return t.getInitSegment=function(){return ae(this._index)},t.getSegments=function(e,t){return this._refreshTimeline(),ce(this._index,e,t,this._scaledPeriodEnd)},t.shouldRefresh=function(e,t){if(this._refreshTimeline(),!this._isDynamic)return!1;if(0===this._index.timeline.length)return!0;var n=this._index.timeline[this._index.timeline.length-1],r=Object(ie.c)(n,null,this._scaledPeriodEnd);if(t*this._index.timescale<r)return!1;var i=this._getTheoriticalLastPosition();return null==i||r<i},t.getFirstPosition=function(){this._refreshTimeline();var e=this._index;return 0===e.timeline.length?null:Object(ie.b)(e.timeline[0].start,e)},t.getLastPosition=function(){this._refreshTimeline();var e=this._index.timeline;if(0===e.length)return null;var t=e[e.length-1],n=Object(ie.c)(t,null,this._scaledPeriodEnd);return Object(ie.b)(n,this._index)},t.isSegmentStillAvailable=function(e){if(e.isInit)return!0;this._refreshTimeline();var t=this._index,n=t.timeline,r=t.timescale,i=t.indexTimeOffset;return Object(me.a)(e,n,r,i)},t.checkDiscontinuity=function(e){this._refreshTimeline();var t=this._index,n=t.timeline,r=t.timescale,i=Object(ie.e)(e,this._index);if(i<=0)return-1;var a=function(e,t){for(var n=e.timeline,r=0,i=n.length;r<i;){var a=r+i>>>1;n[a].start<t?r=1+a:i=a}return 0<r?r-1:r}(this._index,i);if(a<0||a>=n.length-1)return-1;var o=n[a];if(-1===o.duration)return-1;var u=n[a+1];if(null==u)return-1;var s=o.start,c=Object(ie.c)(o,u,this._scaledPeriodEnd);return c<u.start&&s<=i&&c-i<r?Object(ie.b)(u.start,this._index):-1},t.canBeOutOfSyncError=function(e){return!!this._isDynamic&&(e instanceof ve.a&&e.isHttpError(404))},t._update=function(e){this._index=e._index,this._isDynamic=e._isDynamic,this._scaledPeriodStart=e._scaledPeriodStart,this._scaledPeriodEnd=e._scaledPeriodEnd,this._lastUpdate=e._lastUpdate,this._manifestBoundsCalculator=e._manifestBoundsCalculator},t._addSegments=function(){0},t.isFinished=function(){if(!this._isDynamic)return!0;var e=this._index.timeline;if(null==this._scaledPeriodEnd||0===e.length)return!1;var t=e[e.length-1];return Object(ie.c)(t,null,this._scaledPeriodEnd)+1/60>=this._scaledPeriodEnd},t._refreshTimeline=function(){var e=this._manifestBoundsCalculator.getMinimumBound();if(null!=e){var t=Object(ie.e)(e,this._index);Object(be.a)(this._index.timeline,t)}},t._getTheoriticalLastPosition=function(){var e=this._index;if(!(e.timeline.length<=0)){var t=e.timeline[e.timeline.length-1],n=Object(ie.c)(t,null,this._scaledPeriodEnd);if(!this._isDynamic)return n;var r=t.duration,i=(performance.now()-this._lastUpdate)/1e3*e.timescale;return i<r?n:Math.floor(i/r)*r+n}},e}();function ye(e,f,d){return e.map(function(e){var t,n=void 0!==e.children.baseURL?e.children.baseURL.value:"",r=Object(D.a)(d.baseURL,n),i={aggressiveMode:d.aggressiveMode,availabilityTimeOffset:d.availabilityTimeOffset,manifestBoundsCalculator:d.manifestBoundsCalculator,isDynamic:d.isDynamic,periodEnd:d.end,periodStart:d.start,receivedTime:d.receivedTime,representationBaseURL:r,representationBitrate:e.attributes.bitrate,representationId:e.attributes.id,timeShiftBufferDepth:d.timeShiftBufferDepth};if(null!=e.children.segmentBase){var a=e.children.segmentBase;i.availabilityTimeOffset=re(d.availabilityTimeOffset,e.children.baseURL,a.availabilityTimeOffset),t=new fe(a,i)}else if(null!=e.children.segmentList){var o=e.children.segmentList;t=new de(o,i)}else if(null!=e.children.segmentTemplate){var u=e.children.segmentTemplate;t="timeline"===u.indexType?new ge(u,i):(i.availabilityTimeOffset=re(d.availabilityTimeOffset,e.children.baseURL,u.availabilityTimeOffset),new he(u,i))}else t=function(e,t){var n,r=e.children;if(null!=r.segmentBase){var i=r.segmentBase;n=new fe(i,t)}else if(null!=r.segmentList){var a=r.segmentList;n=new de(a,t)}else if(null!=r.segmentTemplate){var o=r.segmentTemplate;n="timeline"===o.indexType?new ge(o,t):new he(o,t)}else n=new he({duration:Number.MAX_VALUE,timescale:1,startNumber:0,initialization:{media:""},media:""},t);return n}(f,i);var s,c={bitrate:null==e.attributes.bitrate?(P.a.warn("DASH: No usable bitrate found in the Representation."),0):e.attributes.bitrate,index:t,id:null!=e.attributes.id?e.attributes.id:String(e.attributes.bitrate)+(null!=e.attributes.height?"-"+e.attributes.height:"")+(null!=e.attributes.width?"-"+e.attributes.width:"")+(null!=e.attributes.mimeType?"-"+e.attributes.mimeType:"")+(null!=e.attributes.codecs?"-"+e.attributes.codecs:"")};if(null!=e.attributes.codecs?s=e.attributes.codecs:null!=f.attributes.codecs&&(s=f.attributes.codecs),null!=s&&(s="mp4a.40.02"===s?"mp4a.40.2":s,c.codecs=s),null!=e.attributes.frameRate?c.frameRate=e.attributes.frameRate:null!=f.attributes.frameRate&&(c.frameRate=f.attributes.frameRate),null!=e.attributes.height?c.height=e.attributes.height:null!=f.attributes.height&&(c.height=f.attributes.height),null!=e.attributes.mimeType?c.mimeType=e.attributes.mimeType:null!=f.attributes.mimeType&&(c.mimeType=f.attributes.mimeType),null!=e.attributes.width?c.width=e.attributes.width:null!=f.attributes.width&&(c.width=f.attributes.width),null!=f.children.contentProtections){var l=f.children.contentProtections.reduce(function(e,t){var n;if(void 0!==t.attributes.schemeIdUri&&"urn:uuid:"===t.attributes.schemeIdUri.substring(0,9)&&(n=t.attributes.schemeIdUri.substring(9).replace(/-/g,"").toLowerCase()),void 0!==t.attributes.keyId&&0<t.attributes.keyId.length&&e.keyIds.push({keyId:t.attributes.keyId,systemId:n}),void 0!==n)for(var r=t.children.cencPssh,i=0;i<r.length;i++){var a=r[i];void 0===e.initData.cenc&&(e.initData.cenc=[]),e.initData.cenc.push({systemId:n,data:a})}return e},{keyIds:[],initData:{}});(0<Object.keys(l.initData).length||0<l.keyIds.length)&&(c.contentProtections=l)}return c})}function _e(e,N){return e.reduce(function(a,e){var t,n,r=e.children,i=a.adaptations,o=r.essentialProperties,u=r.roles;if(Array.isArray(o)&&o.some(function(e){return"http://dashif.org/guidelines/trickmode"===e.schemeIdUri}))return a;var s,c,l,f=Array.isArray(u)&&u.some(function(e){return"main"===e.value})&&u.some(function(e){return"urn:mpeg:dash:role:2011"===e.schemeIdUri}),d=e.children.representations,p=(null!=(n=null===(t=e.children.baseURL)||void 0===t?void 0:t.attributes.availabilityTimeOffset)?n:0)+N.availabilityTimeOffset,h={aggressiveMode:N.aggressiveMode,availabilityTimeOffset:p,baseURL:Object(D.a)(N.baseURL,void 0!==r.baseURL?r.baseURL.value:""),manifestBoundsCalculator:N.manifestBoundsCalculator,end:N.end,isDynamic:N.isDynamic,receivedTime:N.receivedTime,start:N.start,timeShiftBufferDepth:N.timeShiftBufferDepth},v=e.attributes.mimeType,b=e.attributes.codecs,m=function(e,t,n,r){function i(e,t){var n=e.split("/")[0];return Object(ee.a)(te,n)?n:"application/bif"===e?"image":"application/ttml+xml"===e?"text":"application/mp4"===e?null!=t&&null!=Object(C.a)(t,function(e){return"urn:mpeg:dash:role:2011"===e.schemeIdUri&&Object(ee.a)(ne,e.value)})?"text":"metadata":void 0}function a(e){switch(e.substring(0,3)){case"avc":case"hev":case"hvc":case"vp8":case"vp9":case"av1":return"video";case"vtt":return"text";case"bif":return"image"}switch(e.substring(0,4)){case"mp4a":return"audio";case"wvtt":case"stpp":return"text"}}if(null!=t){var o=i(t,r);if(null!=o)return o}if(null!=n){var u=a(n);if(null!=u)return u}for(var s=e.map(function(e){return e.attributes.mimeType}).filter(function(e){return null!=e}),c=e.map(function(e){return e.attributes.codecs}).filter(function(e){return null!=e}),l=0;l<s.length;l++){var f=s[l];if(null!=f){var d=i(f,r);if(null!=d)return d}}for(var p=0;p<c.length;p++){var h=c[p];if(null!=h){var v=a(h);if(null!=v)return v}}return"unknown"}(d,Object(B.a)(v)?v:null,Object(B.a)(b)?b:null,null!=r.roles?r.roles:null),g=ye(d,e,h),y=e.attributes.id,_=function(e){if(null!=e.children.supplementalProperties)for(var t=e.children.supplementalProperties,n=0;n<t.length;n++){var r=t[n];if("urn:mpeg:dash:adaptation-set-switching:2016"===r.schemeIdUri&&null!=r.value)return r.value.split(",").map(function(e){return e.trim()}).filter(function(e){return e})}return[]}(e),O=a.videoMainAdaptation;if("video"===m&&null!==O&&f){var E;(E=O.representations).push.apply(E,g),s=O.id}else{var w,j=r.accessibility;void 0!==u&&u.some(function(e){return"dub"===e.value})&&(w=!0);var T="text"===m&&null!=j&&(null!=(l=j)&&"urn:tva:metadata:cs:AudioPurposeCS:2007"===l.schemeIdUri&&"2"===l.value)||void 0,S="audio"===m&&null!=j&&(null!=(c=j)&&"urn:tva:metadata:cs:AudioPurposeCS:2007"===c.schemeIdUri&&"1"===c.value)||void 0,A={id:s=function(e,t,n){if(Object(B.a)(e.attributes.id))return e.attributes.id;var r=n.type;return Object(B.a)(e.attributes.language)&&(r+="-"+e.attributes.language),!0===n.isClosedCaption&&(r+="-cc"),!0===n.isAudioDescription&&(r+="-ad"),Object(B.a)(e.attributes.contentType)&&(r+="-"+e.attributes.contentType),Object(B.a)(e.attributes.codecs)&&(r+="-"+e.attributes.codecs),Object(B.a)(e.attributes.mimeType)&&(r+="-"+e.attributes.mimeType),Object(B.a)(e.attributes.frameRate)&&(r+="-"+e.attributes.frameRate),r.length===n.type.length&&(r+=0<t.length?"-"+t[0].id:"-empty"),"adaptation-"+r}(e,g,{isClosedCaption:T,isAudioDescription:S,type:m}),representations:g,type:m};null!=e.attributes.language&&(A.language=e.attributes.language),null!=T&&(A.closedCaption=T),null!=S&&(A.audioDescription=S),!0===w&&(A.isDub=!0);var x=i[m];if(void 0===x)i[m]=[A],f&&"video"===m&&(a.videoMainAdaptation=A);else{for(var k=null,R=function(e){var t=_[e],n=a.adaptationSwitchingInfos[t];if(null!=n&&n.newID!==s&&Object(ee.a)(n.adaptationSetSwitchingIDs,y)){var r,i=Object(C.a)(x,function(e){return e.id===t});if(null!=i&&i.audioDescription===A.audioDescription&&i.closedCaption===A.closedCaption&&i.language===A.language)P.a.info('DASH Parser: merging "switchable" AdaptationSets',y,t),(r=i.representations).push.apply(r,A.representations),k=i}},I=0;I<_.length;I++)R(I);if(f&&"video"===m)if(null==k)x.unshift(A),a.videoMainAdaptation=A;else{var M=x.indexOf(k);M<0?x.unshift(A):0!==M&&(x.splice(M,1),x.unshift(k)),a.videoMainAdaptation=k}else null===k&&x.push(A)}}return null!=y&&null==a.adaptationSwitchingInfos[y]&&(a.adaptationSwitchingInfos[y]={newID:s,adaptationSetSwitchingIDs:_}),{adaptations:i,adaptationSwitchingInfos:a.adaptationSwitchingInfos,videoMainAdaptation:a.videoMainAdaptation}},{adaptations:{},videoMainAdaptation:null,adaptationSwitchingInfos:{}}).adaptations}var Oe=Object(i.a)();function Ee(e,t){var n,r,u,s,c,i=[],a=(s=t,c=[],(u=e).forEach(function(e,t){var n,r;if(null!=e.attributes.start)n=e.attributes.start;else if(0===t)n=s.isDynamic&&null!=s.availabilityStartTime?s.availabilityStartTime:0;else{var i=c[c.length-1];if(null==i||null==i.periodEnd)throw new Error("Missing start time when parsing periods.");n=i.periodEnd}var a=u[t+1];null!=e.attributes.duration?r=e.attributes.duration:t===u.length-1?r=s.duration:null!=a.attributes.start&&(r=a.attributes.start-n);var o=null!=r?n+r:void 0;c.push({periodStart:n,periodDuration:r,periodEnd:o})}),c);if(a.length!==e.length)throw new Error("MPD parsing error: the time information are incoherent.");var o=t.isDynamic,l=t.timeShiftBufferDepth,f=new J({isDynamic:o,timeShiftBufferDepth:l});o||null==t.duration||f.setLastPosition(t.duration);for(var d=e.length-1;0<=d;d--){var p=e[d],h=t.xlinkInfos.get(p),v=Object(D.a)(t.baseURL,void 0!==p.children.baseURL?p.children.baseURL.value:""),b=a[d],m=b.periodStart,g=b.periodDuration,y=b.periodEnd,_=void 0;_=null==p.attributes.id?(P.a.warn("DASH: No usable id found in the Period. Generating one."),"gen-dash-period-"+Oe()):p.attributes.id;var O=void 0!==h?h.receivedTime:t.receivedTime,E=(null!=(r=null===(n=p.children.baseURL)||void 0===n?void 0:n.attributes.availabilityTimeOffset)?r:0)+t.availabilityTimeOffset,w={aggressiveMode:t.aggressiveMode,availabilityTimeOffset:E,baseURL:v,manifestBoundsCalculator:f,end:y,isDynamic:o,receivedTime:O,start:m,timeShiftBufferDepth:l},j=_e(p.children.adaptations,w),T={id:_,start:m,end:y,duration:g,adaptations:j};if(i.unshift(T),!f.lastPositionIsKnown()){var S=je(j);if(o)if("number"==typeof S){var A=performance.now()/1e3;f.setLastPosition(S,A)}else{var x=we(t,m);if(void 0!==x){var k=x[0],R=x[1];f.setLastPosition(k,R)}}else"number"==typeof S&&f.setLastPosition(S)}}if(t.isDynamic&&!f.lastPositionIsKnown()){var I=we(t,0);if(void 0!==I){var M=I[0],N=I[1];f.setLastPosition(M,N)}}return function(e){if(0===e.length)return[];for(var t=[e[0]],n=1;n<e.length;n++){for(var r=e[n],i=t[t.length-1];null==i.duration||i.start+i.duration>r.start;)P.a.warn("DASH: Updating overlapping Periods.",i,r),i.duration=r.start-i.start,i.end=r.start,i.duration<=0&&(t.pop(),i=t[t.length-1]);t.push(r)}return t}(i)}function we(e,t){if(null!=e.clockOffset){var n=e.clockOffset/1e3-e.availabilityStartTime,r=performance.now()/1e3,i=r+n;if(t<=i)return[i,r]}else{var a=Date.now()/1e3;if(t<=a)return P.a.warn("DASH Parser: no clock synchronization mechanism found. Using the system clock instead."),[a-e.availabilityStartTime,performance.now()/1e3]}}function je(e){for(var t=null,n=!0,r=Object(Z.a)(e).filter(function(e){return null!=e}),i=Object(Q.a)(r,function(e){return e}),a=0;a<i.length;a++)for(var o=i[a].representations,u=0;u<o.length;u++){var s=o[u].index.getLastPosition();null!==s&&(n=!1,"number"==typeof s&&(t=null==t?s:Math.max(t,s)))}return null!=t?t:n?null:void 0}var Te=Object(i.a)();function Se(e,t){return function v(b,m,e){var g=b.children,t=b.attributes;var y=new WeakMap;if(null==m.externalClockOffset){var n="dynamic"===t.type,r=Object(C.a)(g.utcTimings,function(e){return"urn:mpeg:dash:utc:direct:2014"===e.schemeIdUri&&null!=e.value}),i=null!=r&&null!=r.value?O(r.value):void 0,a=null==i||isNaN(i)?void 0:i;if(null!=a)m.externalClockOffset=a;else if(n&&!0!==e){var o=0<(u=b.children.utcTimings.filter(function(e){return"urn:mpeg:dash:utc:http-iso:2014"===e.schemeIdUri&&null!=e.value})).length?u[0].value:void 0;if(null!=o&&0<o.length)return{type:"needs-ressources",value:{ressources:[o],continue:function(e){if(1!==e.length)throw new Error("DASH parser: wrong number of loaded ressources.");return a=O(e[0].responseData),m.externalClockOffset=a,v(b,m,!0)}}}}}var u;var _=[];for(var s=0;s<g.periods.length;s++){var c=g.periods[s].attributes,l=c.xlinkHref,f=c.xlinkActuate;null!=l&&"onLoad"===f&&_.push({index:s,ressource:l})}if(0===_.length)return Ae(b,m,y);return{type:"needs-ressources",value:{ressources:_.map(function(e){var t=e.ressource;return t}),continue:function(e){if(e.length!==_.length)throw new Error("DASH parser: wrong number of loaded ressources.");for(var t=e.length-1;0<=t;t--){var n,r=_[t].index,i=e[t],a=i.responseData,o=i.receivedTime,u=i.sendingTime,s=i.url,c="<root>"+a+"</root>",l=(new DOMParser).parseFromString(c,"text/xml");if(null==l||0===l.children.length)throw new Error("DASH parser: Invalid external ressources");for(var f=l.children[0].children,d=[],p=0;p<f.length;p++)if(f[p].nodeType===Node.ELEMENT_NODE){var h=q(f[p]);y.set(h,{receivedTime:o,sendingTime:u,url:s}),d.push(h)}(n=g.periods).splice.apply(n,[r,1].concat(d))}return v(b,m)}}}}(X(e),t)}function Ae(e,t,n){var r,i,a,o,u,s,c=e.children,l=e.attributes,f="dynamic"===l.type,d=Object(D.a)(Object(D.b)(null==t.url?"":t.url),void 0!==c.baseURL?c.baseURL.value:""),p=(u=l,s=t.referenceDateTime,"dynamic"!==u.type?0:null==u.availabilityStartTime?null==s?0:s:u.availabilityStartTime),h=l.timeShiftBufferDepth,v=t.externalClockOffset,b=null!=(i=null===(r=c.baseURL)||void 0===r?void 0:r.attributes.availabilityTimeOffset)?i:0,m={aggressiveMode:t.aggressiveMode,availabilityStartTime:p,availabilityTimeOffset:b,baseURL:d,clockOffset:v,duration:l.duration,isDynamic:f,receivedTime:t.manifestReceivedTime,timeShiftBufferDepth:h,xlinkInfos:n},g=Ee(c.periods,m),y=l.duration,_={availabilityStartTime:p,baseURL:d,clockOffset:t.externalClockOffset,id:null!=l.id?l.id:"gen-dash-manifest-"+Te(),isLive:f,periods:g,suggestedPresentationDelay:l.suggestedPresentationDelay,transportType:"dash",uris:null==t.url?c.locations:[t.url].concat(c.locations)};null!=l.minimumUpdatePeriod&&0<l.minimumUpdatePeriod&&(_.lifetime=l.minimumUpdatePeriod),Object(A.a)(_);var O=x(_),E=O[0],w=O[1],j=performance.now();if(f)null!=E&&(_.minimumTime={isContinuous:null!=h,value:E,time:j}),null!=w&&(_.maximumTime={isContinuous:!0,value:w,time:j},null==E&&(_.minimumTime={isContinuous:!0,value:w,time:j}));else if(void 0!==E?_.minimumTime={isContinuous:!1,value:E,time:j}:void 0!==(null===(a=g[0])||void 0===a?void 0:a.start)&&(_.minimumTime={isContinuous:!1,value:g[0].start,time:j}),void 0!==w)_.maximumTime={isContinuous:!1,value:w,time:j};else if(void 0!==y)_.maximumTime={isContinuous:!1,value:y,time:j};else if(void 0!==g[g.length-1]){var T=g[g.length-1],S=null!=(o=T.end)?o:void 0!==T.duration?T.start+T.duration:void 0;void 0!==S&&(_.maximumTime={isContinuous:!1,value:S,time:j})}return{type:"done",value:_}}var xe=function(e,t){var n=e.documentElement;if(null==n||"MPD"!==n.nodeName)throw new Error("DASH Parser: document root should be MPD");return Se(n,t)};function ke(c){var a=c.aggressiveMode,o=c.referenceDateTime,l=null!=c.serverSyncInfos?c.serverSyncInfos.serverTimestamp-c.serverSyncInfos.clientTime:void 0;return function(e){var t=e.response,u=e.scheduleRequest,n=e.externalClockOffset,r=e.url,s=null==t.url?r:t.url,i="string"==typeof t.responseData?(new DOMParser).parseFromString(t.responseData,"text/xml"):t.responseData;return function i(e){if("done"===e.type){var t=new _.a(e.value,c);return Object(T.a)({manifest:t,url:s})}var n=e.value,r=n.ressources,a=n.continue;var o=r.map(function(t){return u(function(){return e=t,Object(d.a)({url:e,responseType:"text"}).pipe(Object(m.a)(function(e){return"data-loaded"===e.type}),Object(g.a)(function(e){return e.value}));var e})});return Object(v.a)(o).pipe(Object(y.a)(function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if("string"!=typeof r.responseData)throw new Error("External DASH resources should only be strings");t.push(b()(r,{responseData:r.responseData}))}return i(a(t))}))}(xe(i,{aggressiveMode:!0===a,url:s,referenceDateTime:o,externalClockOffset:null==l?n:l}))}}var Re=n(9),Ie=n(142),Me=n(84),Ne=n(23),Ce=n(45),De=n(72);function Pe(o,e){var t=e.segment;if(null==t.range)return Object(d.a)({url:o,responseType:"arraybuffer",sendProgressEvents:!0});if(null==t.indexRange)return Object(d.a)({url:o,headers:{Range:Object(Ce.a)(t.range)},responseType:"arraybuffer",sendProgressEvents:!0});if(t.range[1]+1===t.indexRange[0])return Object(d.a)({url:o,headers:{Range:Object(Ce.a)([t.range[0],t.indexRange[1]])},responseType:"arraybuffer",sendProgressEvents:!0});var n=Object(d.a)({url:o,headers:{Range:Object(Ce.a)(t.range)},responseType:"arraybuffer",sendProgressEvents:!1}),r=Object(d.a)({url:o,headers:{Range:Object(Ce.a)(t.indexRange)},responseType:"arraybuffer",sendProgressEvents:!1});return Object(v.a)([n,r]).pipe(Object(g.a)(function(e){var t=e[0],n=e[1],r=Object(S.i)(new Uint8Array(t.value.responseData),new Uint8Array(n.value.responseData)),i=Math.min(t.value.sendingTime,n.value.sendingTime),a=Math.max(t.value.receivedTime,n.value.receivedTime);return{type:"data-loaded",value:{url:o,responseData:r,size:t.value.size+n.value.size,duration:a-i,sendingTime:i,receivedTime:a}}}))}function Be(e){return"video/webm"===e.mimeType||"audio/webm"===e.mimeType}var Le=n(226),Ue=n(68);function Fe(e,t){var n=t.segment,r=null!=n.range?{Range:Object(Ce.a)(n.range)}:void 0;return Object(Me.a)({url:e,headers:r}).pipe(Object(Le.a)(function(e,t){if("data-complete"===t.type)return null!=e.partialChunk&&P.a.warn("DASH Pipelines: remaining chunk does not belong to any segment"),{event:t,completeChunks:[],partialChunk:null};var n=new Uint8Array(t.value.chunk),r=function(e){for(var t=0,n=[];t<e.length;){var r=e.subarray(t,1/0),i=Object(Ue.a)(r,1836019558);if(i<0)return[n,r];var a=t+i+Object(S.d)(e,i+t);if(a>e.length)return[n,r];var o=Object(Ue.a)(r,1835295092);if(o<0)return[n,r];var u=t+o+Object(S.d)(e,o+t);if(u>e.length)return[n,r];var s=Math.max(a,u),c=e.subarray(t,s);n.push(c),t=s}return[n,null]}(null!=e.partialChunk?Object(S.i)(e.partialChunk,n):n);return{event:t,completeChunks:r[0],partialChunk:r[1]}},{event:null,completeChunks:[],partialChunk:null}),Object(y.a)(function(e){for(var t=[],n=0;n<e.completeChunks.length;n++)t.push({type:"data-chunk",value:{responseData:e.completeChunks[n]}});var r=e.event;if(null!=r&&"data-chunk"===r.type){var i=r.value;t.push({type:"progress",value:{duration:i.duration,size:i.size,totalSize:i.totalSize}})}else if(null!=r&&"data-complete"===r.type){var a=r.value;t.push({type:"data-chunk-complete",value:{duration:a.duration,receivedTime:a.receivedTime,sendingTime:a.sendingTime,size:a.size,status:a.status,url:a.url}})}return T.a.apply(void 0,t)}))}function $e(e,t,n){if(t.segment.isInit)return Pe(e,t);var r=Be(t.representation);if(n&&!r){if(Object(Me.b)())return Fe(e,t);Object(Ne.a)("DASH: Your browser does not have the fetch API. You will have a higher chance of rebuffering when playing close to the live edge")}var i=t.segment;return Object(d.a)({url:e,responseType:"arraybuffer",sendProgressEvents:!0,headers:null!=i.range?{Range:Object(Ce.a)(i.range)}:void 0})}var ze=n(225),We=n(224),Ve=408125543,He=357149030,Ke=2807729,Ye=17545,Ge=475249515,qe=187,Xe=179,Qe=183,Ze=241;function Je(e,t,n,r){for(var i=r[0],a=r[1],o=i;o<a;){var u=rt(n,o);if(null==u)return null;var s=u.value,c=o+u.length,l=it(n,c);if(null==l)return null;var f=c+l.length,d=f+l.value;if(s===e)return[f,d];if(0<t.length)for(var p=0;p<t.length;p++){if(s===t[p])return Je(e,t.slice(p+1,t.length),n,[f,d])}o=d}return null}function et(e,t){var n=Je(Ke,[Ve,He],e,[t,e.length]);if(null==n)return null;var r=n[1]-n[0];return 1e9/at(e,n[0],r)}function tt(e,t){var n=Je(Ye,[Ve,He],e,[t,e.length]);if(null==n)return null;var r,i,a,o,u=n[1]-n[0];return 4==u?(a=e,o=n[0],new DataView(a.buffer).getFloat32(o)):8==u?(r=e,i=n[0],new DataView(r.buffer).getFloat64(i)):null}function nt(e,t){for(var n=1;n<=8;n++)if(e[t]>=Math.pow(2,8-n))return n}function rt(e,t){var n=nt(e,t);if(null==n)return P.a.warn("webm: unrepresentable length"),null;if(t+n>e.length)return P.a.warn("webm: impossible length"),null;for(var r=0,i=0;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return{length:n,value:r}}function it(e,t){var n=nt(e,t);if(null==n)return P.a.warn("webm: unrepresentable length"),null;if(t+n>e.length)return P.a.warn("webm: impossible length"),null;for(var r=(e[t]&(1<<8-n)-1)*Math.pow(2,8*(n-1)),i=1;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return{length:n,value:r}}function at(e,t,n){for(var r=0,i=0;i<n;i++)r=e[t+i]*Math.pow(2,8*(n-i-1))+r;return r}var ot=function(e,t,n,r){var i,a,o,u,s=Object(ze.a)(e),c=void 0!==r?r.timescale:n.timescale,l=Object(ze.d)(e);return t?null==r?null:l<0?null:{time:l,duration:0<=s?s:void 0,timescale:r.timescale}:(u=c===n.timescale?(o=Math.min(.9*c,null!=n.duration?n.duration/4:.25),n.duration):(o=Math.min(.9*c,null!=n.duration?n.duration/n.timescale*c/4:.25),null!=n.duration?n.duration/n.timescale*c:void 0),0<=l?(i=null!=n.timestampOffset?l+n.timestampOffset*c:l,0<=s&&(null==u||Math.abs(s-u)<=o)&&(a=s),{timescale:c,time:i,duration:a}):null)};function ut(e){var t=e.content,n=e.response,r=e.init,i=t.period,a=t.representation,o=t.segment,u=n.data,s=n.isChunked;if(null==u)return Object(T.a)({chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[i.start,i.end]});var c=u instanceof Uint8Array?u:new Uint8Array(u),l=o.indexRange,f=Be(a),d=f?function(e,t){var n=Je(Ve,[],e,[t,e.length]);if(null==n)return null;var r=n[0],i=n[1],a=et(e,r);if(null==a)return null;var o=tt(e,r);if(null==o)return null;var u=Je(Ge,[],e,[r,i]);if(null==u)return null;for(var s=[],c=u[0];c<u[1];){var l=Je(qe,[],e,[c,u[1]]);if(null==l)break;var f=Je(Xe,[],e,[l[0],l[1]]);if(null==f)return null;var d=at(e,f[0],f[1]-f[0]),p=Je(Ze,[Qe],e,[l[0],l[1]]);if(null==p)return null;var h=at(e,p[0],p[1]-p[0])+r;s.push({time:d,rangeStart:h}),c=l[1]}for(var v=[],b=0;b<s.length;b++){var m=s[b];b===s.length-1?v.push({time:m.time,count:0,timescale:a,duration:0===b?o:o-m.time,range:[m.rangeStart,1/0]}):v.push({time:m.time,count:0,timescale:a,duration:s[b+1].time-m.time,range:[m.rangeStart,s[b+1].rangeStart-1]})}return v}(c,0):Object(ze.c)(c,Array.isArray(l)?l[0]:0);if(o.isInit){null!==d&&0<d.length&&a.index._addSegments(d);var p=f?et(c,0):Object(ze.b)(c),h=null!=p&&0<p?{time:0,duration:0,timescale:p}:null;if(!f){var v=Object(We.a)(c);if(0<v.length)for(var b=0;b<v.length;b++){var m=v[b],g=m.systemID,y=m.data;a._addProtectionData("cenc",g,y)}}var _=a.getProtectionsInitializationData();return Object(T.a)({chunkData:c,chunkInfos:h,chunkOffset:Object(E.a)(o.timestampOffset,0),segmentProtections:_,appendWindow:[i.start,i.end]})}var O=f?null:ot(c,s,o,r);return Object(T.a)({chunkData:c,chunkInfos:O,chunkOffset:Object(E.a)(o.timestampOffset,0),segmentProtections:[],appendWindow:[i.start,i.end]})}function st(e){return"application/mp4"===e.mimeType}var ct=n(129),lt=n(109);function ft(e){var t=e.response,n=e.content,r=e.init,i=n.period,a=n.representation,o=n.segment.timestampOffset,u=void 0===o?0:o,s=t.data,c=t.isChunked;return null==s?Object(T.a)({chunkData:null,chunkInfos:null,chunkOffset:u,segmentProtections:[],appendWindow:[i.start,i.end]}):st(a)?function(e){var t,n=e.response,r=e.content,i=e.init,a=r.period,o=r.representation,u=r.segment,s=u.isInit,c=u.indexRange,l=u.timestampOffset,f=void 0===l?0:l,d=r.adaptation.language,p=n.data,h=n.isChunked;t="string"==typeof p?Object(S.r)(p):p instanceof Uint8Array?p:new Uint8Array(p);var v=Object(ze.c)(t,Array.isArray(c)?c[0]:0);if(s){var b=Object(ze.b)(t),m=0<b?{time:0,duration:0,timescale:b}:null;return Array.isArray(v)&&0<v.length&&o.index._addSegments(v),Object(T.a)({chunkData:null,chunkInfos:m,chunkOffset:f,segmentProtections:[],appendWindow:[a.start,a.end]})}var g,y,_=ot(t,h,u,i),O=1;null==_?h?P.a.warn("DASH: Unavailable time data for current text track."):(y=(g=u.time)+u.duration,O=u.timescale):(g=_.time,null!=_.duration?y=g+_.duration:h||(y=g+u.duration),O=_.timescale);var E,w=null==o.codec?"":o.codec;switch(w.toLowerCase()){case"stpp":case"stpp.ttml.im1t":E="ttml";break;case"wvtt":E="vtt"}if(void 0===E)throw new Error('The codec used for the subtitles "'+w+'" is not managed yet.');var j={data:Object(lt.a)(Object(ct.a)(t)),type:E,language:d,start:g,end:y,timescale:O};return Object(T.a)({chunkData:j,chunkInfos:_,chunkOffset:f,segmentProtections:[],appendWindow:[a.start,a.end]})}({response:{data:s,isChunked:c},content:n,init:r}):function(e){var t=e.response,n=e.content,r=n.adaptation,i=n.period,a=n.representation,o=n.segment,u=r.language,s=o.timestampOffset,c=void 0===s?0:s;if(o.isInit)return Object(T.a)({chunkData:null,chunkInfos:null,chunkOffset:c,segmentProtections:[],appendWindow:[i.start,i.end]});var l,f,d,p=t.data,h=t.isChunked;if("string"!=typeof p){var v=p instanceof Uint8Array?p:new Uint8Array(p);l=Object(S.g)(v)}else l=p;var b,m=1;h?P.a.warn("DASH: Unavailable time data for current text track."):(d=(f=o.time)+o.duration,m=o.timescale);var g=a.mimeType,y=void 0===g?"":g;switch(a.mimeType){case"application/ttml+xml":b="ttml";break;case"application/x-sami":case"application/smil":b="sami";break;case"text/vtt":b="vtt"}if(void 0===b){var _=a.codec;if("srt"!==(void 0===_?"":_).toLowerCase())throw new Error("could not find a text-track parser for the type "+y);b="srt"}var O={data:l,type:b,language:u,start:f,end:d,timescale:m};return Object(T.a)({chunkData:O,chunkInfos:null,chunkOffset:c,segmentProtections:[],appendWindow:[i.start,i.end]})}({response:{data:s,isChunked:c},content:n})}t.default=function(e){var t,u,s,n,o,r=Object(f.a)({customManifestLoader:e.manifestLoader}),i=ke(e),a=(u=(t=e).lowLatencyMode,s=t.segmentLoader,!0!==t.checkMediaSegmentIntegrity?c:function(t){return c(t).pipe(Object(Ie.a)(function(e){"data-loaded"!==e.type&&"data-chunk"!==e.type||null===e.value.responseData||Object(De.a)(new Uint8Array(e.value.responseData),t.segment.isInit)}))});function c(i){var a=i.segment.mediaURL;if(null==a)return Object(T.a)({type:"data-created",value:{responseData:null}});if(u||null==s)return $e(a,i,u);var o={adaptation:i.adaptation,manifest:i.manifest,period:i.period,representation:i.representation,segment:i.segment,transport:"dash",url:a};return new Re.a(function(t){var n=!1,r=!1,e=s(o,{reject:function(e){void 0===e&&(e={}),r||(n=!0,t.error(e))},resolve:function(e){r||(n=!0,t.next({type:"data-loaded",value:{responseData:e.data,size:e.size,duration:e.duration}}),t.complete())},progress:function(e){r||t.next({type:"progress",value:{duration:e.duration,size:e.size,totalSize:e.totalSize}})},fallback:function(){r=!0,$e(a,i,u).subscribe(t)}});return function(){n||r||"function"!=typeof e||e()}})}function l(e){var t=e.segment,n=t.mediaURL,r=t.range;if(null==n)return Object(T.a)({type:"data-created",value:{responseData:null}});if(e.segment.isInit)return Pe(n,e);var i=st(e.representation);if(o&&i){if(Object(Me.b)())return Fe(n,e);Object(Ne.a)("DASH: Your browser does not have the fetch API. You will have a higher chance of rebuffering when playing close to the live edge")}var a=i?"arraybuffer":"text";return Object(d.a)({url:n,responseType:a,headers:Array.isArray(r)?{Range:Object(Ce.a)(r)}:null,sendProgressEvents:!0})}return{manifest:{loader:r,parser:i},audio:{loader:a,parser:ut},video:{loader:a,parser:ut},text:{loader:(o=(n=e).lowLatencyMode,!0!==n.checkMediaSegmentIntegrity?l:function(t){return l(t).pipe(Object(Ie.a)(function(e){"data-loaded"!==e.type&&"data-chunk"!==e.type||null===e.value.responseData||"string"==typeof e.value.responseData||Object(De.a)(new Uint8Array(e.value.responseData),t.segment.isInit)}))}),parser:ft},image:{loader:p,parser:h}}}},function(e,t,n){"use strict";n.r(t);var x=n(26),i=n(31),a=n(142),o=n(10),k=n(0),l=n(86),O=n(224),R=n(129),r=n(12),T=n.n(r),S=n(35),u=n(53),V=n(2),H=n(41),w=n(15),K=n(108);var Y=n(1),G=n(184);function q(e){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:Object(Y.i)([8,1,18,16],e)}]}var s=n(166),c=n(107),v=n(17),f=n(106);function M(e,t){var n=e.repeatCount;if(null!=e.duration&&n<0){var r=void 0!==t?t.start:1/0;n=Math.ceil((r-e.start)/e.duration)-1}return n}var A=function(){function e(e,t){var n=t.aggressiveMode,r=t.isLive,i=t.segmentPrivateInfos,a=null==e.manifestReceivedTime?performance.now():e.manifestReceivedTime;if(this._index=e,this._indexValidityTime=a,this._initSegmentInfos={bitsPerSample:i.bitsPerSample,channels:i.channels,codecPrivateData:i.codecPrivateData,packetSize:i.packetSize,samplingRate:i.samplingRate,protection:i.protection},this._isAggressiveMode=n,this._isLive=r,0!==e.timeline.length){var o=e.timeline[e.timeline.length-1],u=Object(v.c)(o,null);if(this._initialScaledLastPosition=u,e.isLive){var s=a/1e3*e.timescale;this._scaledLiveGap=s-u}}}var t=e.prototype;return t.getInitSegment=function(){return{id:"init",isInit:!0,time:0,duration:0,timescale:this._index.timescale,privateInfos:{smoothInit:this._initSegmentInfos},mediaURL:null}},t.getSegments=function(e,t){this._refreshTimeline();for(var n,r,i,a,o,u,s,c,l=(n=this._index,r=e,i=t,a=void 0===n.timescale||0===n.timescale?1:n.timescale,{up:r*a,to:(r+i)*a}),f=l.up,d=l.to,p=this._index,h=p.timeline,v=p.timescale,b=p.media,m=this._isAggressiveMode,g=[],y=h.length,_=null==this._scaledLiveGap?void 0:performance.now()/1e3*v-this._scaledLiveGap,O=0;O<y;O++){for(var E=h[O],w=E.duration,j=E.start,T=M(E,h[O+1]),S=(s=w,0<(c=f-j)?Math.floor(c/s):0),A=j+S*w,x=m?0:w;A<d&&S<=T&&(null==_||A+x<=_);){var k=A,R=null!=o?o+S:void 0,I={id:String(A),time:k,isInit:!1,duration:w,timescale:v,number:R,mediaURL:(u=k,b.replace(/\{start time\}/g,String(u)))};g.push(I),A=j+ ++S*w}if(d<=A)return g;null!=o&&(o+=T+1)}return g},t.shouldRefresh=function(e,t){if(this._refreshTimeline(),!this._index.isLive)return!1;var n=this._index,r=n.timeline,i=n.timescale,a=r[r.length-1];if(void 0===a)return!1;var o=a.repeatCount,u=a.start+(o+1)*a.duration;return!(t*i<u)&&(u<=e*i||a.start+o*a.duration<e*i)},t.getFirstPosition=function(){this._refreshTimeline();var e=this._index;return 0===e.timeline.length?null:e.timeline[0].start/e.timescale},t.getLastPosition=function(){this._refreshTimeline();var e=this._index;if(null==this._scaledLiveGap){var t=e.timeline[e.timeline.length-1];return Object(v.c)(t,null)/e.timescale}for(var n=e.timeline.length-1;0<=n;n--)for(var r=e.timeline[n],i=performance.now()/1e3*e.timescale,a=r.start,o=r.duration,u=r.repeatCount;0<=u;u--){var s=a+o*(u+1);if((this._isAggressiveMode?s-o:s)<=i-this._scaledLiveGap)return s/e.timescale}},t.checkDiscontinuity=function(e){this._refreshTimeline();var t=this._index,n=t.timeline,r=t.timescale,i=void 0===r?1:r,a=e*i;if(a<=0)return-1;var o=function(e,t){for(var n=e.timeline,r=0,i=n.length;r<i;){var a=r+i>>>1;n[a].start<t?r=1+a:i=a}return 0<r?r-1:r}(t,a);if(o<0||o>=n.length-1)return-1;var u=n[o];if(-1===u.duration)return-1;var s=u.start,c=Object(v.c)(u,null),l=n[o+1];return c!==l.start&&s<=a&&a<=c&&c-a<i?l.start/i:-1},t.isSegmentStillAvailable=function(e){if(e.isInit)return!0;this._refreshTimeline();var t=this._index,n=t.timeline,r=t.timescale;return Object(f.a)(e,n,r,0)},t.canBeOutOfSyncError=function(e){return!!this._isLive&&(e instanceof s.a&&(e.isHttpError(404)||e.isHttpError(412)))},t._update=function(e){var t=this._index.timeline,n=e._index.timeline,r=this._index.timescale,i=e._index.timescale;if(this._index=e._index,this._initialScaledLastPosition=e._initialScaledLastPosition,this._indexValidityTime=e._indexValidityTime,this._scaledLiveGap=e._scaledLiveGap,0!==t.length&&0!==n.length&&r===i){var a=t[t.length-1],o=n[n.length-1],u=Object(v.c)(o,null);if(!(Object(v.c)(a,null)<=u))for(var s=0;s<t.length;s++){var c=t[s],l=Object(v.c)(c,null);if(l===u)return void(this._index.timeline=this._index.timeline.concat(t.slice(s+1)));if(u<l){if(c.duration!==o.duration)return;var f=u-c.start;if(0==f)return k.a.warn("Smooth Parser: a discontinuity detected in the previous manifest has been resolved."),void(this._index.timeline=this._index.timeline.concat(t.slice(s)));if(f<0||f%c.duration!=0)return;var d=f/c.duration-1,p=c.repeatCount-d;if(p<0)return;o.repeatCount+=p;var h=t.slice(s+1);return void(this._index.timeline=this._index.timeline.concat(h))}}}},t.isFinished=function(){return!this._isLive},t._addSegments=function(e,t){this._refreshTimeline();for(var n=0;n<e.length;n++)r=this._index,i=e[n],a=t,c=o=void 0,u=r.timeline,s=r.timescale,c=u[u.length-1],l=i.timescale===s?{time:i.time,duration:i.duration}:{time:i.time/i.timescale*s,duration:i.duration/i.timescale*s},0!==a.timescale&&(o=a.timescale===s?a.time:a.time/a.timescale*s),(null==o||l.time!==o)&&l.time>=Object(v.c)(c,null)&&(c.duration===l.duration?c.repeatCount++:r.timeline.push({duration:l.duration,start:l.time,repeatCount:0}));var r,i,a,o,u,s,c,l},t._refreshTimeline=function(){if(null!=this._initialScaledLastPosition){var e=this._index,t=e.timeShiftBufferDepth,n=(performance.now()-this._indexValidityTime)/1e3+this._initialScaledLastPosition/e.timescale;if(null!=t){var r=(n-t)*e.timescale;Object(c.a)(e.timeline,r)}}},e}();function X(e,t,n){for(var r=e.firstElementChild,i=n;null!==r;)i=t(i,r.nodeName,r),r=r.nextElementSibling;return i}var Q=Object(u.a)(),I={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},N={audio:"mp4a.40.2",video:"avc1.4D401E"},C={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};var d=function(F){void 0===F&&(F={});var $=void 0===F.referenceDateTime?Date.UTC(1970,0,1,0,0,0,0)/1e3:F.referenceDateTime,h=void 0===F.minRepresentationBitrate?0:F.minRepresentationBitrate,e=F.serverSyncInfos,z=void 0!==e?e.serverTimestamp-e.clientTime:void 0;function j(n,e){var t,r,i=X(n,function(e,t,n){return"CustomAttributes"===t&&e.push.apply(e,X(n,function(e,t,n){if("Attribute"===t){var r=n.getAttribute("Name"),i=n.getAttribute("Value");null!==r&&null!==i&&e.push(r+"="+i)}return e},[])),e},[]);function a(e){var t=n.getAttribute(e);return null==t?void 0:t}switch(e){case"audio":var o=a("AudioTag"),u=a("BitsPerSample"),s=a("Channels"),c=a("CodecPrivateData"),l=a("FourCC"),f=a("PacketSize"),d=a("SamplingRate"),p=a("Bitrate"),h=void 0===p?0:isNaN(parseInt(p,10))?0:parseInt(p,10);return{audiotag:void 0!==o?parseInt(o,10):o,bitrate:h,bitsPerSample:void 0!==u?parseInt(u,10):u,channels:void 0!==s?parseInt(s,10):s,codecPrivateData:Object(w.a)(c,""),customAttributes:i,mimeType:void 0!==l?C[l]:l,packetSize:void 0!==f?parseInt(f,10):f,samplingRate:void 0!==d?parseInt(d,10):d};case"video":var v=a("CodecPrivateData"),b=a("FourCC"),m=a("MaxWidth"),g=a("MaxHeight"),y=a("Bitrate");return{bitrate:void 0===y?0:isNaN(parseInt(y,10))?0:parseInt(y,10),customAttributes:i,mimeType:void 0!==b?C[b]:b,codecPrivateData:Object(w.a)(v,""),codecs:(t=Object(w.a)(v,""),null!==(r=/00000001\d7([0-9a-fA-F]{6})/.exec(t))&&Object(V.a)(r[1])?"avc1."+r[1]:""),width:void 0!==m?parseInt(m,10):void 0,height:void 0!==g?parseInt(g,10):void 0};case"text":var _=a("CodecPrivateData"),O=a("FourCC"),E=a("Bitrate");return{bitrate:void 0===E?0:isNaN(parseInt(E,10))?0:parseInt(E,10),customAttributes:i,mimeType:void 0!==O?C[O]:O,codecPrivateData:Object(w.a)(_,"")};default:return k.a.error("Smooth Parser: Unrecognized StreamIndex type: "+e),null}}function W(e){var t=e.root,n=e.timescale,v=e.rootURL,b=e.protections,m=e.timeShiftBufferDepth,g=e.manifestReceivedTime,y=e.isLive,r=t.getAttribute("Timescale"),i=null===r?n:isNaN(+r)?n:+r,_=t.getAttribute("Type");if(null==_)throw new Error("StreamIndex without type.");var a=t.getAttribute("Subtype"),o=t.getAttribute("Language"),u=t.getAttribute("Url"),O=null===u?"":u;var p,s=X(t,function(e,t,n){switch(t){case"QualityLevel":var r=j(n,_);if(null===r)return e;if("audio"===_){var i=n.getAttribute("FourCC"),a=null===i?"":i;r.codecs=(o=a,u=r.codecPrivateData,0!=(s="AACH"===o?5:Object(V.a)(u)?(248&parseInt(u.substring(0,2),16))>>3:2)?"mp4a.40."+s:"")}("video"!==_||r.bitrate>h)&&e.qualityLevels.push(r);break;case"c":e.cNodes.push(n)}var o,u,s;return e},{qualityLevels:[],cNodes:[]}),c=s.qualityLevels,l=s.cNodes,E={timeline:(p=l).reduce(function(e,t,n){var r=t.getAttribute("d"),i=t.getAttribute("t"),a=t.getAttribute("r"),o=null!==a?a-1:0,u=null!==i?+i:void 0,s=null!==r?+r:void 0;if(0===n)u=void 0===u||isNaN(u)?0:u;else{var c=e[n-1];if(null==u||isNaN(u)){if(null==c.duration||isNaN(c.duration))throw new Error("Smooth: Invalid CNodes. Missing timestamp.");u=c.start+c.duration*(c.repeatCount+1)}}if(null==s||isNaN(s)){var l=p[n+1];if(void 0===l)return e;var f=l.getAttribute("t"),d=Object(V.a)(f)?+f:null;if(null===d)throw new Error("Can't build index timeline from Smooth Manifest.");s=d-u}return e.push({duration:s,start:u,repeatCount:o}),e},[]),timescale:i};Object(S.b)(0!==c.length,"adaptation should have at least one representation");var w=_+(Object(V.a)(o)?"_"+o:""),f=c.map(function(e){var t,n,r,i,a=Object(H.a)(v,O),o={timeline:E.timeline,timescale:E.timescale,media:(t=a,n=e.bitrate,r=e.customAttributes,t.replace(/\{bitrate\}/g,String(n)).replace(/{CustomAttributes}/g,0<r.length?r[0]:"")),isLive:y,timeShiftBufferDepth:m,manifestReceivedTime:g},u=Object(V.a)(e.mimeType)?e.mimeType:I[_],s=Object(V.a)(e.codecs)?e.codecs:N[_],c=w+"_"+(null!=_?_+"-":"")+(null!=u?u+"-":"")+(null!=s?s+"-":"")+String(e.bitrate),l=[];0<b.length&&(i=b[0],b.forEach(function(e){var t=e.keyId;e.keySystems.forEach(function(e){l.push({keyId:t,systemId:e.systemId})})}));var f={bitsPerSample:e.bitsPerSample,channels:e.channels,codecPrivateData:e.codecPrivateData,packetSize:e.packetSize,samplingRate:e.samplingRate,protection:null!=i?{keyId:i.keyId,keySystems:i.keySystems}:void 0},d=null!=F.aggressiveMode&&F.aggressiveMode,p=new A(o,{aggressiveMode:d,isLive:y,segmentPrivateInfos:f}),h=T()({},e,{index:p,mimeType:u,codecs:s,id:c});return 0<l.length&&(h.contentProtections={keyIds:l,initData:{}}),h});if("ADVT"===a)return null;var d={id:w,type:_,representations:f,language:null==o?void 0:o};return"text"===_&&"DESC"===a&&(d.closedCaption=!0),d}return function(e,t,n){var r,i=Object(H.b)(null==t?"":t),a=e.documentElement;if(null==a||"SmoothStreamingMedia"!==a.nodeName)throw new Error("document root should be SmoothStreamingMedia");var o=a.getAttribute("MajorVersion"),u=a.getAttribute("MinorVersion");if(null===o||null===u||!/^[2]-[0-2]$/.test(o+"-"+u))throw new Error("Version should be 2.0, 2.1 or 2.2");var s,c,l=a.getAttribute("Timescale"),f=Object(V.a)(l)?isNaN(+l)?1e7:+l:1e7,d=X(a,function(e,t,n){switch(t){case"Protection":e.protections.push(function(e,t){if(void 0===t&&(t=q),null===e.firstElementChild||"ProtectionHeader"!==e.firstElementChild.nodeName)throw new Error("Protection should have ProtectionHeader child");var n=e.firstElementChild,r=Object(Y.r)(atob(null===n.textContent?"":n.textContent)),i=Object(G.a)(r),a=Object(Y.k)(i),o=n.getAttribute("SystemID");return{keyId:a,keySystems:[{systemId:(null!==o?o:"").toLowerCase().replace(/\{|\}/g,""),privateData:r}].concat(t(a))}}(n,F.keySystems));break;case"StreamIndex":e.adaptationNodes.push(n)}return e},{adaptationNodes:[],protections:[]}),p=d.protections,h=d.adaptationNodes,v="boolean"==typeof(s=a.getAttribute("IsLive"))?s:"string"==typeof s&&"TRUE"===s.toUpperCase();if(v){var b=a.getAttribute("DVRWindowLength");null==b||isNaN(+b)||0==+b||(c=b/f)}var m,g,y,_,O,E,w=h.map(function(e){return W({root:e,rootURL:i,timescale:f,protections:p,isLive:v,timeShiftBufferDepth:c,manifestReceivedTime:n})}).filter(function(e){return null!=e}).reduce(function(e,t){var n=t.type,r=e[n];return void 0===r?e[n]=[t]:r.push(t),e},{}),j=void 0!==w.video?w.video[0]:void 0,T=void 0!==w.audio?w.audio[0]:void 0;if(void 0!==j||void 0!==T){var S=[],A=[];if(void 0!==j){var x=j.representations[0];if(void 0!==x){var k=x.index.getFirstPosition(),R=x.index.getLastPosition();null!=k&&S.push(k),null!=R&&A.push(R)}}if(void 0!==T){var I=T.representations[0];if(void 0!==I){var M=I.index.getFirstPosition(),N=I.index.getLastPosition();null!=M&&S.push(M),null!=N&&A.push(N)}}0<S.length&&(O=Math.max.apply(Math,S)),0<A.length&&(E=Math.min.apply(Math,A))}var C=a.getAttribute("Duration"),D=null!=C&&0!=+C?C/f:void 0;if(v){m=F.suggestedPresentationDelay,g=$;var P=performance.now();_={isContinuous:!0,value:null!=E?E:Date.now()/1e3-g,time:P},y=null==c?{isContinuous:!1,value:null!=O?O:g,time:P}:{isContinuous:!0,value:Math.min(_.value-c+5,_.value),time:P}}else y={isContinuous:!1,value:null!=O?O:0,time:performance.now()},void 0!==E?_={isContinuous:!1,value:E,time:performance.now()}:void 0!==D&&(_={isContinuous:!1,value:y.value+D,time:performance.now()});var B=v?0:y.value,L=v?void 0:null===(r=_)||void 0===r?void 0:r.value,U={availabilityStartTime:void 0===g?0:g,clockOffset:z,id:"gen-smooth-manifest-"+Q(),isLive:v,maximumTime:_,minimumTime:y,periods:[{adaptations:w,duration:void 0!==L?L-B:D,end:L,id:"gen-smooth-period-0",start:B}],suggestedPresentationDelay:m,transportType:"smooth",uris:null==t?[]:[t]};return Object(K.a)(U),U}},p=n(22),D=n(109),h=n(23),b=n(72),m=n(124),g=n(225),y=n(56);function P(e,t,n,r){var i,a,o=[];if(r){var u=Object(R.c)(e);null!==u?(a=function(e){var t=Object(y.d)(e,3565190898,3392751253,2387879627,2655430559);if(void 0===t)return[];for(var n=[],r=t[0],i=t[4],a=0;a<i;a++){var o=void 0,u=void 0;o=1===r?(u=Object(Y.e)(t,16*a+5),Object(Y.e)(t,16*a+5+8)):(u=Object(Y.d)(t,8*a+5),Object(Y.d)(t,8*a+5+4)),n.push({time:u,duration:o})}return n}(u),i=function(e){var t=Object(y.d)(e,1830656773,1121273062,2162299933,2952222642);if(null!=t)return{duration:Object(Y.e)(t,12),time:Object(Y.e)(t,4)}}(u)):k.a.warn("smooth: could not find traf atom")}if(void 0!==a)for(var s=0;s<a.length;s++)o.push({time:a[s].time,duration:a[s].duration,timescale:n.timescale});if(void 0!==i)return{nextSegments:o,chunkInfos:{time:i.time,duration:i.duration,timescale:n.timescale}};if(t)return{nextSegments:o,chunkInfos:null};var c=Math.min(.9*n.timescale,n.duration/4),l=Object(g.a)(e);return{nextSegments:o,chunkInfos:0<=l&&(null==n.duration||Math.abs(l-n.duration)<=c)?{time:n.time,duration:l,timescale:n.timescale}:{time:n.time,duration:n.duration,timescale:n.timescale}}}var Z=n(167);function J(e,t){return Object(Z.a)("schm",Object(Y.i)(4,Object(Y.r)(e),Object(Y.n)(t)))}function ee(e){return Object(Z.a)("frma",Object(Y.r)(e))}function te(e){var t=[7,[e.length]];return Object(Z.a)("stsd",Y.i.apply(void 0,t.concat(e)))}function ne(e,t,n){return Object(Z.a)("tenc",Object(Y.i)(6,[e,t],n))}function _(e,t,n,r,i){var a,o,u,s,c=[e,t,n];return void 0!==i&&c.push(Object(Z.a)("senc",i),function(e){if(0===e.length)return Object(Z.a)("saiz",new Uint8Array(0));var t=Object(Y.d)(e,0),n=Object(Y.d)(e,4),r=new Uint8Array(n+9);r.set(Object(Y.n)(n),5);for(var i,a,o=9,u=8;u<e.length;)u+=8,2==(2&t)?(a=2,u+=6*(i=Object(Y.b)(e,u))+2):a=i=0,r[o]=6*i+8+a,o++;return Object(Z.a)("saiz",r)}(i),(a=r,o=e,u=t,s=n,Object(Z.a)("saio",Object(Y.i)(4,[0,0,0,1],Object(Y.n)(a.length+o.length+u.length+s.length+8+8+8+8))))),Object(Z.b)("traf",c)}var E=n(149);function j(e,t,n,r){var i,a=n[1]-n[0],o=t.length-a,u=Object(y.c)(e,1835295092);if(null==u)throw new Error("Smooth: Invalid ISOBMFF given");if(Object(E.a)()&&(0==o||o<=-8))return t.set(Object(Y.n)(u[0]+8),r+16),e.set(t,n[0]),o<=-8&&e.set((i=-o,Object(Z.a)("free",new Uint8Array(i-8))),t.length),e;t.set(Object(Y.n)(u[0]+o+8),r+16);var s=new Uint8Array(e.length+o),c=e.subarray(0,n[0]),l=e.subarray(n[1],e.length);return s.set(c,0),s.set(t,c.length),s.set(l,c.length+t.length),s}function B(e,t){var n=Object(y.c)(e,1836019558);if(null==n)throw new Error("Smooth: Invalid ISOBMFF given");var r=e.subarray(n[0]+8,n[1]),i=Object(y.a)(r,1835427940),a=Object(y.b)(r,1953653094);if(null==a||null==i)throw new Error("Smooth: Invalid ISOBMFF given");var o=Object(y.a)(a,1952868452),u=Object(y.a)(a,1953658222);if(null==o||null==u)throw new Error("Smooth: Invalid ISOBMFF given");o.set([0,0,0,1],12);var s,c=(s=t,Object(Z.a)("tfdt",Object(Y.i)([1,0,0,0],Object(Y.o)(s)))),l=_(o,c,function(e){if(0!=(1&e[11]))return e;var t=new Uint8Array(e.length+4);return t.set(Object(Y.n)(e.length+4),0),t.set(e.subarray(4,16),4),t[11]=1|t[11],t.set([0,0,0,0],16),t.set(e.subarray(16,e.length),20),t}(u),i,Object(y.d)(a,2721664850,1520127764,2722393154,2086964724));return j(e,Object(Z.b)("moof",[i,l]),n,i.length+o.length+c.length+8+8)}var L=n(9),U=n(45);function F(e,t,n,r){var i=[e,t,n];return r.forEach(function(e){var t=function(e,t,n){void 0===t&&(t=new Uint8Array(0)),void 0===n&&(n=new Uint8Array(0));var r,i,a=e.replace(/-/g,"");if(32!==a.length)throw new Error("HSS: wrong system id length");var o=n.length;return i=0<o?(r=1,Y.i.apply(void 0,[Object(Y.n)(o)].concat(n))):(r=0,[]),Object(Z.a)("pssh",Object(Y.i)([r,0,0,0],Object(Y.k)(a),i,Object(Y.n)(t.length),t))}(e.systemId,e.privateData,e.keyIds);i.push(t)}),Object(Z.b)("moov",i)}function re(e,t,n,r,i,a,o){var u,s,c,l,f,d,p,h,v,b,m=Object(Z.b)("stbl",[n,Object(Z.a)("stts",new Uint8Array(8)),Object(Z.a)("stsc",new Uint8Array(8)),Object(Z.a)("stsz",new Uint8Array(12)),Object(Z.a)("stco",new Uint8Array(8))]),g=Object(Z.a)("url ",new Uint8Array([0,0,0,1])),y=(u=g,Object(Z.a)("dref",Object(Y.i)(7,[1],u))),_=Object(Z.b)("dinf",[y]),O=Object(Z.b)("minf",[r,_,m]),E=function(e){var t,n;switch(e){case"video":t="vide",n="VideoHandler";break;case"audio":t="soun",n="SoundHandler";break;default:t="hint",n=""}return Object(Z.a)("hdlr",Object(Y.i)(8,Object(Y.r)(t),12,Object(Y.r)(n),1))}(t),w=(s=e,Object(Z.a)("mdhd",Object(Y.i)(12,Object(Y.n)(s),8))),j=Object(Z.b)("mdia",[w,E,O]),T=(c=i,l=a,f=1,Object(Z.a)("tkhd",Object(Y.i)(Object(Y.n)(7),8,Object(Y.n)(f),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],Object(Y.m)(c),2,Object(Y.m)(l),2))),S=Object(Z.b)("trak",[T,j]),A=(d=1,Object(Z.a)("trex",Object(Y.i)(4,Object(Y.n)(d),[0,0,0,1],12))),x=Object(Z.b)("mvex",[A]),k=F((p=e,h=1,Object(Z.a)("mvhd",Object(Y.i)(12,Object(Y.n)(p),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,Object(Y.m)(h+1)))),x,S,o),R=(b=[v="isom","iso2","iso6","avc1","dash"],Object(Z.a)("ftyp",Y.i.apply(null,[Object(Y.r)(v),[0,0,0,1]].concat(b.map(Y.r)))));return Object(Y.i)(R,k)}function $(e,t,n,r,i,a,o,u,s){var c,l,f,d,p,h,v,b,m,g,y,_,O,E,w,j,T,S,A,x,k,R,I,M,N=void 0===s?[]:s,C=o.split("00000001"),D=C[1],P=C[2],B=Object(Y.k)(D),L=Object(Y.k)(P),U=(l=L,d=2===(f=a)?1:4===f?3:0,p=(c=B)[1],h=c[2],v=c[3],Object(Z.a)("avcC",Object(Y.i)([1,p,h,v,252|d,225],Object(Y.m)(c.length),c,[1],Object(Y.m)(l.length),l)));if(0===N.length||null==u){b=te([(T=t,S=n,A=r,x=i,k="AVC Coding",R=24,I=U,Object(Z.a)("avc1",Object(Y.i)(6,Object(Y.m)(1),16,Object(Y.m)(T),Object(Y.m)(S),Object(Y.m)(A),2,Object(Y.m)(x),6,[0,1,k.length],Object(Y.r)(k),31-k.length,Object(Y.m)(R),[255,255],I)))])}else{var F=ne(1,8,u),$=Object(Z.b)("schi",[F]),z=J("cenc",65536),W=ee("avc1"),V=Object(Z.b)("sinf",[W,z,$]);b=te([(m=t,g=n,y=r,_=i,O="AVC Coding",E=24,w=U,j=V,Object(Z.a)("encv",Object(Y.i)(6,Object(Y.m)(1),16,Object(Y.m)(m),Object(Y.m)(g),Object(Y.m)(y),2,Object(Y.m)(_),6,[0,1,O.length],Object(Y.r)(O),31-O.length,Object(Y.m)(E),[255,255],w,j)))])}return re(e,"video",b,((M=new Uint8Array(12))[3]=1,Object(Z.a)("vmhd",M)),t,n,N)}var z=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];function W(e,g,y,_,O,t,E,w){void 0===w&&(w=[]);var n,r,i,a,o,u=0===t.length?(n=O,r=g,i=((i=((i=(63&2)<<4)|31&z.indexOf(n))<<4)|31&r)<<3,Object(Y.f)(Object(Y.m)(i))):t,j=(a=1,o=u,Object(Z.a)("esds",Object(Y.i)(4,[3,25],Object(Y.m)(a),[0,4,17,64,21],11,[5,2],Object(Y.k)(o),[6,1,2])));return re(e,"audio",function(){var e,t,n,r,i,a;if(0===w.length||null==E)return te([(e=1,t=g,n=y,r=_,i=O,a=j,Object(Z.a)("mp4a",Object(Y.i)(6,Object(Y.m)(e),8,Object(Y.m)(t),Object(Y.m)(n),2,Object(Y.m)(r),Object(Y.m)(i),2,a)))]);var o,u,s,c,l,f,d,p=ne(1,8,E),h=Object(Z.b)("schi",[p]),v=J("cenc",65536),b=ee("mp4a"),m=Object(Z.b)("sinf",[b,v,h]);return te([(o=1,u=g,s=y,c=_,l=O,f=j,d=m,Object(Z.a)("enca",Object(Y.i)(6,Object(Y.m)(o),8,Object(Y.m)(u),Object(Y.m)(s),2,Object(Y.m)(c),Object(Y.m)(l),2,f,d)))])}(),Object(Z.a)("smhd",new Uint8Array(8)),0,0,w)}function ie(e){var t,n=e.url,r=e.segment.range;return Array.isArray(r)&&(t={Range:Object(U.a)(r)}),Object(p.a)({url:n,responseType:"arraybuffer",headers:t,sendProgressEvents:!0})}var ae=function(T){return function(e){var t=e.segment,n=e.representation,r=e.adaptation,i=e.period,a=e.manifest;if(t.isInit){if(void 0===t.privateInfos||null==t.privateInfos.smoothInit)throw new Error("Smooth: Invalid segment format");var o,u=t.privateInfos.smoothInit,s=u.codecPrivateData,c=void 0===s?"":s,l=u.protection,f=void 0===l?{keyId:void 0,keySystems:void 0}:l;switch(r.type){case"video":var d=n.width,p=void 0===d?0:d,h=n.height,v=void 0===h?0:h;o=$(t.timescale,p,v,72,72,4,c,f.keyId,f.keySystems);break;case"audio":var b=u.channels,m=void 0===b?0:b,g=u.bitsPerSample,y=void 0===g?0:g,_=u.packetSize,O=void 0===_?0:_,E=u.samplingRate,w=void 0===E?0:E;o=W(t.timescale,m,y,O,w,c,f.keyId,f.keySystems);break;default:0,o=new Uint8Array(0)}return Object(x.a)({type:"data-created",value:{responseData:o}})}if(null==t.mediaURL)return Object(x.a)({type:"data-created",value:{responseData:null}});var j={adaptation:r,manifest:a,period:i,representation:n,segment:t,transport:"smooth",url:t.mediaURL};return"function"!=typeof T?ie(j):new L.a(function(t){var n=!1,r=!1,e=T(j,{reject:function(e){void 0===e&&(e={}),r||(n=!0,t.error(e))},resolve:function(e){r||(n=!0,t.next({type:"data-loaded",value:{responseData:e.data,size:e.size,duration:e.duration}}),t.complete())},fallback:function(){r=!0,ie(j).subscribe(t)},progress:function(e){r||t.next({type:"progress",value:{duration:e.duration,size:e.size,totalSize:e.totalSize}})}});return function(){n||r||"function"!=typeof e||e()}})}},oe=/(\.isml?)(\?token=\S+)?$/,ue=/\?token=(\S+)/;function se(e,t){return Object(V.a)(t)?e.replace(ue,"?token="+t):e.replace(ue,"")}var ce=/\.wsx?(\?token=\S+)?/;function le(e,t,n){k.a.debug("Smooth Parser: update segments information.");for(var r=e.representations,i=0;i<r.length;i++){r[i].index._addSegments(t,n)}}t.default=function(s){var c=d(s),e=ae(s.segmentLoader),t={customManifestLoader:s.manifestLoader},n={loader:function(t){return t.segment.isInit||!0!==s.checkMediaSegmentIntegrity?e(t):e(t).pipe(Object(a.a)(function(e){"data-loaded"!==e.type&&"data-chunk"!==e.type||null===e.value.responseData||Object(b.a)(new Uint8Array(e.value.responseData),t.segment.isInit)}))},parser:function(e){var t=e.content,n=e.response,r=t.segment,i=t.representation,a=t.adaptation,o=t.manifest,u=n.data,s=n.isChunked;if(null==u)return Object(x.a)({chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]});var c=u instanceof Uint8Array?u:new Uint8Array(u);if(r.isInit){var l={timescale:r.timescale,time:0,duration:0},f=Object(O.a)(c);if(0<f.length)for(var d=0;d<f.length;d++){var p=f[d],h=p.systemID,v=p.data;i._addProtectionData("cenc",h,v)}var b=i.getProtectionsInitializationData();return Object(x.a)({chunkData:u,chunkInfos:l,chunkOffset:0,segmentProtections:b,appendWindow:[void 0,void 0]})}var m=P(c,s,r,o.isLive),g=m.nextSegments,y=m.chunkInfos;if(null==y)throw new Error("Smooth Segment without time information");var _=B(c,y.time);return 0<g.length&&le(a,g,y),Object(x.a)({chunkData:_,chunkInfos:y,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]})}};return{manifest:{resolver:function(e){var t,n=e.url;if(null==n)return Object(x.a)({url:void 0});t=ce.test(n)?(Object(h.a)("Giving WSX URL to loadVideo is deprecated. You should only give Manifest URLs."),Object(p.a)({url:se(n,""),responseType:"document"}).pipe(Object(i.a)(function(e){var t=e.value,n=t.responseData.getElementsByTagName("media")[0].getAttribute("src");if(null===n||0===n.length)throw new Error("Invalid ISML");return n}))):Object(x.a)(n);var r=function(e){var t=e.match(ue);if(null!==t){var n=t[1];if(void 0!==n)return n}return""}(n);return t.pipe(Object(i.a)(function(e){return{url:se((t=e,oe.test(t)?(Object(h.a)("Giving a isml URL to loadVideo is deprecated. Please give the Manifest URL directly"),t.replace(oe,"$1/manifest$2")):t),r)};var t}))},loader:Object(m.a)(t),parser:function(e){var t=e.response,n=e.url,r=null==t.url?n:t.url,i="string"==typeof t.responseData?(new DOMParser).parseFromString(t.responseData,"text/xml"):t.responseData,a=t.receivedTime,o=c(i,r,a),u=new l.a(o,{representationFilter:s.representationFilter,supplementaryImageTracks:s.supplementaryImageTracks,supplementaryTextTracks:s.supplementaryTextTracks});return Object(x.a)({manifest:u,url:r})}},audio:n,video:n,text:{loader:function(e){var t=e.segment,n=e.representation;if(t.isInit||null==t.mediaURL)return Object(x.a)({type:"data-created",value:{responseData:null}});var r,i="string"==typeof(r=n).mimeType&&0<=r.mimeType.indexOf("mp4");return i&&!0===s.checkMediaSegmentIntegrity?Object(p.a)({url:t.mediaURL,responseType:"arraybuffer",sendProgressEvents:!0}).pipe(Object(a.a)(function(e){"data-loaded"===e.type&&Object(b.a)(new Uint8Array(e.value.responseData),t.isInit)})):Object(p.a)({url:t.mediaURL,responseType:i?"arraybuffer":"text",sendProgressEvents:!0})},parser:function(e){var t,n=e.content,r=e.response,i=n.manifest,a=n.adaptation,o=n.representation,u=n.segment,s=a.language,c=o.mimeType,l=void 0===c?"":c,f=o.codec,d=void 0===f?"":f,p=r.data,h=r.isChunked;if(u.isInit||null==p)return Object(x.a)({chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]});var v,b,m,g,y=null,_=1;if(0<=l.indexOf("mp4")){var O,E=P(O="string"==typeof p?Object(Y.r)(p):p instanceof Uint8Array?p:new Uint8Array(p),h,u,i.isLive);t=E.nextSegments,null==(y=E.chunkInfos)?h?k.a.warn("Smooth: Unavailable time data for current text track."):(b=(v=u.time)+u.duration,_=u.timescale):(v=y.time,b=null!=y.duration?y.time+y.duration:void 0,_=y.timescale);var w=d.toLowerCase();if("application/ttml+xml+mp4"===l||"stpp"===w||"stpp.ttml.im1t"===w)g="ttml";else{if("wvtt"!==w)throw new Error("could not find a text-track parser for the type "+l);g="vtt"}var j=Object(R.a)(O);m=Object(D.a)(j)}else{var T;if("string"!=typeof p){var S=p instanceof Uint8Array?p:new Uint8Array(p);T=Object(Y.g)(S)}else T=p;var A=u.time;switch(b=(v=A)+u.duration,_=u.timescale,l){case"application/x-sami":case"application/smil":g="sami";break;case"application/ttml+xml":g="ttml";break;case"text/vtt":g="vtt"}if(void 0===g){if("srt"!==d.toLowerCase())throw new Error("could not find a text-track parser for the type "+l);g="srt"}m=T}return null!=y&&Array.isArray(t)&&0<t.length&&le(a,t,y),Object(x.a)({chunkData:{type:g,data:m,language:s,timescale:_,start:v,end:b},chunkInfos:y,chunkOffset:null==v?0:v/_,segmentProtections:[],appendWindow:[void 0,void 0]})}},image:{loader:function(e){var t=e.segment;return t.isInit||null==t.mediaURL?Object(x.a)({type:"data-created",value:{responseData:null}}):Object(p.a)({url:t.mediaURL,responseType:"arraybuffer",sendProgressEvents:!0})},parser:function(e){var t=e.response,n=t.data;if(t.isChunked)throw new Error("Image data should not be downloaded in chunks");if(null===n||null==o.a.imageParser)return Object(x.a)({chunkData:null,chunkInfos:null,chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]});var r=o.a.imageParser(new Uint8Array(n)),i=r.thumbs;return Object(x.a)({chunkData:{data:i,start:0,end:Number.MAX_VALUE,timescale:1,type:"bif"},chunkInfos:{time:0,duration:Number.MAX_VALUE,timescale:r.timescale},chunkOffset:0,segmentProtections:[],appendWindow:[void 0,void 0]})}}}}},function(e,t,n){"use strict";n.r(t);var r=n(12),A=n.n(r),x=n(11),k=n(2),R=n(112),I=n(78),M=n(34),N=n(57),l=n(126),j=n(153),T=n(0),S=n(16);function C(e,t){return"-1px -1px "+t+" "+e+",1px -1px "+t+" "+e+",-1px 1px "+t+" "+e+",1px 1px "+t+" "+e}function D(e){var t;return null!=(t=S.b.exec(e))?"rgba("+String(parseInt(t[1],16))+","+String(parseInt(t[2],16))+","+String(parseInt(t[3],16))+","+String(parseInt(t[4],16)/255)+")":null!=(t=S.a.exec(e))?"rgba("+String(parseInt(t[1]+t[1],16))+","+String(parseInt(t[2]+t[2],16))+","+String(parseInt(t[3]+t[3],16))+","+String(parseInt(t[4]+t[4],16)/255)+")":e}var m=["color","direction","display","fontFamily","fontSize","fontStyle","fontWeight","textDecoration","textOutline","unicodeBidi","visibility","wrapOption"];function o(e,t,n){var r=t.color;Object(k.a)(r)&&(e.style.color=D(r));var i=t.backgroundColor;Object(k.a)(i)&&(e.style.backgroundColor=D(i));var a=t.textOutline;if(Object(k.a)(a)){var o=a.trim().replace(/\s+/g," ").split(" "),u=o.length;if(3===u){var s=D(o[0]),c=o[1];e.style.textShadow=C(s,c)}else if(Object(k.a)(r)&&1===u){var l=o[0];e.style.textShadow=C(r,l)}else if(2===u){var f=/^[#A-Z]/i.test(o[0]);if(f!==/^[0-9]/.test(o[0]))if(f){var d=D(o[0]),p=o[1];e.style.textShadow=C(d,p)}else if(Object(k.a)(r)){var h=o[0];e.style.textShadow=C(r,h)}}}var v=t.textDecoration;if(Object(k.a)(v))switch(v){case"noUnderline":case"noLineThrough":case"noOverline":e.style.textDecoration="none";break;case"lineThrough":e.style.textDecoration="line-through";break;default:e.style.textDecoration=v}var b=t.fontFamily;if(Object(k.a)(b))switch(b){case"proportionalSansSerif":e.style.fontFamily="Arial, Helvetica, Liberation Sans, sans-serif";break;case"monospaceSansSerif":case"sansSerif":e.style.fontFamily="sans-serif";break;case"monospaceSerif":case"default":e.style.fontFamily="Courier New, Liberation Mono, monospace";break;case"proportionalSerif":e.style.fontFamily="serif";break;default:e.style.fontFamily=b}var m=t.fontStyle;Object(k.a)(m)&&(e.style.fontStyle=m);var g=t.fontWeight;Object(k.a)(g)&&(e.style.fontWeight=g);var y=t.fontSize;Object(k.a)(y)?function(e,t){var n=t.trim().split(" ");if(0!==n.length){var r=S.c.exec(n[0]);null!==r&&("px"===r[2]||"%"===r[2]||"em"===r[2]?e.style.fontSize=r[1]+r[2]:"c"===r[2]?(e.style.position="relative",Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-font-size",r[1])):T.a.warn("TTML Parser: unhandled fontSize unit:",r[2]))}}(e,y):(Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-font-size","1"));var _=t.direction;Object(k.a)(_)&&(e.style.direction=_);var O=t.unicodeBidi;if(Object(k.a)(O))switch(O){case"bidiOverride":e.style.unicodeBidi="bidi-override";break;case"embed":e.style.unicodeBidi="embed";break;default:e.style.unicodeBidi="normal"}var E=t.visibility;Object(k.a)(E)&&(e.style.visibility=E),"none"===t.display&&(e.style.display="none");var w=t.wrapOption;e.style.whiteSpace="noWrap"===w?n?"nowrap":"pre":n?"normal":"pre-wrap"}function h(e,t){var n=t.extent;Object(k.a)(n)&&function(e,t){var n=t.trim();if("auto"!==n){var r=n.split(" ");if(2===r.length){var i=S.c.exec(r[0]),a=S.c.exec(r[1]);null!==i&&null!==a&&("px"===i[2]||"%"===i[2]||"em"===i[2]?e.style.width=i[1]+i[2]:"c"===i[2]?(Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-width",i[1])):T.a.warn("TTML Parser: unhandled extent unit:",i[2]),"px"===a[2]||"%"===a[2]||"em"===a[2]?e.style.height=a[1]+a[2]:"c"===a[2]?(Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-height",a[1])):T.a.warn("TTML Parser: unhandled extent unit:",a[2]))}}}(e,n);var r=t.writingMode;Object(k.a)(r);var i=t.overflow;e.style.overflow=Object(k.a)(i)?i:"hidden";var a=t.padding;Object(k.a)(a)&&function(e,t){var n=t.trim().split(" ");if(!(n.length<1)){var r=S.c.exec(n[0]);if(null!==r){if("px"===r[2]||"%"===r[2]||"em"===r[2]){var i=r[1]+r[2];1===n.length?e.style.padding=i:2===n.length?(e.style.paddingTop=i,e.style.paddingBottom=i):e.style.paddingTop=i}else"c"===r[2]?(Object(j.a)(e,"proportional-style"),1===n.length?(e.setAttribute("data-proportional-padding-top",r[1]),e.setAttribute("data-proportional-padding-bottom",r[1]),e.setAttribute("data-proportional-padding-left",r[1]),e.setAttribute("data-proportional-padding-right",r[1])):2===n.length?(e.setAttribute("data-proportional-padding-top",r[1]),e.setAttribute("data-proportional-padding-bottom",r[1])):e.setAttribute("data-proportional-padding-top",r[1])):T.a.warn("TTML Parser: unhandled padding unit:",r[2]);if(1!==n.length){var a=S.c.exec(n[1]);if(null!==a){if("px"===a[2]||"%"===a[2]||"em"===a[2]){var o=a[1]+a[2];n.length<4&&(e.style.paddingLeft=o),e.style.paddingRight=o}else"c"===a[2]?(Object(j.a)(e,"proportional-style"),n.length<4&&e.setAttribute("data-proportional-padding-left",a[1]),e.setAttribute("data-proportional-padding-right",a[1])):T.a.warn("TTML Parser: unhandled padding unit:",a[2]);if(2!==n.length){var u=S.c.exec(n[2]);if(null!==u){if("px"===u[2]||"%"===u[2]||"em"===u[2]){var s=u[1]+u[2];e.style.paddingBottom=s}else"c"===u[2]?(Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-padding-bottom",u[1])):T.a.warn("TTML Parser: unhandled padding unit:",u[2]);if(3!==n.length){var c=S.c.exec(n[3]);if(null!==c)if("px"===c[2]||"%"===c[2]||"em"===c[2]){var l=c[1]+c[2];e.style.paddingLeft=l}else"c"===c[2]?(Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-padding-left",c[1])):T.a.warn("TTML Parser: unhandled padding unit:",c[2])}}}}}}}}(e,a);var o=t.origin;Object(k.a)(o)&&function(e,t){var n=t.trim();if("auto"!==n){var r=n.split(" ");if(2===r.length){var i=S.c.exec(r[0]),a=S.c.exec(r[1]);null!==i&&null!==a&&("px"===i[2]||"%"===i[2]||"em"===i[2]?(e.style.position="relative",e.style.left=i[1]+i[2]):"c"===i[2]?(e.style.position="relative",Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-left",i[1])):T.a.warn("TTML Parser: unhandled origin unit:",i[2]),"px"===a[2]||"%"===a[2]||"em"===a[2]?(e.style.position="relative",e.style.top=a[1]+a[2]):"c"===a[2]?(e.style.position="relative",Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-top",a[1])):T.a.warn("TTML Parser: unhandled origin unit:",a[2]))}}}(e,o);var u=t.displayAlign;if(e.style.display="flex",e.style.flexDirection="column",Object(k.a)(u))switch(u){case"before":e.style.justifyContent="flex-start";break;case"center":e.style.justifyContent="center";break;case"after":e.style.justifyContent="flex-end"}var s=t.opacity;Object(k.a)(s)&&(e.style.opacity=s);var c=t.visibility;Object(k.a)(c)&&(e.style.visibility=c),"none"===t.display&&(e.style.display="none")}function v(e,t){e.style.margin="0px";var n=t.backgroundColor;Object(k.a)(n)&&(e.style.backgroundColor=D(n));var r=t.lineHeight;Object(k.a)(r)&&function(e,t){var n=t.trim();if("auto"!==n){var r=S.c.exec(n[0]);null!==r&&("px"===r[2]||"%"===r[2]||"em"===r[2]?e.style.lineHeight=r[1]+r[2]:"c"===r[2]?(Object(j.a)(e,"proportional-style"),e.setAttribute("data-proportional-line-height",r[1])):T.a.warn("TTML Parser: unhandled lineHeight unit:",r[2]))}}(e,r);var i=t.textAlign;if(Object(k.a)(i))switch(i){case"center":e.style.textAlign="center";break;case"left":case"start":e.style.textAlign="left";break;case"right":case"end":e.style.textAlign="right"}}function g(e,t,n){var r=document.createElement("span"),i=null===e.textContent?"":e.textContent;if(n){var a=i.trim();i=a=a.replace(/\s+/g," ")}return r.innerHTML=i,r.className="rxp-texttrack-span",o(r,t,n),r}function b(e,v,b,t,n){return function e(t,n,r,i){for(var a=t.childNodes,o=[],u=0;u<a.length;u++){var s=a[u];if("#text"===s.nodeName){var c=Object(M.a)(["backgroundColor"],r,b,v).backgroundColor;Object(k.a)(c)?n.backgroundColor=c:delete n.backgroundColor;var l=g(s,n,i);o.push(l)}else if("br"===s.nodeName){var f=document.createElement("BR");o.push(f)}else if("span"===s.nodeName&&s.nodeType===Node.ELEMENT_NODE&&0<s.childNodes.length){var d=s.getAttribute("xml:space"),p=Object(k.a)(d)?"default"===d:i,h=A()({},n,Object(M.a)(m,[s],b,v));o.push.apply(o,e(s,h,[s].concat(r),p))}}return o}(e,A()({},t),[],n)}function P(e,t,n,r,i,a,o,u){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(null===e.textContent?"":e.textContent))return null;var s=o.cellResolution,c=Object(l.a)(e,o);return{start:c.start+t,end:c.end+t,element:function(e,t,n,r,i,a){var o=a.cellResolution,u=a.shouldTrimWhiteSpace,s=Object(I.a)(e,"div"),c=document.createElement("DIV");if(c.className="rxp-texttrack-region",c.setAttribute("data-resolution-columns",String(o.columns)),c.setAttribute("data-resolution-rows",String(o.rows)),h(c,i),null!==t){var l=Object(M.a)(["backgroundColor"],[].concat(s,[t]),r,n).bodyBackgroundColor;Object(k.a)(l)&&(c.style.backgroundColor=D(l))}var f=document.createElement("p");f.className="rxp-texttrack-p",v(f,i);for(var d=b(e,n,r,i,u),p=0;p<d.length;p++)f.appendChild(d[p]);return c.appendChild(f),c}(e,i,r,n,a,{cellResolution:s,shouldTrimWhiteSpace:u})}}var B=["backgroundColor","color","direction","display","displayAlign","extent","fontFamily","fontSize","fontStyle","fontWeight","lineHeight","opacity","origin","overflow","padding","textAlign","textDecoration","textOutline","unicodeBidi","visibility","wrapOption","writingMode"];t.default=function(e,t){var n=[],r=(new DOMParser).parseFromString(e,"text/xml");if(null!=r){var i=r.getElementsByTagName("tt")[0];if(void 0===i)throw new Error("invalid XML");for(var a=Object(N.a)(i),o=Object(N.c)(i),u=Object(N.b)(i),s=Object(N.d)(i),c=Object(R.a)(i),l=[],f=0;f<=o.length-1;f++){var d=o[f];if(d instanceof Element){var p=d.getAttribute("xml:id");null!==p&&l.push({id:p,style:Object(M.b)(d)})}}for(var h=[],v=0;v<=u.length-1;v++){var b=u[v];if(b instanceof Element){var m=b.getAttribute("xml:id");null!==m&&function(){var e=Object(M.b)(b),t=b.getAttribute("style");if(Object(k.a)(t)){var n=Object(x.a)(l,function(e){return e.id===t});void 0!==n&&(e=A()({},n.style,e))}h.push({id:m,style:e})}()}}for(var g=null!==a?Object(M.a)(B,[a],l,h):Object(M.a)(B,[],l,h),y="default"===(null!==a?a.getAttribute("xml:space"):void 0)||"default"===c.spaceStyle,_=0;_<s.length;_++){var O=s[_];if(O instanceof Element){var E=Object(I.a)(O,"div"),w=A()({},g,Object(M.a)(B,[O].concat(E),l,h)),j=O.getAttribute("xml:space"),T=Object(k.a)(j)?"default"===j:y,S=P(O,t,l,h,a,w,c,T);null!==S&&n.push(S)}}}return n}},function(e,t,n){"use strict";n.r(t);var f=n(110),m=n(2),d=n(60);var p=n(125),r={white:"#ffffff",lime:"#00ff00",cyan:"#00ffff",red:"#ff0000",yellow:"#ffff00",magenta:"#ff00ff",blue:"#0000ff",black:"#000000"};function h(e){var o=Object.keys(r).reduce(function(e,t){return e[t]="color: "+r[t]+";",e["bg_"+t]="background-color: "+r[t]+";",e},{}),t="";return e.forEach(function(r){if(2<=r.length)for(var i=1;i<r.length;i++){var a=r[i];if(Array.isArray(a.match(/::cue {/)))for(a=r[++i];Object(m.a)(a)&&!Array.isArray(a.match(/}/))&&0!==a.length;)t+=a,a=r[++i];else!function(){for(var e=[],t=a.match(/::cue\(\.?(.*?)\)(?:,| {)/);Object(m.a)(a)&&Array.isArray(t);)e.push(t[1]),t=(a=r[++i]).match(/::cue\(\.?(.*?)\)(?:,| {)/);for(var n="";Object(m.a)(a)&&!Array.isArray(a.match(/}/))&&0!==a.length;)n+=a,a=r[++i];e.forEach(function(e){void 0===o[e]?o[e]=n:o[e]+=n})}()}}),{classes:o,global:t}}var g=n(13);function y(e,t){var n,r=["u","i","b"],i=e.nodeName.toLowerCase().split(".")[0];if(Object(g.a)(["u","i","b","c","#text"],i))if("#text"===i){var a=e.wholeText.split("\n");n=document.createElement("span");for(var o=0;o<a.length;o++)if(0<o&&n.appendChild(document.createElement("br")),0<a[o].length){var u=document.createTextNode(a[o]);n.appendChild(u)}}else{var s=e.nodeName.toLowerCase().split("."),c=[];if(s.forEach(function(e){Object(m.a)(t[e])&&c.push(t[e])}),0!==c.length){var l=document.createAttribute("style");c.forEach(function(e){l.value+=e});var f=Object(g.a)(r,i)?i:"span";(n=document.createElement(f)).setAttributeNode(l)}else{var d=Object(g.a)(r,i)?i:"span";n=document.createElement(d)}for(var p=0;p<e.childNodes.length;p++){var h=y(e.childNodes[p],t);n.appendChild(h)}}else{n=document.createElement("span");for(var v=0;v<e.childNodes.length;v++){var b=y(e.childNodes[v],t);n.appendChild(b)}}return n}function v(e,t){var n=e.start,r=e.end,i=e.header,a=e.payload,o=document.createElement("div"),u=document.createAttribute("style");u.value="width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-end;align-items:center;",o.setAttributeNode(u);var s=document.createElement("p"),c=document.createAttribute("style");c.value="text-align:center",s.setAttributeNode(c);var l=document.createElement("span"),f=document.createAttribute("style");f.value="background-color:rgba(0,0,0,0.8);color:white;",l.setAttributeNode(f);var d=t.global,p=t.classes,h=[d,Object(m.a)(i)?p[i]:void 0].filter(function(e){return void 0!==e}).join("");return f.value+=h,l.setAttributeNode(f),function(e,t){for(var n=e.replace(/<[0-9]{2}:[0-9]{2}.[0-9]{3}>/,"").replace(/<([u,i,b,c])(\..*?)?(?: .*?)?>(.*?)<\/\1>/g,"<$1$2>$3</$1$2>"),r=(new DOMParser).parseFromString(n,"text/html").body.childNodes,i=[],a=0;a<r.length;a++)i.push(y(r[a],t));return i}(a.join("\n"),p).forEach(function(e){l.appendChild(e)}),o.appendChild(s),s.appendChild(l),{start:n,end:r,element:o}}t.default=function(e,t){var n=e.split(/\r\n|\n|\r/g),r=[];if(null===n[0].match(/^WEBVTT( |\t|\n|\r|$)/))throw new Error("Can't parse WebVTT: Invalid File.");for(var i=Object(d.b)(n),a=function(e,t){for(var n=[],r=t;r<e.length;r++)if(Object(d.d)(e,r)){var i=r;for(r++;Object(m.a)(e[r]);)r++;var a=e.slice(i,r);n.push(a)}else if(Object(m.a)(e[r]))for(;Object(m.a)(e[r]);)r++;return n}(n,i),o=Object(f.a)(n,i),u=h(a),s=0;s<o.length;s++){var c=Object(p.a)(o[s],t);if(null!=c){var l=v(c,u);r.push(l)}}return r}},function(e,t,n){"use strict";n.r(t);var l=n(83),f=n(211),d=n(127),p=n(26),h=n(44),v=n(171),b=n(227),m=n(172),g=n(173),r=n(7),i=n(152),a=n(3),y=n(0),o=n(79),u=.2;function _(e,t){return Math.abs(e-t)<=u}function O(e,t){for(var n=0;n<e.length;n++){if(t<e[n].end)return e.slice(0,n)}return e.slice()}function E(e,t){for(var n=0;n<e.length;n++){if(e[n].start>t)return e.slice(n,e.length)}return[]}function w(e,t,n){var r=Math.max(e.start,t),i=O(e.cues,t),a={start:e.start,end:r,cues:i},o=Math.min(n,e.end),u=E(e.cues,n);return[a,{start:o,end:e.end,cues:u}]}var j=function(){function e(){this._cuesBuffer=[]}var t=e.prototype;return t.get=function(e){for(var t=this._cuesBuffer,n=t.length-1;0<=n;n--)for(var r=t[n].cues,i=r.length-1;0<=i;i--){var a=r[i];if(e>=a.start)return e<a.end?a:void 0}},t.remove=function(e,t){for(var n=Math.max(e,t),r=this._cuesBuffer,i=r.length,a=0;a<i;a++)if(r[a].end>e){var o=r[a];if(o.start>=n)return;if(o.end>=n){var u=w(o,e,n),s=u[0],c=u[1];return this._cuesBuffer[a]=s,void r.splice(a+1,0,c)}o.cues=O(o.cues,e),o.end=Math.max(e,o.start);for(var l=a+1;l<i;l++){var f=r[a];if(n<=f.end)return r.splice(a+1,l-(a+1)),void(n>f.start&&(f.cues=E(f.cues,n),f.start=n))}return void r.splice(a+1,r.length-(a+1))}},t.insert=function(e,t,n){for(var r=this._cuesBuffer,i={start:t,end:n,cues:e},a=0;a<r.length;a++){var o=r[a];if(t<o.end){if(_(t,o.start)){if(_(n,o.end))return void(r[a]=i);if(n<o.end)return o.cues=E(o.cues,n),o.start=n,void r.splice(a,0,i);for(;r.splice(a,1),void 0!==(o=r[a])&&n>o.end;);return void 0===o||_(n,o.end)?void(r[a]=i):(o.cues=E(o.cues,n),o.start=n,void r.splice(a,0,i))}if(t<o.start)return n<o.start||(_(n,o.start)||(o.cues=E(o.cues,n)),o.start=n),void r.splice(a,0,i);if(n>o.end||_(n,o.end))return o.cues=O(o.cues,t),o.end=t,void r.splice(a+1,0,i);var u=w(o,t,n),s=u[0],c=u[1];return this._cuesBuffer[a]=s,r.splice(a+1,0,i),void r.splice(a+2,0,c)}}r.push(i)},e}(),T=n(10);var S=r.a.onEnded$,A=r.a.onSeeked$,x=r.a.onSeeking$,k=a.a.MAXIMUM_HTML_TEXT_TRACK_UPDATE_INTERVAL,s=a.a.TEXT_TRACK_SIZE_CHECKS_INTERVAL;function R(e,t){try{e.removeChild(t)}catch(e){y.a.warn("HTSB: Can't remove text track: not in the element.")}}var c=function(c){var e,t;function n(e,t){var r,n,i,a,o,u,s;return y.a.debug("HTSB: Creating html text track SourceBuffer"),(r=c.call(this)||this)._videoElement=e,r._textTrackElement=t,r._clearSizeUpdates$=new h.a,r._destroy$=new h.a,r._buffer=new j,r._currentCue=null,(n=r._videoElement,i=x(n),a=A(n),o=S(n),u=Object(l.a)(a,o),s=Object(f.a)(k).pipe(Object(v.a)(null)),u.pipe(Object(v.a)(null),Object(b.a)(Object(d.a)(s.pipe(Object(m.a)(!0),Object(g.a)(i)),Object(p.a)(!1))))).pipe(Object(g.a)(r._destroy$)).subscribe(function(e){if(e){var t=Math.max(r._videoElement.currentTime-k/2e3,0),n=r._buffer.get(t);void 0===n?r._hideCurrentCue():r._displayCue(n.element)}else r._hideCurrentCue()}),r}t=c,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r._append=function(e){y.a.debug("HTSB: Appending new html text tracks",e);var t,n,r=e.timescale,i=e.start,a=e.end,o=e.data,u=e.type,s=e.language,c=null!=i?i/r:void 0,l=null!=a?a/r:void 0,f=function(e,t,n,r){y.a.debug("HTSB: Finding parser for html text tracks:",e);var i=T.a.htmlTextTracksParsers[e];if("function"!=typeof i)throw new Error("no parser found for the given text track");y.a.debug("HTSB: Parser found, parsing...");var a=i(t,n,r);return y.a.debug("HTTB: Parsed successfully!",a),a}(u,o,this.timestampOffset,s);if(0!==this.appendWindowStart&&this.appendWindowEnd!==1/0){for(var d=0;d<f.length&&f[d].end<=this.appendWindowStart;)d++;for(f.splice(0,d),d=0;d<f.length&&f[d].start<this.appendWindowStart;)f[d].start=this.appendWindowStart,d++;for(d=f.length-1;0<=d&&f[d].start>=this.appendWindowEnd;)d--;for(f.splice(d,f.length),d=f.length-1;0<=d&&f[d].end>this.appendWindowEnd;)f[d].end=this.appendWindowEnd,d--}if(null!=c)t=Math.max(this.appendWindowStart,c);else{if(f.length<=0)return void y.a.warn("HTSB: Current text tracks have no cues nor start time. Aborting");y.a.warn("HTSB: No start time given. Guessing from cues."),t=f[0].start}if(null!=l)n=Math.min(this.appendWindowEnd,l);else{if(f.length<=0)return void y.a.warn("HTSB: Current text tracks have no cues nor end time. Aborting");y.a.warn("HTSB: No end time given. Guessing from cues."),n=f[f.length-1].end}n<=t?y.a.warn("HTSB: Invalid text track appended: ","the start time is inferior or equal to the end time."):(this._buffer.insert(f,t,n),this.buffered.insert(t,n))},r._remove=function(e,t){y.a.debug("HTSB: Removing html text track data",e,t),this._buffer.remove(e,t),this.buffered.remove(e,t)},r._abort=function(){y.a.debug("HTSB: Aborting html text track SourceBuffer"),this._hideCurrentCue(),this._remove(0,1/0),this._destroy$.next(),this._destroy$.complete()},r._hideCurrentCue=function(){this._clearSizeUpdates$.next(),null!==this._currentCue&&(R(this._textTrackElement,this._currentCue.element),this._currentCue=null)},r._displayCue=function(e){var r=this;if(null===this._currentCue||this._currentCue.element!==e){this._clearSizeUpdates$.next(),null!==this._currentCue&&R(this._textTrackElement,this._currentCue.element);var t=function(e){var t=e.getAttribute("data-resolution-rows"),n=e.getAttribute("data-resolution-columns");if(null===t||null===n)return null;var r=parseInt(t,10),i=parseInt(n,10);return null===r||null===i?null:{rows:r,columns:i}}(e);this._currentCue={element:e,resolution:t},null!==t&&Object(i.a)(this._textTrackElement,s).pipe(Object(g.a)(this._clearSizeUpdates$),Object(g.a)(this._destroy$)).subscribe(function(e){var t=e.height,n=e.width;null===r._currentCue||null===r._currentCue.resolution||function(e,t,n,r){for(var i=[t/n.columns,e/n.rows],a=r.getElementsByClassName("proportional-style"),o=0;o<a.length;o++){var u=a[o];if(u instanceof HTMLElement){var s=u.getAttribute("data-proportional-font-size");null===s||isNaN(+s)||(u.style.fontSize=String(s*i[1])+"px");var c=u.getAttribute("data-proportional-width");null===c||isNaN(+c)||(u.style.width=String(c*i[0])+"px");var l=u.getAttribute("data-proportional-height");null===l||isNaN(+l)||(u.style.height=String(l*i[1])+"px");var f=u.getAttribute("data-proportional-line-height");null===f||isNaN(+f)||(u.style.lineHeight=String(f*i[1])+"px");var d=u.getAttribute("data-proportional-left");null===d||isNaN(+d)||(u.style.left=String(d*i[0])+"px");var p=u.getAttribute("data-proportional-top");null===p||isNaN(+p)||(u.style.top=String(p*i[1])+"px");var h=u.getAttribute("data-proportional-padding-top");null===h||isNaN(+h)||(u.style.paddingTop=String(h*i[1])+"px");var v=u.getAttribute("data-proportional-padding-bottom");null===v||isNaN(+v)||(u.style.paddingBottom=String(v*i[1])+"px");var b=u.getAttribute("data-proportional-padding-left");null===b||isNaN(+b)||(u.style.paddingLeft=String(b*i[0])+"px");var m=u.getAttribute("data-proportional-padding-right");null===m||isNaN(+m)||(u.style.paddingRight=String(m*i[0])+"px")}}return 0<a.length}(t,n,r._currentCue.resolution,r._currentCue.element)||r._clearSizeUpdates$.next()}),this._textTrackElement.appendChild(e)}},n}(o.a);t.default=c},function(e,t,n){"use strict";n.r(t);var u=n(150),b=n(0),r=n(24);function s(e,t){if(r.a&&function(e,t){for(var n=e.activeCues,r=0;r<n.length;r++)if(n[r]===t)return!0;return!1}(e,t)){var n=e.mode;e.mode="hidden";try{e.removeCue(t)}catch(e){b.a.warn("Compat: Could not remove cue from text track.")}e.mode=n}else try{e.removeCue(t)}catch(e){b.a.warn("Compat: Could not remove cue from text track.")}}var i=n(79),m=n(10);var a=function(o){var e,t;function n(e,t){var n;b.a.debug("NTSB: Creating native text track SourceBuffer"),n=o.call(this)||this;var r=Object(u.a)(e,t),i=r.track,a=r.trackElement;return n._videoElement=e,n._track=i,n._trackElement=a,n}t=o,(e=n).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var r=n.prototype;return r._append=function(e){b.a.debug("NTSB: Appending new native text tracks",e);var t,n,r=e.timescale,i=e.start,a=e.end,o=e.data,u=e.type,s=e.language,c=null!=i?i/r:void 0,l=null!=a?a/r:void 0,f=function(e,t,n,r){b.a.debug("NTSB: Finding parser for native text tracks:",e);var i=m.a.nativeTextTracksParsers[e];if("function"!=typeof i)throw new Error("no parser found for the given text track");b.a.debug("NTSB: Parser found, parsing...");var a=i(t,n,r);return b.a.debug("NTSB: Parsed successfully!",a),a}(u,o,this.timestampOffset,s);if(0!==this.appendWindowStart&&this.appendWindowEnd!==1/0){for(var d=0;d<f.length&&f[d].endTime<=this.appendWindowStart;)d++;for(f.splice(0,d),d=0;d<f.length&&f[d].startTime<this.appendWindowStart;)f[d].startTime=this.appendWindowStart,d++;for(d=f.length-1;0<=d&&f[d].startTime>=this.appendWindowEnd;)d--;for(f.splice(d,f.length),d=f.length-1;0<=d&&f[d].endTime>this.appendWindowEnd;)f[d].endTime=this.appendWindowEnd,d--}if(null!=c)t=Math.max(this.appendWindowStart,c);else{if(f.length<=0)return void b.a.warn("NTSB: Current text tracks have no cues nor start time. Aborting");b.a.warn("NTSB: No start time given. Guessing from cues."),t=f[0].startTime}if(null!=l)n=Math.min(this.appendWindowEnd,l);else{if(f.length<=0)return void b.a.warn("NTSB: Current text tracks have no cues nor end time. Aborting");b.a.warn("NTSB: No end time given. Guessing from cues."),n=f[f.length-1].endTime}if(n<=t)b.a.warn("NTSB: Invalid text track appended: ","the start time is inferior or equal to the end time.");else if(f.length<=0)this.buffered.insert(t,n);else{var p=f[0],h=this._track.cues;0<h.length&&p.startTime<h[h.length-1].startTime&&this._remove(p.startTime,1/0);for(var v=0;v<f.length;v++)this._track.addCue(f[v]);this.buffered.insert(t,n)}},r._remove=function(e,t){b.a.debug("NTSB: Removing native text track data",e,t);var n=this._track,r=n.cues;if(null!=r)for(var i=r.length-1;0<=i;i--){var a=r[i],o=a.startTime,u=a.endTime;e<=o&&o<=t&&u<=t&&s(n,a)}this.buffered.remove(e,t)},r._abort=function(){b.a.debug("NTSB: Aborting native text track SourceBuffer"),this._remove(0,1/0);var e=this._trackElement,t=this._videoElement;if(void 0!==e&&null!=t&&t.hasChildNodes())try{t.removeChild(e)}catch(e){b.a.warn("NTSB: Can't remove track element from the video")}null!=this._track&&(this._track.mode="disabled"),null!=this._trackElement&&(this._trackElement.innerHTML="")},n}(i.a);t.default=a},function(e,t,n){"use strict";n.r(t);var p=n(151),h=n(110),v=n(125),b=n(60),o=n(13),u=n(2);function m(e,t){if(!Object(u.a)(e.vertical)||"rl"!==e.vertical&&"lr"!==e.vertical||(t.vertical=e.vertical),Object(u.a)(e.line)){var n=e.line.match(/^(\d+(\.\d+)?)%(,([a-z]+))?/);if(Array.isArray(n))t.line=Number(n[1]),t.snapToLines=!1,Object(o.a)(["start","center","end"],n[4])&&(t.lineAlign=n[4]);else{var r=e.line.match(/^(-?\d+)(,([a-z]+))?/);Array.isArray(r)&&(t.line=Number(r[1]),t.snapToLines=!0,Object(o.a)(["start","center","end"],r[3])&&(t.lineAlign=r[3]))}}if(Object(u.a)(e.position)){var i=/^([\d\.]+)%(?:,(line-left|line-right|center))?$/.exec(e.position);if(Array.isArray(i)&&2<=i.length){var a=parseInt(i[1],10);isNaN(a)||(t.position=a,void 0!==i[2]&&(t.positionAlign=i[2]))}}Object(u.a)(e.size)&&(t.size=e.size),"string"==typeof e.align&&Object(o.a)(["start","center","end","left"],e.align)&&(t.align=e.align)}var g=n(111);t.default=function(e,t){var n=e.split(/\r\n|\n|\r/);if(!/^WEBVTT($| |\t)/.test(n[0]))throw new Error("Can't parse WebVTT: Invalid file.");for(var r,i,a,o,u=Object(b.b)(n),s=Object(h.a)(n,u),c=[],l=0;l<s.length;l++){var f=Object(v.a)(s[l],t);if(null!=f){var d=(void 0,i=(r=f).start,a=r.end,o=r.payload.join("\n"),Object(g.a)(i,a,o));null!=d&&(Object(p.a)(d)&&m(f.settings,d),c.push(d))}}return c}},function(e,t,n){"use strict";n.r(t);var s=n(0);var r=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),(t.prototype.constructor=t).__proto__=n;var i=r.prototype;return i._append=function(e){s.a.debug("ImageSourceBuffer: appending new data.");var t=e.start,n=e.end,r=e.timescale,i=t/r,a=null==n?Number.MAX_VALUE:n/r,o=Math.max(this.appendWindowStart,i),u=Math.min(this.appendWindowEnd,a);this.buffered.insert(o,u)},i._remove=function(e,t){s.a.info("ImageSourceBuffer: ignored image data remove order",e,t)},i._abort=function(){s.a.debug("ImageSourceBuffer: aborting image SourceBuffer"),this._remove(0,1/0)},r}(n(79).a);t.default=r},function(e,t,n){"use strict";n.r(t);var r=n(12),A=n.n(r),d=n(111),p=n(151),x=n(11),k=n(2),R=n(112),I=n(78),M=n(34),h=n(126),N=n(57),v=n(16),C=["extent","writingMode","origin","align"],b={left:"start",center:"center",right:"end",start:"start",end:"end"},m={left:"line-left",center:"center",right:"line-right"};function D(e,t,n,r,i,a,o){if(!e.hasAttribute("begin")&&!e.hasAttribute("end")&&/^\s*$/.test(null===e.textContent?"":e.textContent))return null;var u=Object(h.a)(e,a),s=u.start,c=u.end,l=function e(t,n){for(var r=t.childNodes,i="",a=0;a<r.length;a++){var o=r[a];if("#text"===o.nodeName){var u=o.textContent;if(null===u&&(u=""),n){var s=u.trim();u=s=s.replace(/\s+/g," ")}i+=u.replace(/&|\u0026/g,"&amp;").replace(/<|\u003C/g,"&lt;").replace(/>|\u2265/g,"&gt;").replace(/\u200E/g,"&lrm;").replace(/\u200F/g,"&rlm;").replace(/\u00A0/g,"&nbsp;")}else if("br"===o.nodeName)i+="\n";else if("span"===o.nodeName&&o.nodeType===Node.ELEMENT_NODE&&0<o.childNodes.length){var c=o.getAttribute("xml:space");i+=e(o,Object(k.a)(c)?"default"===c:n)}}return i}(e,o),f=Object(d.a)(s+t,c+t,l);return null===f?null:(Object(p.a)(f)&&function(e,t){var n=t.extent;if(Object(k.a)(n)){var r=v.d.exec(n);null!=r&&(e.size=Number(r[1]))}switch(t.writingMode){case"tb":case"tblr":e.vertical="lr";break;case"tbrl":e.vertical="rl"}var i=t.origin;if(Object(k.a)(i))v.d.exec(i);var a=t.align;if(Object(k.a)(a)){"center"===(e.align=a)&&("center"!==e.align&&(e.align="middle"),e.position="auto");var o=m[a];e.positionAlign=void 0===o?"":o;var u=b[a];e.lineAlign=void 0===u?"":u}}(f,i),f)}function i(e,t){var n=[],r=(new DOMParser).parseFromString(e,"text/xml");if(null!=r){var i=r.getElementsByTagName("tt")[0];if(void 0===i)throw new Error("invalid XML");for(var a=Object(N.a)(i),o=Object(N.c)(i),u=Object(N.b)(i),s=Object(N.d)(i),c=Object(R.a)(i),l=[],f=0;f<=o.length-1;f++){var d=o[f];if(d instanceof Element){var p=d.getAttribute("xml:id");null!=p&&l.push({id:p,style:Object(M.b)(d)})}}for(var h=[],v=0;v<=u.length-1;v++){var b=u[v];if(b instanceof Element){var m=b.getAttribute("xml:id");null!=m&&function(){var e=Object(M.b)(b),t=b.getAttribute("style");if(Object(k.a)(t)){var n=Object(x.a)(l,function(e){return e.id===t});void 0!==n&&(e=A()({},n.style,e))}h.push({id:m,style:e})}()}}for(var g=null!==a?Object(M.a)(C,[a],l,h):Object(M.a)(C,[],l,h),y="default"===(null!==a?a.getAttribute("xml:space"):void 0)||"default"===c.spaceStyle,_=0;_<s.length;_++){var O=s[_];if(O instanceof Element){var E=Object(I.a)(O,"div"),w=A()({},g,Object(M.a)(C,[O].concat(E),l,h)),j=O.getAttribute("xml:space"),T=Object(k.a)(j)?"default"===j:y,S=D(O,t,l,h,w,c,T);null!==S&&n.push(S)}}}return n}t.default=i},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(9),a=n(50),o=n(59),u=n(31);function s(e,n,r,t){return Object(o.a)(r)&&(t=r,r=void 0),t?s(e,n,r).pipe(Object(u.a)(function(e){return Object(a.a)(e)?t.apply(void 0,e):t(e)})):new i.a(function(t){!function e(t,n,r,i,a){var o;if(h=t,h&&"function"==typeof h.addEventListener&&"function"==typeof h.removeEventListener){var u=t;t.addEventListener(n,r,a),o=function(){return u.removeEventListener(n,r,a)}}else if(p=t,p&&"function"==typeof p.on&&"function"==typeof p.off){var s=t;t.on(n,r),o=function(){return s.off(n,r)}}else if(d=t,d&&"function"==typeof d.addListener&&"function"==typeof d.removeListener){var c=t;t.addListener(n,r),o=function(){return c.removeListener(n,r)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var l=0,f=t.length;l<f;l++)e(t[l],n,r,i,a)}var d;var p;var h;i.add(o)}(e,n,function(e){1<arguments.length?t.next(Array.prototype.slice.call(arguments)):t.next(e)},t,r)})}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(9),i=n(43),a=n(71);function o(t,n){return void 0===t&&(t=0),void 0===n&&(n=i.a),(!Object(a.a)(t)||t<0)&&(t=0),n&&"function"==typeof n.schedule||(n=i.a),new r.a(function(e){return e.add(n.schedule(u,t,{subscriber:e,counter:0,period:t})),e})}function u(e){var t=e.subscriber,n=e.counter,r=e.period;t.next(n),this.schedule({subscriber:t,counter:n+1,period:r},r)}},function(e,t,n){"use strict";function i(e){var r="function"==typeof Map?new Map:void 0;return(i=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return a(e,arguments,u(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,e)})(e)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r});var r=function(n){var e,t;function r(e){var t;return t=n.call(this)||this,Object.setPrototypeOf(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),r.prototype),t.name="AssertionError",t.message=e,t}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r}(i(Error))},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(4),i=n(28),a=n(52),o=n(27);function u(r){return function(e){var t=new s(r),n=e.lift(t);return t.caught=n}}var s=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.selector,this.caught))},e}(),c=function(i){function e(e,t,n){var r=i.call(this,e)||this;return r.selector=t,r.caught=n,r}return r.a(e,i),e.prototype.error=function(e){if(!this.isStopped){var t=void 0;try{t=this.selector(e,this.caught)}catch(e){return void i.prototype.error.call(this,e)}this._unsubscribeAndRecycle();var n=new a.a(this,void 0,void 0);this.add(n),Object(o.a)(this,t,void 0,void 0,n)}},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(74),a=n(21),o=n(138);function r(n,r){return Object(i.a)(function(){return Object(a.a)((e=n,(t=r)instanceof o.b?t._setVideo(e):"function"==typeof e.setMediaKeys?e.setMediaKeys(t):null!==t?e.WebkitSetMediaKeys?e.WebkitSetMediaKeys(t):e.mozSetMediaKeys?e.mozSetMediaKeys(t):e.msSetMediaKeys?e.msSetMediaKeys(t):void 0:void 0));var e,t})}},function(e,t,n){"use strict";var a=n(4),r=n(9),o=n(90),u=n(71),i=function(i){function r(e,t,n){void 0===t&&(t=0),void 0===n&&(n=o.a);var r=i.call(this)||this;return r.source=e,r.delayTime=t,r.scheduler=n,(!Object(u.a)(t)||t<0)&&(r.delayTime=0),n&&"function"==typeof n.schedule||(r.scheduler=o.a),r}return a.a(r,i),r.create=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=o.a),new r(e,t,n)},r.dispatch=function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))},r.prototype._subscribe=function(e){var t=this.delayTime,n=this.source;return this.scheduler.schedule(r.dispatch,t,{source:n,subscriber:e})},r}(r.a);function s(t,n){return void 0===n&&(n=0),function(e){return e.lift(new c(t,n))}}n.d(t,"a",function(){return s});var c=function(){function e(e,t){this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return new i(t,this.delay,this.scheduler).subscribe(e)},e}()},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(4),a=n(48),o=n(50),r=n(28),u=n(27),s=n(66),c={};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=null,r=null;return Object(a.a)(e[e.length-1])&&(r=e.pop()),"function"==typeof e[e.length-1]&&(n=e.pop()),1===e.length&&Object(o.a)(e[0])&&(e=e[0]),Object(s.a)(e,r).lift(new f(n))}var f=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.resultSelector))},e}(),d=function(r){function e(e,t){var n=r.call(this,e)||this;return n.resultSelector=t,n.active=0,n.values=[],n.observables=[],n}return i.a(e,r),e.prototype._next=function(e){this.values.push(c),this.observables.push(e)},e.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(u.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(e){0==--this.active&&this.destination.complete()},e.prototype.notifyNext=function(e,t,n,r,i){var a=this.values,o=a[n],u=this.toRespond?o===c?--this.toRespond:this.toRespond:0;a[n]=t,0===u&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))},e.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},e}(r.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(4),i=n(50),a=n(66),o=n(28),u=n(27);function s(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Object(i.a)(e[0]))return e[0];e=e[0]}return Object(a.a)(e,void 0).lift(new c)}var c=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}(),l=function(n){function e(e){var t=n.call(this,e)||this;return t.hasFirst=!1,t.observables=[],t.subscriptions=[],t}return r.a(e,n),e.prototype._next=function(e){this.observables.push(e)},e.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=e[n],i=Object(u.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(e,t,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var a=0;a<this.subscriptions.length;a++)if(a!==n){var o=this.subscriptions[a];o.unsubscribe(),this.remove(o)}this.subscriptions=null}this.destination.next(t)},e}(o.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(9),o=n(43),u=n(71),s=n(48);function r(n,e,r){void 0===n&&(n=0);var i=-1;return Object(u.a)(e)?i=Number(e)<1?1:Number(e):Object(s.a)(e)&&(r=e),Object(s.a)(r)||(r=o.a),new a.a(function(e){var t=Object(u.a)(n)?n:n-r.now();return r.schedule(c,t,{index:0,period:i,subscriber:e})})}function c(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var u=n(0),s=n(1),c=n(38),l=n(102),f=n(103);function r(e){var t=e.initData,n=e.initDataType;return null==t?(u.a.warn("Compat: No init data found on media encrypted event."),{initData:t,initDataType:n}):{initData:function(e){for(var t=new Uint8Array,n=new l.a,r=0;r<e.length;){if(e.length<r+8||Object(s.d)(e,r+4)!==f.a)return u.a.warn("Compat: Unrecognized initialization data. Use as is."),e;var i=Object(s.d)(new Uint8Array(e),r);if(r+i>e.length)return u.a.warn("Compat: Unrecognized initialization data. Use as is."),e;var a=e.subarray(r,r+i),o=Object(c.a)(a);n.test(o)?u.a.warn("Compat: Duplicated PSSH found in initialization data, removing it."):(n.add(o),t=Object(s.i)(t,a)),r+=i}return r!==e.length?(u.a.warn("Compat: Unrecognized initialization data. Use as is."),e):t}(new Uint8Array(t)),initDataType:e.initDataType}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(74),u=n(0),s=n(1),a=n(21),o=n(24),c=n(103);function r(e,n,r){return Object(i.a)(function(){var t;if(u.a.debug("Compat: Calling generateRequest on the MediaKeySession"),o.c)try{t=function(e){var t=e.byteLength;u.a.info("Compat: Trying to move CENC PSSH from init data at the end of it.");for(var n=new Uint8Array,r=new Uint8Array,i=0;i<e.length;){if(e.length<i+8||Object(s.d)(e,i+4)!==c.a)throw u.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");var a=Object(s.d)(new Uint8Array(e),i);if(i+a>e.length)throw u.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");var o=e.subarray(i,i+a);16===e[i+12]&&119===e[i+13]&&239===e[i+14]&&236===e[i+15]&&192===e[i+16]&&178===e[i+17]&&77===e[i+18]&&2===e[i+19]&&172===e[i+20]&&227===e[i+21]&&60===e[i+22]&&30===e[i+23]&&82===e[i+24]&&226===e[i+25]&&251===e[i+26]&&75===e[i+27]?(u.a.info("Compat: CENC PSSH found."),n=Object(s.i)(n,o)):r=Object(s.i)(r,o),i+=a}if(i!==e.length)throw u.a.warn("Compat: unrecognized initialization data. Cannot patch it."),new Error("Compat: unrecognized initialization data. Cannot patch it.");if(r.byteLength===t)throw u.a.warn("Compat: CENC PSSH not found. Cannot patch it"),new Error("Compat: unrecognized initialization data. Cannot patch it.");return Object(s.i)(r,n)}(n)}catch(e){t=n}else t=n;return Object(a.a)(e.generateRequest(null==r?"":r,t))})}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var u=n(0),r=n(1),s=n(56);function i(e){var t=0,n=Object(s.b)(e,1836019574);if(null===n)return[];for(var r=[];t<n.length;){var i=void 0;try{i=Object(s.c)(n,1886614376)}catch(e){return u.a.warn(e),r}if(null==i)return r;var a=n.slice(i[0],i[1]),o=c(a);null!==o&&r.push({systemID:o,data:a}),n[i[0]+4]=102,n[i[0]+5]=114,n[i[0]+6]=101,n[i[0]+7]=101,t=i[1]}return r}function c(e){if(1<e[9])return u.a.warn("ISOBMFF: un-handled PSSH version"),null;if(e.length<28)return null;var t=e.slice(12,28);return Object(r.f)(t)}},function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return r});var a=n(0),b=(n(35),n(1)),m=(n(167),n(129));function g(e,t){for(var n=e.length,r=0;r+8<n;){var i=Object(b.d)(e,r);if(i<=0)return a.a.error("ISOBMFF: size out of range"),-1;if(Object(b.d)(e,r+4)===t)return r+i<=n?r:(a.a.error("ISOBMFF: box out of range"),-1);r+=i}return-1}function r(e,t){var n=g(e,1936286840);if(-1===n)return null;var r=t,i=Object(b.d)(e,n),a=n+4+4,o=e[a];a+=8;var u,s=Object(b.d)(e,a);if(a+=4,0===o)u=Object(b.d)(e,a),a+=4,r+=Object(b.d)(e,a)+i,a+=4;else{if(1!==o)return null;u=Object(b.e)(e,a),a+=8,r+=Object(b.e)(e,a)+i,a+=8}var c=[];a+=2;var l=Object(b.b)(e,a);for(a+=2;0<=--l;){var f=Object(b.d)(e,a);a+=4;var d=2147483647&f;if(1==(2147483648&f)>>>31)throw new Error("sidx with reference_type `1` not yet implemented");var p=Object(b.d)(e,a);a+=4,a+=4,c.push({time:u,duration:p,count:0,timescale:s,range:[r,r+d-1]}),u+=p,r+=d}return c}function i(e){var t=Object(m.c)(e);if(null===t)return-1;var n=g(t,1952867444);if(-1===n)return-1;var r=n+4+4,i=t[r];return r+=4,1<i?-1:0!==i?Object(b.e)(t,r):Object(b.d)(t,r)}function o(e){var t=Object(m.c)(e);if(null===t)return-1;var n=g(t,1953658222);if(-1===n)return-1;var r=n+4+4,i=t[r];if(r+=1,1<i)return-1;var a=Object(b.c)(t,r);r+=3;var o=256&a,u=0;if(0==o&&(u=function(e){var t=g(e,1952868452);if(-1===t)return-1;var n=t+4+4+1,r=Object(b.c)(e,n);return n+=3,0==(8&r)?-1:(n+=4,0!=(1&r)&&(n+=8),0!=(2&r)&&(n+=4),Object(b.d)(e,n))}(t))<0)return-1;var s=1&a,c=4&a,l=512&a,f=1024&a,d=2048&a,p=Object(b.d)(t,r);r+=4,0!=s&&(r+=4),0!=c&&(r+=4);for(var h=p,v=0;0<h--;)0!=o?(v+=Object(b.d)(t,r),r+=4):v+=u,0!=l&&(r+=4),0!=f&&(r+=4),0!=d&&(r+=4);return v}function u(e){var t=Object(m.b)(e);if(null===t)return-1;var n=g(t,1835296868);if(-1===n)return-1;var r=n+4+4,i=t[r];return r+=4,1===i?(r+=16,Object(b.d)(t,r)):0===i?(r+=8,Object(b.d)(t,r)):-1}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(4),i=n(8);function a(t,n){var r=!1;return 2<=arguments.length&&(r=!0),function(e){return e.lift(new o(t,n,r))}}var o=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.accumulator,this.seed,this.hasSeed))},e}(),u=function(a){function e(e,t,n,r){var i=a.call(this,e)||this;return i.accumulator=t,i._seed=n,i.hasSeed=r,i.index=0,i}return r.a(e,a),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),e.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},e.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},e}(i.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(128);function i(e,t){return t?Object(r.a)(function(){return e},t):Object(r.a)(function(){return e})}}],i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=200)).default;function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var n,r});